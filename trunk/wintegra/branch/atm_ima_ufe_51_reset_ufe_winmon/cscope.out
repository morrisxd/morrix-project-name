cscope 15 $HOME/WDDS_5_1_RC3_b2031_2014_06_30_morris_self_stream/apps/refapps/atm_ima_ufe -q 0000002301 0000318796
	@atm_ima_ufe.c

39 
	#MORRIS_USE_OC3_4
 (1)

	)

40 
	#MORRIS_DISABLE_AGG_WHEN_RECV
 (0)

	)

41 
	#WTI_CESOP_REGRESSION_TEST
 1

	)

44 
	#TICKS_PER_SECOND
 2

	)

45 
	#SECONDS
(
n
Ë“ * 
TICKS_PER_SECOND
)

	)

46 
	#ENABLE_EMPHY_BEFORE_UFE_INIT


	)

48 
	~<°dlib.h
>

49 
	~<°dio.h
>

50 
	~<°rög.h
>

51 
	~"˘y≥.h
"

54 
	~"wp_wddi.h
"

55 
	~"wp_sim.h
"

56 
	~"wpx_oc12_pmc5357.h
"

58 
	~"wp_ho°_io.h
"

59 
	~"wpx_≠p_d©a.h
"

60 
	~"wpx_oc3_pmc5351.h
"

62 
	~"wpx_pö_mux_£À˘‹.h
"

63 
	~"wpx_tdm_comë.h
"

64 
	~"wpx_íë_phy.h
"

68 
	#PHY_TYPE_T1
 0

	)

69 
	#PHY_TYPE_E1
 1

	)

71 
	~"©m_ima_u„.h
"

73 
	~"u„_utûôy.h
"

75 
WUFE_°©us
 
WUFE_Sy°emDi•œy
 (
WP_U32
 
wu„_id
);

77 
	~"©m_ima_u„_utû.c
"

78 
	~"©m_ima_u„_°©s.c
"

80 
	#Aµ_Tîmö©eOnEº‹
(
h™dÀ
,
s
Ë
	`Aµ_Tîmö©eOnEº‹X
(h™dÀ,s,
__FILE__
,
__LINE__
)

	)

81 
WT_U„Tîmö©eOnEº‹X
 (
WUFE_°©us
 
h™dÀ
, 
WP_CHAR
 * 
s
, 
WP_U32
 
id
,

82 
WP_U32
 
LöeNum
, *
f
);

83 
	#WT_U„Tîmö©eOnEº‹
(
a
,
b
,
c
,
d
Ë
	`WT_U„Tîmö©eOnEº‹X
◊,b,c,d,
__FILE__
)

	)

84 
WP_U8
 
	g¥bs_ªsu…
[336];

86 
	~"Êexmux_utû.c
"

88 
	~"u„_utûôy.c
"

89 
	~"wti_utûôy.c
"

90 
	~"wpu_è.h
"

93 
WUFE_öô_c⁄fig
 
	gu„4_c⁄fig
;

94 
WP_ima_evít
 
	ga_èsk
;

96 
	$ªÀa£_ã°
 ()

98 
	`WP_DrivîRñó£
 ();

100 
	`exô
 (1);

101 
	}
}

104 
	$WT_U„Tîmö©eOnEº‹X
 (
WUFE_°©us
 
h™dÀ
, 
WP_CHAR
 * 
s
, 
WP_U32
 
id
,

105 
WP_U32
 
LöeNum
, *
f
)

107 i‡(
°©us
 !
WUFE_OK
)

109 
	`¥ötf
 ("UFE Error %s %s, file(%s)line(%d)\n",

110 
WUFE_îr‹_«me
[(
°©us
 & 0x03ffffff)],

111 
s
,

112 
f
,

113 
LöeNum
);

114 
	`ªÀa£_ã°
 ();

117 
	}
}

119 
	$Aµ_Re£tU„
 ()

121 
	`WPX_U„4HwRe£t
 (0, 
WP_PORT_UPI1
);

123 i‡(
WTI_INITIALIZE_FIRMWARE
)

126 
¥ötf


128 
	`¥ötf
 (" UFE build configuration isÜoadedÅhroughÅhe host!!!\n");

129 
¥ötf


131 
	`mem£t
 (&
u„4_c⁄fig
, 0,  (
WUFE_öô_c⁄fig
));

132 
u„4_c⁄fig
.
u„_id
 = 0;

133 
°©us
 = 
	`WUFE_U„InôülizeFúmw¨e
 (&
u„4_c⁄fig
);

134 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WUFE_Ufe4InitializeFirmware");

137 
	}
}

139 
WP_THREAD_ID
 
	gagög_tid
;

140 
WP_U32
 
	g°›Msg
 = 0;

142 
Aµ_RódU„Evíts
();

143 * 
	$Aµ_Evíts
 (*
¨g
)

145 
ii
 = 0;

146 
≠p_èsk
 *
èsk
, 
a_èsk
;

148 
èsk
 = 
NULL
;

149 
	`mem£t
 (&
a_èsk
, 0, (
≠p_èsk
));

153 
ii
 ++;

154 i‡(
°›Msg
Ë
	`¥ötf
 ("App_Events():ÑunningÇow\n");

155 
	`di•œy_evíts
();

156 (
èsk
 = 
	`√xt_èsk
 (
úq_èsk_li°
, &
a_èsk
)Ë!
NULL
)

157 
	`≠p_≥rf‹m_a˘i⁄
 (
èsk
);

158 
	`WPL_Waô
 (10000);

159 i‡(!(
ii
 % 100)) {

160 
	`Aµ_RódU„Evíts
 ();

163 
	}
}

165 
WP_U32
 
	$ªad_ªg
(
WP_U32
 
addr
)

167 
WP_U32
 
ªt
;

168 
ªt
 = *((vﬁ©ûê*)()(
addr
 + 
	`WPL_RIF_VIRTUAL
(0, 0)));

170  
ªt
;

171 
	}
}

182 
	#KEY_BACKSPACE
 8

	)

183 
	#KEY_ENTER
 10

	)

185 
WPUI_RunWöM⁄
(
WP_CHAR
 *
°r
);

187 
	$CLI_WöUtû
(*
SåPrm
)

189 
ªt
 = 0;

190 
WP_CHAR
 
I≈utBuf
[255];

194 
	`¥ötf
("\nwinutil command :");

195 
	`fÊush
 ((
FILE
 *)1);

197 
	`gës
(
I≈utBuf
);

198 
	`¥ötf
 ("\nYou∏öpuàis: (%s)\n", 
I≈utBuf
);

199 
	`fÊush
 ((
FILE
 *)1);

201 
ªt
 = 
	`°æí
(
I≈utBuf
);

202 
	`¥ötf
("\n");

203 
	`WPUI_RunWöM⁄
(
I≈utBuf
);

204 }
ªt
 > 7);

207 
	}
}

209 
	$Aµ_E«bÀU„Evíts
()

211 
WUFE_°©us
 
°©us
;

212 
WUFE_evíts
 
u„_evíts
;

213 
WP_U32
 
u„_id
 = 0;

214 
c‹eid
;

216 
	`mem£t
(&
u„_evíts
, 0, (
WUFE_evíts
));

217 
u„_evíts
.
emphy_evíts
[
c‹eid
].
evít_ªg
 = 
WUFE_EVENT_EMPHY
;

218 
°©us
 = 
	`WUFE_U„EvítE«bÀ
(
u„_id
, &
u„_evíts
);

220  
°©us
;

221 
	}
}

223 
	$Aµ_RódU„Evíts
()

225 
WUFE_°©us
 
°©us
;

226 
WUFE_evíts
 
u„_evíts
;

227 
WP_U32
 
u„_id
 = 0;

228 
ii
 = 0;

230 
°©us
 = 
	`WUFE_U„RódEvíts
(
u„_id
, &
u„_evíts
);

231 
ii
 = 0; iò< 
WUFE_MAX_N_EMPHYS
; ii ++)

233 i‡(
u„_evíts
.
emphy_evíts
[
ii
].
evít_ªg
) {

234 
	`¥ötf
 ("phy(%4d)reg(%x)not_valid_h(%x)\n",

235 
ii
,

236 
u„_evíts
.
emphy_evíts
[
ii
].
evít_ªg
,

237 
u„_evíts
.
emphy_evíts
[
ii
].
phy_nŸ_vÆid_h™dÀ
);

240  
°©us
;

241 
	}
}

244 
	#ENABLE_ZAR
 (0)

	)

245 
	$maö
 (
¨gc
, *
¨gv
[])

247 #i‡
ENABLE_ZAR


248 
WPX_∂l_cfg
 
∂lC⁄figP¨am
 = {0};

250 
WP_U32
 
tmp
 = 0;

251 
WP_°©us
 
°©us
;

252 
≠p_èsk
 *
èsk
, 
a_èsk
;

253 
WP_CHAR
 
comm
;

254 
dìp
 = 0, 
dìpsys
 = 0, 
shÆlowlöe
 = 0;

255 
WP_°©s_emphy
 
°©s_emphy
;

257 
tmp
 = 0;

258 
	`¥ötf
 ("WPL_RIF_VIRTUAL(%x)\n", 
	`WPL_RIF_VIRTUAL
(0, 0));

260 
	`mem£t
 (&
°©s_emphy
, 0, (
WP_°©s_emphy
));

261 
èsk
 = 
NULL
;

262 
	`mem£t
 (&
a_èsk
, 0,  (
≠p_èsk
));

264 i‡((
¨gc
 == 3)

265 && (!
	`°rcmp
 (
¨gv
[1], "freerun")) && (argv[2][0] != '0'))

267 
	`¥ötf
 ("Unknow¿∑øm : %s\n", 
¨gv
[2]);

268 
	`¥ötf
 ("Test Abort!\n");

269 
	`exô
 (0);

272 
°©us
 = 
	`WP_DrivîInô
 ();

273 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_DriverInit()");

275 
	`¥ötf
 ("¥o˚ss‹ s≥ed i†:(%d)\n", 
	`WPL_GëPro˚ss‹S≥ed
());

278 
	`Aµ_Te°Inô
 ();

281 
	`Aµ_SysInô
 ();

285 
	`Aµ_InôHW
 ();

286 #i‡
ENABLE_ZAR


287 
	`WTI_Z¨lökPŒSëup
(&
∂lC⁄figP¨am
);

288 
	`¥ötf
 ("WTI_ZarlinkPllSetup(&pllConfigParam);\n");

289 
	`WTI_BﬂrdPöC⁄fig
(
WTI_DEFAULT_PIN_CONFIG
, 1, 
∂lC⁄figP¨am
.
˛ock_out
);

290 
	`¥ötf
 ("WTI_BoardPinConfig(WTI_DEFAULT_PIN_CONFIG, 1,ÖllConfigParam.clock_out);\n");

291 
°©us
 = 
	`WPX_BﬂrdZ¨lökPŒC⁄fig
(0, 
WPX_PLL_CONFIG_APLL_125
);

293 
	`Aµ_Sy°emSëup
 ();

295 
	`Aµ_Re£tU„
 ();

298 
	`Aµ_P‹tsCª©e
 ();

301 
	`Aµ_Devi˚sAŒocCª©e
 ();

304 
	`Aµ_Buf„rPoﬁsCª©e
 ();

307 
°©us
 = 
	`WP_SysCommô
 ();

308 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_SysCommit()");

310 
	`Aµ_íabÀEmphyP‹t
 ();

313 
	`Aµ_u„Sy°em
 ();

316 
°©us
 = 
	`WP_SysAsuE«bÀ
 (
	`WP_WINPATH
 (0));

317 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_SysAsuEnable()");

320 
	`Aµ_ImaSëup
 ();

323 
	`Aµ_ImaGroupEvít
 ();

326 
	`Aµ_Ch™√lsCª©e
 ();

329 
	`Aµ_ImaCh™√lsCª©e
 ();

332 
	`Aµ_Cª©eE√tU„IwSy°em
 ();

335 
	`Aµ_Cª©eU„E√tIwSy°em
 ();

337 
	`Aµ_Debug
 (0);

339 
	`Aµ_P‹tsDevi˚sE«bÀ
 ();

342 
	`Aµ_Ch™√lsE«bÀ
 ();

344 
	`Aµ_E«bÀU„Evíts
();

346 
	`WPL_ThªadInô
(&
agög_tid
, 
Aµ_Evíts
, 
NULL
);

348 
	`di•œy_evíts
 ();

350 
	`¥ötf
 ("¥o˚ss‹ s≥ed i†:(%d)\n", 
	`WPL_GëPro˚ss‹S≥ed
());

352 
	`WTI_FÀxmux_Pìk
 (0,0x90000000 );

354 
	`WP_Di•œy
 (0, 
WP_DISPLAY_QNODE
, 0, 0);

355 
	`WUFE_Sy°emDi•œy
 (0);

356 
	`¥ötf
 ("phydisplay 0\n");

357 
	`WUFE_PhyDi•œy
(
u„4_≠p_sy°em
.
phy_h™dÀ
[0]);

358 
	`¥ötf
 ("phydisplay 1\n");

359 
	`WUFE_PhyDi•œy
(
u„4_≠p_sy°em
.
phy_h™dÀ
[1]);

360 
	`WP_EmphyP‹tSèti°ics
 (
emphy_p‹t
, &
°©s_emphy
);

364 i‡(
¨gc
 <= 1)

369 
WP_U32
 
À·
 = 0;

370 
	`¥ötf
 ("\n");

371 
	`¥ötf
 ("atm_ima_ufe demonÖrogram\n");

372 
	`¥ötf
 ("=========================\n");

373 
	`¥ötf
 ("a. Stats & Status\n");

374 
	`¥ötf
 ("d. Debug\n");

375 
	`¥ötf
 ("g. getÖacket\n");

376 
	`¥ötf
 ("p. Send Packet\n");

377 
	`¥ötf
 ("l. deepÜineÜoop\n");

378 
	`¥ötf
 ("m. deep systemÜoop\n");

379 
	`¥ötf
 ("o. setáll deepÜine inÖolling mode\n");

380 
	`¥ötf
 ("t. showáll deepÜineÜoop\n");

381 
	`¥ötf
 ("u. shallowÜineÜoop\n");

382 
	`¥ötf
 ("q. qnode status\n");

383 
	`¥ötf
 ("C. channel status\n");

384 
	`¥ötf
 ("r.Ñeboot\n");

385 
	`¥ötf
 ("s. Simulate Interrupts\n");

386 
	`¥ötf
 ("w. Winutil\n");

387 
	`¥ötf
 ("BuûdÅime: [%s:%s]\n", 
__DATE__
, 
__TIME__
);

388 
	`WP_Mem‹yAvaûabÀ
 (0, 
WP_BUS_HOST
, 
APP_BANK_HOST
, &
À·
);

389 
	`¥ötf
 ("mem‹y ußge: ho° bu†\t\t(%012dËbyã†À·\n", 
À·
);

390 
	`WP_Mem‹yAvaûabÀ
 (0, 
WP_BUS_PARAM
, 
APP_BANK_PARAM
, &
À·
);

391 
	`¥ötf
 ("mem‹y ußge:Ö¨am bu†\t(%012dËbyã†À·\n", 
À·
);

392 #i‚de‡
WP_BOARD_WDS3_SL


393 
	`WP_Mem‹yAvaûabÀ
 (0, 
WP_BUS_PACKET
, 
APP_BANK_PACKET
, &
À·
);

394 
	`¥ötf
 ("mem‹y ußge:Öackë bu†\t(%012dËbyã†À·\n", 
À·
);

398 
comm
 = 
	`gëch¨
 ();

399 
comm
)

403 
°›Msg
 = ~stopMsg;

404 
	`¥ötf
 ("°›Msg(%d)\n", 
°›Msg
);

408 
	`WP_Di•œy
 (0, 
WP_DISPLAY_CHANNEL
, 0, 0);

412 
	`WP_Di•œy
 (0, 
WP_DISPLAY_QNODE
, 0, 0);

413 
	`¥ötf
 ("");

417 
	`CLI_WöUtû
 ("hi");

421 i‡(!
shÆlowlöe
)

423 
	`WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkE«bÀShÆlowLöe
 (0, 0, 0);

424 
shÆlowlöe
 = 1;

425 
	`¥ötf
 ("set shallowÜine\n");

429 
shÆlowlöe
 = 0;

430 
	`WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkDißbÀShÆlowLöe
 (0, 0, 0);

431 
	`¥ötf
 ("clear shallowÜine\n");

437 
WP_U8
 
°©us
 = 0;

438 
p‹t
 = 0;

440 i‡(!
dìpsys
)

442 
	`WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkE«bÀDìpSy°em
 (0, 0,

443 
p‹t
);

444 
dìpsys
 = 1;

445 
	`WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkGëDìpSy°emSèã
 (0,

446 
p‹t
,

447 &
°©us
);

448 
	`¥ötf
 ("p‹t(%d)dìpsy†°©us(%d)dìpsys(%d)\n", 
p‹t
,

449 
°©us
, 
dìpsys
);

453 
dìpsys
 = 0;

454 
	`WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkDißbÀDìpSy°em
 (0, 0,

455 
p‹t
);

456 
	`WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkGëDìpSy°emSèã
 (0,

457 
p‹t
,

458 &
°©us
);

459 
	`¥ötf
 ("p‹t(%d)dìpsy†°©us(%d)dìpsys(%d)\n", 
p‹t
,

460 
°©us
, 
dìpsys
);

466 
iii
 = 0, 
˛õ¡
 = 0;

468 
iii
 = 0; iii < 252; iii++)

470 
˛õ¡
 = 
iii
;

472 
	`WTI_FÀxmuxE«bÀLo›back
 (0, -1, 
˛õ¡
,

473 
WT_FLEXMUX_DEEP_LINE_LOOPBACK
);

475 
	`WPX_FRMR_SOCKET_PDH_DIAG_LpbkE«bÀDìpLöe
 (0, 0, 
˛õ¡
);

476 
	`¥ötf
 ("£àdì∂öêÕbk o¿p‹t(%4d)\n", 
˛õ¡
);

478 
	`WPL_Waô
 (10000000 * 3);

484 
WP_U8
 
°©us
 = 0;

485 
p‹t
 = 0;

486 
iii
 = 0;

488 
iii
 = 0; iii < 252; iii++)

490 
p‹t
 = 
iii
;

491 
	`WPX_FRMR_SOCKET_PDH_DIAG_LpbkGëDìpLöeSèã
 (0, 
p‹t
,

492 &
°©us
);

493 
	`¥ötf
 ("p‹t(%4d)°©us(%d)\n", 
p‹t
, 
°©us
);

498 
	`WPX_ReboŸ
 ();

503 
WP_U8
 
°©us
 = 0;

504 
p‹t
 = 0;

506 i‡(!
dìp
)

509 
	`WTI_FÀxmuxE«bÀLo›back
 (0, -1, 
˛õ¡
,

510 
WT_FLEXMUX_DEEP_LINE_LOOPBACK
);

512 
	`WPX_FRMR_SOCKET_PDH_DIAG_LpbkE«bÀDìpLöe
 (0, 0, 
p‹t
);

514 
dìp
 = 1;

515 
	`WPX_FRMR_SOCKET_PDH_DIAG_LpbkGëDìpLöeSèã
 (0, 
p‹t
,

516 &
°©us
);

517 
	`¥ötf
 ("£àp‹t(%d)dì∂öê°©us(%d)dìp(%d)\n", 
p‹t
,

518 
°©us
, 
dìp
);

523 
	`WPX_FRMR_SOCKET_PDH_DIAG_LpbkDißbÀDìpLöe
 (0, 0,

524 
p‹t
);

525 
dìp
 = 0;

526 
	`WPX_FRMR_SOCKET_PDH_DIAG_LpbkGëDìpLöeSèã
 (0, 
p‹t
,

527 &
°©us
);

528 
	`¥ötf
 ("˛ó∏p‹t(%d)dì∂öê°©us(%d)dìp(%d)\n", 
p‹t
,

529 
°©us
, 
dìp
);

535 
	`Aµ_ShowSèts
 ();

538 
	`Aµ_D©aSíd
 (
h_íë1_tx
, 
h_poﬁ_buf„r_iw
);

541 
	`Aµ_DuRe˚ive
(
h_íë2_rx
, 
WP_DATA_ENET
);

546 
iii
 = 0;

547 
WPU_è_öfo
 
è
;

548 
WP_U32
 
addr
 = 0;

550 
°©us
 = 
	`WPU_TA
(0, 0,
WPU_TA_CMD_GET_BASES
, &
è
);

551 
addr
 = 
è
.
ba£s_öfo
[254].addr;

552 
	`¥ötf
 ("B_DEBUG1 ba£(%x)\n", 
addr
);

553 
iii
 = 0; iii < 312/4; iii=iii+1)

555 
	`¥ötf
 ("[%8d]: 0x%8x 0x%8x 0x%8x 0x%8x\n", 
iii
 * 4 + 0,

556 
è
.
ba£s_öfo
[
iii
 * 4 + 0].
addr
,

557 
è
.
ba£s_öfo
[
iii
 * 4 + 1].
addr
,

558 
è
.
ba£s_öfo
[
iii
 * 4 + 2].
addr
,

559 
è
.
ba£s_öfo
[
iii
 * 4 + 3].
addr


563 
iii
 = 0; iii < 256/16; iii=iii+1)

565 
	`¥ötf
 ("[%8x]: 0x%08x 0x%08x 0x%08x 0x%08x\n", 
iii
 * 16 + 
addr
,

566 
	`ªad_ªg
 (
addr
 + 
iii
 * 16 + 0),

567 
	`ªad_ªg
 (
addr
 + 
iii
 * 16 + 4),

568 
	`ªad_ªg
 (
addr
 + 
iii
 * 16 + 8),

569 
	`ªad_ªg
 (
addr
 + 
iii
 * 16 + 12)

572 
	`¥ötf
 ("ªad(0x1c00a000)=[%8d]\n", 
	`ªad_ªg
(0x1c00a000));

590 
	`WPI_SimuœãI¡îru±s
 ();

591 (
èsk
 = 
	`√xt_èsk
 (
úq_èsk_li°
, &
a_èsk
)Ë!
NULL
)

592 
	`≠p_≥rf‹m_a˘i⁄
 (
èsk
);

596 i‡((
¨gc
 =3Ë&& (!
	`°rcmp
 (
¨gv
[1], "freerun")))

599 
	`Aµ_≥rf‹m_‰ìrun
 ();

604 
	`¥ötf
 ("WrongÖarameter! Only \"go\" or \"go freerun\" supported!");

606 
	`Aµ_Quô
 (1);

609 
	}
}

620 
	$Aµ_Te°Inô
 ()

622 
èg_iw_sys_bridge1
 = 600;

624 
èg_bp‹t_íë1
 = 700;

626 
èg_íë1_rx
 = 1600;

627 
èg_íë1_tx
 = 1700;

629 
èg_íë2_rx
 = 1800;

630 
èg_íë2_tx
 = 1900;

632 
èg_iwho°_rx1
 = 90;

633 
èg_iwho°_rx2
 = 91;

636 
èg_bridge1_bp‹t_ima
 = 850;

637 
èg_agg_ima1
 = 1150;

638 
	}
}

648 
	$Aµ_SysInô
 ()

652 
c⁄ãxt_cfg
.
öt_queue_d©a
 = &
öt_queue_èbÀ_cfg
;

653 
c⁄ãxt_cfg
.
©m_d©a
 = &
©m_globÆ_cfg
;

654 
c⁄ãxt_cfg
.
iw_d©a
 = &
iw_globÆ_cfg
;

655 
c⁄ãxt_cfg
.
poﬁ_limô
 = 8;

656 
c⁄ãxt_cfg
.
max_qnodes
 = 4;

657 
	`¥ötf
 ("before WP_SysInit ()\n");

658 
°©us
 = 
	`WP_SysInô
 (
APP_MASTER_WPID
, &
c⁄ãxt_cfg
);

659 
	`¥ötf
 ("after WP_SysInit ()\n");

660 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_SysInit()");

661 
	}
}

671 
	$Aµ_InôHW
 ()

674 
°©us
 = 
	`WPX_BﬂrdC⁄figuª
 (0, 
WPX_CONFIGURE_2UPI_1XGI_10SGMII_UFE4
);

675 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
,

679 
°©us
 = 
	`WPX_BﬂrdSîdesInô
 (0, 
APP_PORT_INGRESS
, 
WPX_SERDES_LOOPBACK
);

681 
°©us
 = 
	`WPX_BﬂrdSîdesInô
 (0, 
APP_PORT_INGRESS
, 
WPX_SERDES_NORMAL
);

684 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WPX_BoardSerdesInit 7()");

686 
°©us
 = 
	`WPX_BﬂrdSîdesInô
 (0, 
APP_PORT_EGRESS
, 
WPX_SERDES_LOOPBACK
);

688 
°©us
 = 
	`WPX_BﬂrdSîdesInô
 (0, 
APP_PORT_EGRESS
, 
WPX_SERDES_NORMAL
);

690 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WPX_BoardSerdesInit 8()");

693 
°©us
 =

694 
	`WP_SysClockCª©e
 (
	`WP_WINPATH
 (0), 
WP_BRG1
, 
WP_BRG_SRC_BRGIN2
, 2);

696 
°©us
 =

697 
	`WP_SysClockCª©e
 (
	`WP_WINPATH
 (0), 
WP_BRG3
, 
WP_BRG_SRC_BRGIN2
, 2);

702 
	}
}

715 
	$Aµ_P‹tsCª©e
 ()

719 
h_p‹t_íë1
 = 
	`WP_P‹tCª©e
 (
APP_MASTER_WPID
, 
APP_PORT_INGRESS
,

720 &
p‹t_íë_cfg
);

721 
	`Aµ_Tîmö©eOnEº‹
 (
h_p‹t_íë1
, "WP_PortCreate() Enet7");

724 
h_p‹t_íë2
 = 
	`WP_P‹tCª©e
 (
APP_MASTER_WPID
, 
APP_PORT_EGRESS
,

725 &
p‹t_íë_cfg
);

726 
	`Aµ_Tîmö©eOnEº‹
 (
h_p‹t_íë2
, "WP_PortCreate() Enet8");

729 
h_p‹t_iwho°
 = 
	`WP_P‹tCª©e
 (
	`WP_WINPATH
 (0), 
WP_PORT_IW_HOST
, 
NULL
);

730 
	`Aµ_Tîmö©eOnEº‹
 (
h_p‹t_iwho°
, "WP_PortCreate() IW Host");

734 
emphy_p‹t
 = 
	`WP_P‹tCª©e
 (
	`WP_WINPATH
 (0),

735 
APP_EMPHY_PORT
, &
upi_emphy_p‹t_c⁄fig
);

736 
	`Aµ_Tîmö©eOnEº‹
 (
emphy_p‹t
,

739 
	}
}

750 
	$Aµ_Devi˚sAŒocCª©e
 ()

753 
	`MAC_COPY
 (
devi˚_íë_cfg
.
mac_addr
, 
wt_mac_íë1
);

754 
h_devi˚_íë1
 =

755 
	`WP_Devi˚Cª©e
 (
h_p‹t_íë1
, 
	`WP_PHY
 (0), 
WP_DEVICE_ENET
,

756 &
devi˚_íë_cfg
);

757 
	`Aµ_Tîmö©eOnEº‹
 (
h_devi˚_íë1
, "WP_DeviceCreate() Enet1");

759 
devi˚_íë_cfg
.
lo›backmode
 = 
WP_ENET_NORMAL
;

760 
	`MAC_COPY
 (
devi˚_íë_cfg
.
mac_addr
, 
wt_mac_íë2
);

761 
h_devi˚_íë2
 =

762 
	`WP_Devi˚Cª©e
 (
h_p‹t_íë2
, 
	`WP_PHY
 (0), 
WP_DEVICE_ENET
,

763 &
devi˚_íë_cfg
);

764 
	`Aµ_Tîmö©eOnEº‹
 (
h_devi˚_íë2
, "WP_DeviceCreate() Enet2");

767 
h_dev_iwho°
 =

768 
	`WP_Devi˚Cª©e
 (
h_p‹t_iwho°
, 0, 
WP_DEVICE_IW_HOST
, 
NULL
);

769 
	`Aµ_Tîmö©eOnEº‹
 (
h_dev_iwho°
, "WP_DeviceCreate() IW Host");

770 
	}
}

780 
	$Aµ_IMADevi˚sCª©e
 ()

783 
WP_U32
 
ii
;

786 
ii
 = 0; iò< 
APP_MAX_IMA_DEVICE
; ii++)

788 
h_dev_ima
[
ii
] = 
	`WP_Devi˚Cª©e
 (
emphy_p‹t
,

789 
	`WP_EMPHY_PHY
 (0,

790 
WUFE_PHY_INDEX_GET


791 (
u„4_≠p_sy°em
.

792 
phy_h™dÀ
[
ii
])),

795 
WP_DEVICE_IMA
, 
u„_devi˚_cfg
);

796 
	`Aµ_Tîmö©eOnEº‹
 (
h_dev_ima
[
ii
], "WP_DeviceCreate() IMA device");

798 
	}
}

808 
	$Aµ_Buf„rPoﬁsCª©e
 ()

812 
h_poﬁ_buf„r_iw
 = 
	`WP_PoﬁCª©e
 (
APP_MASTER_WPID
, 
WP_poﬁ_iwbuf„r
,

813 &
poﬁ_buf„r_d©a_iw_cfg
);

814 
	`Aµ_Tîmö©eOnEº‹
 (
h_poﬁ_buf„r_iw
, "WP_PoolCreate iwbuffer iw");

817 
h_poﬁ_256
 = 
	`WP_PoﬁCª©e
 (
	`WP_WINPATH
 (0), 
WP_poﬁ_buf„r
,

818 &
poﬁ_buf„r_d©a_256_cfg
);

819 
	`Aµ_Tîmö©eOnEº‹
 (
h_poﬁ_256
, "PoolCreate()Öool_256");

821 
h_poﬁ_rög_ho°
 = 
	`WP_PoﬁCª©e
 (
	`WP_WINPATH
 (0), 
WP_poﬁ_rög
,

822 &
poﬁ_rög_d©a_cfg
);

823 
	`Aµ_Tîmö©eOnEº‹
 (
h_poﬁ_rög_ho°
, "PoolCreate()Öool_ring_host");

826 
qnode_iwq_cfg
.
adjun˘_poﬁ
 = 
h_poﬁ_buf„r_iw
;

827 
h_qnode_iwq
 = 
	`WP_QNodeCª©e
 (
APP_MASTER_WPID
, 
WP_QNODE_IWQ
 |

828 
WP_QNODE_OPT_DEDICATED_RX_HWQ
 |

829 
WP_QNODE_OPT_FMU
, &
qnode_iwq_cfg
);

830 
	`Aµ_Tîmö©eOnEº‹
 (
h_qnode_iwq
, "WP_QNodeCreate() h_qnode_iwq");

833 
qnode_ho°q_cfg
.
poﬁ_buf„r
 = 
h_poﬁ_256
;

834 
qnode_ho°q_cfg
.
poﬁ_rög
 = 
h_poﬁ_rög_ho°
;

835 
h_qnode_ho°
 =

836 
	`WP_QNodeCª©e
 (
	`WP_WINPATH
 (0), 
WP_QNODE_HOSTQ
, &
qnode_ho°q_cfg
);

837 
	`Aµ_Tîmö©eOnEº‹
 (
h_qnode_ho°
, "WP_QnodeCreate() h_qnode_host");

840 
qn_iw_ima_cfg
.
adjun˘_poﬁ
 = 
h_poﬁ_buf„r_iw
;

841 
ima_qn
 = 
	`WP_QNodeCª©e
 (
	`WP_WINPATH
 (0), 
WP_QNODE_IWQ
, &
qn_iw_ima_cfg
);

842 
	`Aµ_Tîmö©eOnEº‹
 (
ima_qn
, "WP_QNodeCreate() ima_qn");

843 
	}
}

854 
	$Aµ_Sy°emSëup
 ()

856 
WP_U32
 
ii
;

859 
ima_sys_h™dÀ
 = 
	`WP_ImaSy°emCª©e
 (
	`WP_WINPATH
 (0), &
ima_sys_∑øms
);

860 
	`Aµ_Tîmö©eOnEº‹
 (
ima_sys_h™dÀ
, "WP_ImaSystemCreate()");

862 
°©us
 = 
	`WP_C⁄åﬁRegi°î
 (
WP_EVENT_RX_INDICATE
, 
Aµ_EvítRxIndiˇã
);

863 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_ControlRegister()");

865 
°©us
 = 
	`WP_C⁄åﬁRegi°î
 (
WP_EVENT_TX_INDICATE
, 
Aµ_EvítTxIndiˇã
);

866 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_ControlRegister()");

868 
°©us
 =

869 
	`WP_C⁄åﬁRegi°î
 (
WP_EVENT_STATUS_INDICATE
,

870 
Aµ_EvítEº‹Indiˇã
);

871 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_ControlRegister()");

874 
°©us
 = 
	`WP_C⁄åﬁRegi°î
 (
WP_EVENT_IMA
, &
Aµ_ImaEvít
);

875 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_ControlRegister()");

877 
°©us
 = 
	`WP_SysScheduÀrCª©e
 (
	`WP_WINPATH
 (0), 
cw_c⁄fig
);

878 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_SysSchedulerCreate()");

881 
ii
 = 0; (iò< 
RATE_TABLE_SLOTS
Ë&& 
VP_PER_IMA_GROUP
; ii++)

883 
sh≠ög_èbÀ
[
ii
] = iò% 
VP_PER_IMA_GROUP
;

885 
sh≠ög_èbÀ
[
RATE_TABLE_SLOTS
] = 
WP_HIER_SHAPING_TABLE_TERM
;

887 
	}
}

889 
WPX_UFE_FRAMER_FÀxmuxTîmö©eOnEº‹
 (

890 *
pF©ÆEº‹Mesßge
);

893 
	$WTI_UFE_FRAMER_PEEK_RESPONSE_CALLBACK
(
U8
 
iDevi˚
, 
U32
 
Addªss
, U32 
VÆue
)

895 
DIAG_PEEK_INFO
.
iDevi˚
=iDevice;

896 
DIAG_PEEK_INFO
.
Addªss
=Address;

897 
DIAG_PEEK_INFO
.
VÆue
=Value;

898 
DIAG_PEEK_INFO
.
VÆid
=1;

901 
	}
}

913 
	$Aµ_u„Sy°em
 ()

915 
WUFE_°©us
 
u„_°©us
;

916 
WP_U32
 
¥›îty
, 
i
, 
num_of_löes
, 
Res
 = 0;

917 
WTI_FÀxmux_globÆ_£tup
 
Êex_globÆ_∑øms
;

918 
WUFE_löe_å™sf_ty≥
 
å™s„r_ty≥
;

919 
WUFE_un_‰amed
 
‰amög_mode
;

920 
WUFE_ˇs_íabÀ
 
ˇs_mode
;

921 
WT_u„_löe_sdh_∑øms
 
u„_löe_∑øms
;

922 
WTI_Êexmux_c⁄√˘i⁄_ty≥
 
c⁄n_ty≥
;

923 
WP_U32
 
˛õ¡_p‹t
, 
löe_p‹t
;

924 
WUFE_löe_˛ock_ªc_∑øms
 
löe_¸_∑øms
;

926 
Res
 = 0;

927 
¥›îty
 = 0;

928 
num_of_löes
 = 
WT_MAX_LINE_INDEX
;

929 
å™s„r_ty≥
 = 
WUFE_SDH_TYPE_E1
;

930 
‰amög_mode
 = 
WUFE_UNFRAMED
;

931 
ˇs_mode
 = 
WUFE_CAS_DISABLE
;

933 
°©us
 = 
	`WUFE_U„Inô
 (&
u„4_c⁄fig
);

934 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WUFE_Ufe4Init");

936 
°©us
 = 
	`WUFE_Devi˚Ty≥Së
 (0, 
WUFE_DEVICE_TYPE_UFE412_M4
);

937 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WUFE_DeviceTypeSet");

940 
u„4_sy°em_cfg
.
˛ock_ªc_sys_∑øms
 = 0;

943 
u„_°©us
 = 
	`WUFE_Sy°emC⁄fig
 (0, &
u„4_sy°em_cfg
);

944 
	`WT_U„Tîmö©eOnEº‹
 (
u„_°©us
, "WUFE_Sy°emC⁄fig", 0, 
__LINE__
);

952 #i‡
MORRIS_USE_OC3_4


953 
	`¥ötf
 ("WT_FLEXMUX_UFE_412_4_PORTS_OC3 set\n");

954 
	`WTI_FÀxmuxInô
 (
APP_EMPHY_PORT
, 0, 
WT_FLEXMUX_UFE_412_4_PORTS_OC3
, 
WPX_UFE_FRAMER_DEVICE_MODE_SDH
, 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC4
,

955 &
Êex_globÆ_∑øms
);

957 
	`¥ötf
 ("WT_FLEXMUX_UFE_412_1_PORT_OC12 set\n");

958 
	`WTI_FÀxmuxInô
 (
APP_EMPHY_PORT
, 0, 
WT_FLEXMUX_UFE_412_1_PORT_OC12
, 
WPX_UFE_FRAMER_DEVICE_MODE_SDH
, 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC4
,

959 &
Êex_globÆ_∑øms
);

964 
	`WPX_FRMR_Regi°îPìkCÆlback
((*)(()
WTI_UFE_FRAMER_PEEK_RESPONSE_CALLBACK
));

966 
WPX_UFE_FRAMER_PEEK_RESPONSE_ANNOUNCE_TYPE
 
ˇŒback
;

968 
ˇŒback
 = 
NULL
;

970 
Res
=
	`WPX_UFE_FRAMER_FÀxmuxInô_Te°Mode
(0,0);

971 i‡(
Res
!=
WUFE_OK
)

973 
	`¥ötf
("WPX_UFE_FRAMER_FlexmuxInit_TestMode failed");

974 
	`exô
(1);

980 
	`¥ötf
 ("DIAG_PEEK_INFO,áddres(%x), value(%x)\n",

981 
DIAG_PEEK_INFO
.
Addªss
,

982 
DIAG_PEEK_INFO
.
VÆue
);

985 
i
 = 
WT_FIRST_LINE_INDEX
; i < (
num_of_löes
 + WT_FIRST_LINE_INDEX);

986 ++
i
)

991 
°©us
 = 
	`WUFE_LöeCª©e
 (&
u„4_≠p_sy°em
.
löe_h™dÀ
[
i
],

992 
u„4_≠p_sy°em
.
u„id
,

993 
WUFE_STRUCT_LINE_SDH
, &
löe_cfg
);

995 
	`WT_U„Tîmö©eOnEº‹
 (
°©us
, "WUFE_LöeCª©e", 
i
, 
__LINE__
);

997 i‡(
löe_cfg
->
å™s„r_ty≥
 =
WUFE_SDH_TYPE_E1
)

999 
	`¥ötf
 ("WUFE_SDH_TYPE_E1Üök(%3dË¸óãd, %dáŒ\r", 
i
,

1000 
num_of_löes
);

1001 
˛õ¡_p‹t
 = 
i
 + (i / 3);

1005 
	`¥ötf
 ("WUFE_SDH_TYPE_T1Üök(%3dË¸óãd, %dáŒ\r", 
i
,

1006 
num_of_löes
);

1007 
˛õ¡_p‹t
 = 
i
;

1010 
löe_p‹t
 = 
	`WTI_FÀxmuxLöeP‹tIndexGë
 (
i
, 0);

1012 
	`mem£t
 (&
u„_löe_∑øms
, 0,  (
WT_u„_löe_sdh_∑øms
));

1013 
u„_löe_∑øms
.
å™s„r_ty≥
 = 
löe_cfg
->transfer_type;

1014 
u„_löe_∑øms
.
°m4
 = 
löe_cfg
->stm4;

1015 
u„_löe_∑øms
.
°m1
 = 
löe_cfg
->stm1;

1016 
u„_löe_∑øms
.
°m0
 = 
löe_cfg
->stm0;

1017 
u„_löe_∑øms
.
tug2
 = 
löe_cfg
->tug2;

1018 
u„_löe_∑øms
.
tu
 = 
löe_cfg
->tu;

1019 
u„_löe_∑øms
.
˛ock_ªc_löe_∑øms
 = &
löe_¸_∑øms
;

1020 
u„_löe_∑øms
.
˛ock_ªc_löe_∑øms
->
tx_˛k_ªc_íabÀ
 = 0;

1022 i‡(
löe_cfg
->
å™s„r_ty≥
 =
WUFE_SDH_TYPE_T1
)

1023 
c⁄n_ty≥
 = 
WT_FLEXMUX_CONNECTION_TYPE_T1_FRAMED
;

1025 
c⁄n_ty≥
 = 
WT_FLEXMUX_CONNECTION_TYPE_E1_FRAMED
;

1028 
	`WTI_FÀxmuxC⁄√˘i⁄Cª©e
 (0, 
löe_p‹t
, 
˛õ¡_p‹t
,

1029 
c⁄n_ty≥
, &
u„_löe_∑øms
);

1037 ++
löe_cfg
->
tu
;

1039 i‡((
löe_cfg
->
tu
 % 
NUM_TU
) == 0)

1041 
löe_cfg
->
tu
 = 0;

1042 ++
löe_cfg
->
tug2
;

1044 i‡((
löe_cfg
->
tug2
 % 7) == 0)

1046 
löe_cfg
->
tug2
 = 0;

1047 ++
löe_cfg
->
°m0
;

1049 i‡((
löe_cfg
->
°m0
 % 3) == 0)

1051 
löe_cfg
->
°m0
 = 0;

1052 ++
löe_cfg
->
°m1
;

1058 
i
 = 
WT_FIRST_LINE_INDEX
; i < (
num_of_löes
 + WT_FIRST_LINE_INDEX);

1059 ++
i
)

1061 
u„_°©us
 = 
	`WUFE_PhyCª©e
 (&
u„4_≠p_sy°em
.
phy_h™dÀ
[
i
],

1062 
u„4_≠p_sy°em
.
löe_h™dÀ
[
i
],

1063 &
u„4_phy_cfg
, 
WUFE_FULL_DUPLEX
);

1064 
	`WT_U„Tîmö©eOnEº‹
 (
u„_°©us
, "WUFE_PhyCª©e", 
i
, 
__LINE__
);

1068 
	`Aµ_IMADevi˚sCª©e
 ();

1069 
	}
}

1081 
	$Aµ_ImaSëup
 ()

1083 
WP_U32
 
ii
 = 0;

1084 
WP_U32
 
ex≥˘ed_group_›
, 
a˘uÆ_group_›
;

1085 
WP_U16
 
¥ev_gΩ_°©e
[
NUM_OF_GROUPS
];

1086 
WP_U16
 
¥ev_„_gΩ_°©e
[
NUM_OF_GROUPS
];

1087 
WP_U32
 
i
, 
x
, 
j
;

1090 
WP_ima_group_°©e_öfo
 
group_°©e
[
NUM_OF_GROUPS
];

1093 
ii
 = 0; iò< 
NUM_OF_GROUPS
; ii++)

1095 
ima_group
.
group_Æloc
 = &group_Æloc[
ii
];

1096 
ima_group_h™dÀ
[
ii
] =

1097 
	`WP_ImaGroupCª©e
 (
ima_sys_h™dÀ
, &
ima_group
);

1098 
	`Aµ_Tîmö©eOnEº‹
 (
ima_group_h™dÀ
[
ii
], "WP_ImaGroupCreate()");

1101 
°©us
 = 
	`WP_ImaGroupSèπup
 (
ima_group_h™dÀ
[
ii
]);

1102 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_ImaGroupStartup()");

1104 
j
 = 0;

1107 
j
 = (1 << 
WP_IMA_EVENT_TTS
) |

1108 (1 << 
WP_IMA_EVENT_TOS
) |

1109 (1 << 
WP_IMA_EVENT_TXQEMPTY
) |

1110 (1 << 
WP_IMA_EVENT_TXQFULL
) |

1111 (1 << 
WP_IMA_EVENT_GSU_LASR_RX
Ë| (1 << 
WP_IMA_EVENT_GSU_LASR_TX
);

1113 
	`¥ötf
 ("TEst\n");

1114 
°©us
 = 
	`WP_ImaGroupEvítE«bÀ
 (
ima_group_h™dÀ
[
ii
], 
j
);

1115 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_ImaGroupEventEnable()");

1120 
	`Aµ_E«bÀUFESy°em
 ();

1122 
ii
 = 0; iò< 
NUM_OF_GROUPS
; ii++)

1124 
ima_lök_h™dÀ
[2 * 
ii
] = 
	`WP_ImaLökAdd
 (
ima_group_h™dÀ
[ii],

1125 
h_dev_ima
[2 * 
ii
],

1126 
h_dev_ima
[2 * 
ii
],

1127 
ima_lök
);

1128 
	`Aµ_Tîmö©eOnEº‹
 (
ima_lök_h™dÀ
[2 * 
ii
], "WP_ImaLinkAdd()");

1130 
ima_lök_h™dÀ
[2 * 
ii
 + 1] = 
	`WP_ImaLökAdd
 (
ima_group_h™dÀ
[ii],

1131 
h_dev_ima
[2 * 
ii
 + 1],

1132 
h_dev_ima
[2 * 
ii
 + 1],

1133 
ima_lök
);

1134 
	`Aµ_Tîmö©eOnEº‹
 (
ima_lök_h™dÀ
[2 * 
ii
 + 1],

1138 
	`WP_Dñay
 (10000);

1142 
ex≥˘ed_group_›
 = 0;

1143 
i
 = 0; i < 
NUM_OF_GROUPS
; i++)

1145 
group_°©e
[
i
].
√_°©e
 = 
WP_IMA_GSM_START_UP
;

1146 
group_°©e
[
i
].
„_°©e
 = 
WP_IMA_GSM_START_UP
;

1147 
ex≥˘ed_group_›
 |0x80000000 >> 
i
;

1150 
i
 = 0; i < 
NUM_OF_GROUPS
; i++)

1152 
¥ev_gΩ_°©e
[
i
] = 
WP_IMA_GSM_START_UP
;

1153 
¥ev_„_gΩ_°©e
[
i
] = 
WP_IMA_GSM_START_UP
;

1157 
a˘uÆ_group_›
 = 0;

1158 
x
 = 0;

1160 #i‡
STARTUP_LOOP_UFE


1161 
	`WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkE«bÀDìpSy°em
 (0, 0, 0);

1163 
	`¥ötf
 ("set deep systemÜoopÇow, on UFEÖort #1\n");

1164 
	`WP_Dñay
 (1000000);

1166 
ex≥˘ed_group_›
 !
a˘uÆ_group_›
)

1169 i‡(
ticks
 > 
	`SECONDS
 (20))

1172 
	`¥ötf
 ("Test Abort: Group Not Operational, check cable.\n");

1173 
	`¥ötf
 ("Test Failed\n");

1178 
	`di•œy_evíts
 ();

1180 
i
 = 0; i < 
NUM_OF_GROUPS
; i++)

1182 
°©us
 = 
	`WP_ImaGroupSèã
 (
ima_group_h™dÀ
[
i
], &
group_°©e
[i]);

1183 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_ImaGroupState()");

1184 
	`¥ötf
 ("group_°©e[i].√_°©e=%d\n", 
group_°©e
[
i
].
√_°©e
);

1185 i‡(
¥ev_gΩ_°©e
[
i
] !
group_°©e
[i].
√_°©e
)

1187 
¥ev_gΩ_°©e
[
i
] = 
group_°©e
[i].
√_°©e
;

1188 i‡(
group_°©e
[
i
].
√_°©e
 =
WP_IMA_GSM_OPERATIONAL
)

1189 
a˘uÆ_group_›
 |0x80000000 >> 
i
;

1193 
	}
}

1214 
	$Aµ_ImaGroupEvít
 ()

1216 
WP_U32
 
ii
 = 0;

1217 
WP_U32
 
evít
 = 0;

1219 
ii
 = 0; 
evít_èbÀ
[ii].
evít
 !
NULL
; ii++)

1220 
evít
 |(1 << 
evít_èbÀ
[
ii
].
shi·
);

1222 
ii
 = 0; iò< 
NUM_OF_GROUPS
; ii++)

1224 
°©us
 = 
	`WP_ImaGroupEvítE«bÀ
 (
ima_group_h™dÀ
[
ii
], 
evít
);

1225 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_ImaGroupEventEnable()");

1227 
	}
}

1238 
	$Aµ_Ch™√lsCª©e
 ()

1241 
h_íë1_rx
 = 
	`WP_Ch™√lCª©e
 (
èg_íë1_rx
, 
h_devi˚_íë1
,

1242 
h_qnode_iwq
, 
WP_CH_RX
, 
WP_ENET
,

1243 &
ch_íë_cfg
);

1244 
	`Aµ_Tîmö©eOnEº‹
 (
h_íë1_rx
, "WP_ChannelCreate() Enet Rx");

1247 
ch_íë_cfg
.
iwmode
 = 
WP_PKTCH_IWM_DISABLE
;

1248 
h_íë1_tx
 = 
	`WP_Ch™√lCª©e
 (
èg_íë1_tx
++, 
h_devi˚_íë1
,

1249 
h_qnode_iwq
, 
WP_CH_TX
, 
WP_ENET
,

1250 &
ch_íë_cfg
);

1251 
	`Aµ_Tîmö©eOnEº‹
 (
h_íë1_tx
, "WP_ChannelCreate() Enet Tx");

1253 
tx_bödög_cfg
.
dci_mode
 = 
WP_IW_DYN_CH_INSERT_ENABLE
;

1254 
°©us
 =

1255 
	`WP_IwTxBödögCª©e
 (
h_íë1_tx
, 
WP_IW_TX_BINDING
, &
tx_bödög_cfg
);

1256 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_IwTxBindingCreate()");

1259 
ch_íë_cfg
.
iwmode
 = 
WP_PKTCH_IWM_DISABLE
;

1260 
h_íë2_rx
 = 
	`WP_Ch™√lCª©e
 (
èg_íë2_rx
, 
h_devi˚_íë2
,

1261 
h_qnode_iwq
, 
WP_CH_RX
, 
WP_ENET
,

1262 &
ch_íë_cfg
);

1263 
	`Aµ_Tîmö©eOnEº‹
 (
h_íë2_rx
, "WP_ChannelCreate() Enet Rx");

1265 
ch_íë_cfg
.
iwmode
 = 
WP_PKTCH_IWM_ENABLE
;

1266 
h_íë2_tx
 = 
	`WP_Ch™√lCª©e
 (
èg_íë2_tx
, 
h_devi˚_íë2
,

1267 
h_qnode_iwq
, 
WP_CH_TX
, 
WP_ENET
,

1268 &
ch_íë_cfg
);

1269 
	`Aµ_Tîmö©eOnEº‹
 (
h_íë2_tx
, "WP_ChannelCreate() Enet Tx");

1271 
tx_bödög_cfg
.
dci_mode
 = 
WP_IW_DYN_CH_INSERT_ENABLE
;

1272 
°©us
 =

1273 
	`WP_IwTxBödögCª©e
 (
h_íë2_tx
, 
WP_IW_TX_BINDING
, &
tx_bödög_cfg
);

1274 
	`Aµ_Tîmö©eOnEº‹
 (
h_íë2_tx
, "WP_IwTxBindingCreate()");

1277 
tx_bödög_cfg
.
dci_mode
 = 
WP_IW_DYN_CH_INSERT_DISABLE
;

1278 
ch_iw_rx_cfg
.
tx_bödög_c⁄fig
 = &
tx_bödög_cfg
;

1279 
h_bridge1_iwho°
 = 
	`WP_Ch™√lCª©e
 (
èg_iwho°_rx1
,

1280 
h_dev_iwho°
,

1281 
h_qnode_iwq
,

1282 
WP_CH_RX
,

1283 
WP_IW_HOST
, &
ch_iw_rx_cfg
);

1284 
	`Aµ_Tîmö©eOnEº‹
 (
h_bridge1_iwho°
,

1287 
h_bridge2_iwho°
 = 
	`WP_Ch™√lCª©e
 (
èg_iwho°_rx2
,

1288 
h_dev_iwho°
,

1289 
h_qnode_iwq
,

1290 
WP_CH_RX
,

1291 
WP_IW_HOST
, &
ch_iw_rx_cfg
);

1292 
	`Aµ_Tîmö©eOnEº‹
 (
h_bridge2_iwho°
, "WP_ChannelCreate() Host Rx 2");

1293 
	}
}

1305 
	$Aµ_ImaCh™√lsCª©e
 ()

1307 
WP_U32
 
ii
 = 0;

1309 
iw_ch_Øl5_cfg
[0].
iwmode
 = 
WP_ATMCH_IWM_ENABLE
;

1310 
ii
 = 0; iò< 
MAX_ATM_TX_CHANNEL
; ii++)

1312 
iw_ch_Øl5_cfg
[0].
tx_tq
 = 
ii
;

1313 
ima_tx_ch_h™dÀ
[
ii
] =

1314 
	`WP_Ch™√lCª©e
 (0, 
ima_group_h™dÀ
[0], 
ima_qn
, 
WP_CH_TX
,

1315 
WP_ATM_AAL5
, &
iw_ch_Øl5_cfg
[0]);

1316 
	`Aµ_Tîmö©eOnEº‹
 (
ima_tx_ch_h™dÀ
[
ii
],

1320 
°©us
 =

1321 
	`WP_IwTxBödögCª©e
 (
ima_tx_ch_h™dÀ
[
ii
], 
WP_IW_TX_BINDING
,

1322 &
tx_bödög_cfg
);

1323 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_IwTxBindingCreate()");

1326 
ii
 = 0; iò< 
NUM_OF_GROUPS
; ii++)

1329 
ima_rx_ch_h™dÀ
[
ii
] = 
	`WP_Ch™√lCª©e
 (0, 
ima_group_h™dÀ
[ii],

1330 
h_qnode_ho°
, 
WP_CH_RX
,

1331 
WP_ATM_AAL5
,

1332 &
iw_ch_Øl5_cfg
[0]);

1333 
	`Aµ_Tîmö©eOnEº‹
 (
ima_rx_ch_h™dÀ
[
ii
],

1336 
	}
}

1347 
	$Aµ_E«bÀUFESy°em
 ()

1350 
WP_U32
 
i
;

1351 
WUFE_°©us
 
u„_°©us
;

1353 
u„_°©us
 =

1354 
	`WUFE_Sy°emE«bÀ
 (
u„4_≠p_sy°em
.
u„id
, 
WUFE_SYS_EMPHY
,

1355 
WUFE_FULL_DUPLEX
);

1356 
	`WT_U„Tîmö©eOnEº‹
 (
u„_°©us
, "WUFE_Sy°emE«bÀ ", 0, 
__LINE__
);

1358 
i
 = 0; i < 
WT_MAX_LINE_INDEX
; i++)

1360 
u„_°©us
 =

1361 
	`WUFE_LöeE«bÀ
 (
u„4_≠p_sy°em
.
löe_h™dÀ
[
i
],

1362 
WUFE_FULL_DUPLEX
);

1363 
	`WT_U„Tîmö©eOnEº‹
 (
u„_°©us
, "SDH WUFE_LöeE«bÀ", 
i
,

1364 
__LINE__
);

1366 
u„_°©us
 =

1367 
	`WUFE_PhyE«bÀ
 (
u„4_≠p_sy°em
.
phy_h™dÀ
[
i
], 
WUFE_FULL_DUPLEX
);

1368 
	`WT_U„Tîmö©eOnEº‹
 (
u„_°©us
, "WUFE_PhyEnable() UFE4", 0,

1369 
__LINE__
);

1372 
	}
}

1381 
	$Aµ_P‹tsDevi˚sE«bÀ
 ()

1385 
°©us
 = 
	`WP_P‹tE«bÀ
 (
h_p‹t_íë1
, 
WP_DIRECTION_DUPLEX
);

1386 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_PortEnable() Enet1");

1388 
°©us
 = 
	`WP_Devi˚E«bÀ
 (
h_devi˚_íë1
, 
WP_DIRECTION_DUPLEX
);

1389 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_DeviceEnable() Enet1");

1391 
°©us
 = 
	`WP_P‹tE«bÀ
 (
h_p‹t_íë2
, 
WP_DIRECTION_DUPLEX
);

1392 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_PortEnable() Enet2");

1394 
°©us
 = 
	`WP_Devi˚E«bÀ
 (
h_devi˚_íë2
, 
WP_DIRECTION_DUPLEX
);

1395 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_DeviceEnable() Enet2");

1397 
	}
}

1407 
	$Aµ_IMADevi˚sE«bÀ
 ()

1409 
WP_U32
 
ii
;

1411 
ii
 = 0; iò< 
APP_MAX_IMA_DEVICE
; ii++)

1414 
°©us
 = 
	`WP_Devi˚E«bÀ
 (
h_dev_ima
[
ii
], 
WP_DIRECTION_DUPLEX
);

1415 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_DeviceEnable()");

1418 
	}
}

1429 
	$Aµ_íabÀEmphyP‹t
 ()

1432 
°©us
 = 
	`WP_P‹tE«bÀ
 (
emphy_p‹t
, 
WP_DIRECTION_DUPLEX
);

1433 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_PortEnable()Émphy_port");

1434 
	}
}

1443 
	$Aµ_Ch™√lsE«bÀ
 ()

1445 
WP_U32
 
ii
;

1447 
°©us
 = 
	`WP_Ch™√lE«bÀ
 (
h_íë1_rx
);

1448 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_ChannelEnable ENET1 RX");

1450 
°©us
 = 
	`WP_Ch™√lE«bÀ
 (
h_íë1_tx
);

1451 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_ChannelEnable ENET1 TX");

1453 
°©us
 = 
	`WP_Ch™√lE«bÀ
 (
h_íë2_rx
);

1454 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_ChannelEnable ENET2 RX");

1456 
°©us
 = 
	`WP_Ch™√lE«bÀ
 (
h_íë2_tx
);

1457 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_ChannelEnable ENET2 TX");

1459 
ii
 = 0; iò< 
MAX_ATM_TX_CHANNEL
; ii++)

1461 
°©us
 = 
	`WP_Ch™√lE«bÀ
 (
ima_tx_ch_h™dÀ
[
ii
]);

1462 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_ChannelEnable IMA ATM TX");

1465 
ii
 = 0; iò< 
NUM_OF_GROUPS
; ii++)

1467 
°©us
 = 
	`WP_Ch™√lE«bÀ
 (
ima_rx_ch_h™dÀ
[
ii
]);

1468 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, "WP_ChannelEnable IMA ATM RX");

1471 
	}
}

1488 
	$Aµ_Cª©eE√tU„IwSy°em
 ()

1490 
WP_U32
 
ii
 = 0;

1491 
WP_°©us
 
°©us
;

1492 
WP_dfc_Êow_öfo
 
dfc_Êow_öfo
;

1493 
WP_Êow_˛ass_ruÀ
 
Êow_˛ass_ruÀ
;

1494 
WP_CHAR
 
ruÀ_°rög
[128];

1495 
WP_˛assifiˇti⁄_fûãr
 
˛assifiˇti⁄_fûãr
 = { 0 };

1496 
WP_Êow_˛ass_f‹w¨dög_a˘i⁄
 
f‹w¨dög_a˘i⁄
;

1497 
WP_iw_agg_bridgög
 
iw_agg_bridgög_cfg
;

1498 
WP_U32
 
m∂s_œbñ_vÆue
 = 0;

1501 
iw_sys_bridge
.
èg
 = 
èg_iw_sys_bridge1
;

1502 
h_iw_sys_bridge1
 = 
	`WP_IwSy°emCª©e
 (
APP_MASTER_WPID
,

1503 
WP_IW_TRANS_BRIDGING_MODE
,

1504 &
iw_sys_bridge
);

1505 
	`Aµ_Tîmö©eOnEº‹
 (
h_iw_sys_bridge1
, " WP_IwSystemCreate() Bridge1");

1508 
˛assifiˇti⁄_fûãr
.
fõlds_mask
 = 
WP_FIELD_IDS_ARRAY
;

1509 
˛assifiˇti⁄_fûãr
.
no_m©ch_a˘i⁄
 = 
WP_CLASS_FILTER_NO_MATCH_DENY
;

1512 
˛assifiˇti⁄_fûãr
.
fõld_ids_¨øy
[0] = 
WP_FIELD_ID_MPLS_LABEL1
;

1513 
˛assifiˇti⁄_fûãr
.
fõld_ids_¨øy
[1] = 
WP_FIELD_ID_LAST
;

1514 
˛assifiˇti⁄_fûãr
.
fûãr_ty≥
 = 
WP_CLASS_FILTER_EMC
;

1516 
h_bridge1_fûãr
[0] =

1517 
	`WP_IwCœssFûãrAdd
 (
h_iw_sys_bridge1
, &
˛assifiˇti⁄_fûãr
);

1518 
	`Aµ_Tîmö©eOnEº‹
 (
h_bridge1_fûãr
[0],

1521 
	`mem˝y
 (&
iw_agg_bridgög_cfg
, &
deÁu…_iw_agg_bridgög_cfg
,

1522  (
WP_iw_agg_bridgög
));

1525 
iw_agg_bridgög_cfg
.
èg
 = 
èg_agg_deÁu…_bridge1
;

1526 
iw_agg_bridgög_cfg
.
txfunc
 = 
h_bridge1_iwho°
;

1527 
iw_agg_bridgög_cfg
.
öput_bp‹t
 = 0;

1528 
iw_agg_bridgög_cfg
.
ötmode
 = 
WP_IW_INT_ENABLE
;

1530 
h_bridge1_deÁu…_agg
 = 
	`WP_IwFlowAggªg©i⁄Cª©e
 (
APP_MASTER_WPID
,

1531 
WP_IW_TRANS_BRIDGING_MODE
,

1532 &
iw_agg_bridgög_cfg
);

1533 
	`Aµ_Tîmö©eOnEº‹
 (
h_bridge1_deÁu…_agg
,

1535 
iw_agg_bridgög_cfg
.
ötmode
 = 
WP_IW_INT_DISABLE
;

1537 
bridge_p‹t_cfg
.
èg
 = 
èg_bp‹t_íë1
;

1538 
bridge_p‹t_cfg
.
Êow_agg
 = 
h_bridge1_deÁu…_agg
;

1539 
bridge_p‹t_cfg
.
öput_fûãrs_mask
 = 0x80000000;

1540 
h_bridge1_bp‹t_íë1
 = 
	`WP_IwP‹tCª©e
 (
h_iw_sys_bridge1
,

1541 &
bridge_p‹t_cfg
);

1542 
	`Aµ_Tîmö©eOnEº‹
 (
h_bridge1_bp‹t_íë1
, "WP_IwPortCreate()ENET1");

1545 
rx_bödög_bridgög_cfg
.
öput_p‹t
 = 
h_bridge1_bp‹t_íë1
;

1546 
°©us
 = 
	`WP_IwRxBödögCª©e
 (
h_íë1_rx
,

1547 
h_iw_sys_bridge1
,

1548 
h_qnode_iwq
, &
rx_bödög_bridgög_cfg
);

1549 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, " WP_IwRxBindingCreate()Énet1 ");

1552 
bridge_p‹t_cfg
.
èg
 = 
èg_bridge1_bp‹t_ima
;

1553 
bridge_p‹t_cfg
.
Êow_agg
 = 
h_bridge1_deÁu…_agg
;

1554 
bridge_p‹t_cfg
.
max_mac_addªs£s
 = 
APP_MAX_MAC_ADDRESS
;

1555 
bridge_p‹t_cfg
.
öput_fûãrs_mask
 = 0;

1556 
bridge_p‹t_cfg
.
˛assifiˇti⁄_Êag
 =

1557 
WP_IW_IWPORT_CLASSIFICATION_DISABLED
;

1558 
h_bridge1_bp‹t_ima
 =

1559 
	`WP_IwP‹tCª©e
 (
h_iw_sys_bridge1
, &
bridge_p‹t_cfg
);

1560 
	`Aµ_Tîmö©eOnEº‹
 (
h_bridge1_bp‹t_ima
, "WP_IwPortCreate() IMA");

1562 
	`mem˝y
 (&
iw_agg_bridgög_cfg
, &
deÁu…_iw_agg_bridgög_cfg
,

1563  (
WP_iw_agg_bridgög
));

1564 
iw_agg_bridgög_cfg
.
iw_p‹t
 = 
h_bridge1_bp‹t_ima
;

1565 
iw_agg_bridgög_cfg
.
exåa˘i⁄_Àngth
 = 18;

1566 
iw_agg_bridgög_cfg
.
¥efix_Àngth
 = 0;

1567 
iw_agg_bridgög_cfg
.
ötmode
 = 0;

1569 
ii
 = 0; iò< 
MAX_ATM_TX_CHANNEL
; ii++)

1571 
iw_agg_bridgög_cfg
.
txfunc
 = 
ima_tx_ch_h™dÀ
[
ii
];

1572 
h_Êow_agg_å™s_bridge_egªss
[
ii
] =

1573 
	`WP_IwFlowAggªg©i⁄Cª©e
 (
APP_MASTER_WPID
,

1574 
WP_IW_TRANS_BRIDGING_MODE
,

1575 &
iw_agg_bridgög_cfg
);

1576 
	`Aµ_Tîmö©eOnEº‹
 (
h_Êow_agg_å™s_bridge_egªss
[
ii
],

1581 
	`mem£t
 (&
Êow_˛ass_ruÀ
, 0,  (
WP_Êow_˛ass_ruÀ
));

1583 
dfc_Êow_öfo
.
fûãr_h™dÀ
 = 
h_bridge1_fûãr
[0];

1584 
dfc_Êow_öfo
.
öput_p‹t
 = 
h_bridge1_bp‹t_íë1
;

1585 
dfc_Êow_öfo
.
ouçut_p‹t
 = 0;

1587 
ii
 = 0; iò< 
MAX_ATM_TX_CHANNEL
; ii++)

1589 
f‹w¨dög_a˘i⁄
.
Êow_aggªg©i⁄
 =

1590 
h_Êow_agg_å™s_bridge_egªss
[
ii
];

1592 
m∂s_œbñ_vÆue
 = 19 + 
ii
;

1593 
	`•rötf
 (
ruÀ_°rög
,

1595 
m∂s_œbñ_vÆue
);

1598 
Êow_˛ass_ruÀ
.
m©ch_a˘i⁄
 = 
WP_FLOW_CLASS_MODE_FLOW_AGG
;

1599 
Êow_˛ass_ruÀ
.
a˘i⁄_öfo
.
f‹w¨dög_a˘i⁄
 = forwarding_action;

1600 
Êow_˛ass_ruÀ
.
˛assifõr_°rög
 = 
ruÀ_°rög
;

1601 
Êow_˛ass_ruÀ
.
dfc_öfo
 = &
dfc_Êow_öfo
;

1603 
h_bridge1_dfcÊow1
[
ii
] =

1604 
	`WP_IwFlowAdd
 (
h_iw_sys_bridge1
, 
WP_FLOW_CLASS_RULE
,

1605 &
Êow_˛ass_ruÀ
);

1606 
	`Aµ_Tîmö©eOnEº‹
 (
h_bridge1_dfcÊow1
[
ii
],

1610 
°©us
 = 
	`WP_IwSy°emBuûd
 (
h_iw_sys_bridge1
);

1611 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, " WP_IwSystemBuild() Bridge1");

1612 
	}
}

1624 
	$Aµ_Cª©eU„E√tIwSy°em
 ()

1626 
WP_U32
 
ii
 = 0, 
jj
 = 0;

1627 
WP_°©us
 
°©us
;

1628 
WP_U8
 
dummy_¥efix_hódî
[18];

1631 
jj
 = 0; jj < 12; jj++)

1633 
dummy_¥efix_hódî
[
jj
] = jj;

1635 
dummy_¥efix_hódî
[12] = 0x88;

1636 
dummy_¥efix_hódî
[13] = 0x47;

1638 
dummy_¥efix_hódî
[14] = 0x00;

1639 
dummy_¥efix_hódî
[15] = 0x01;

1640 
dummy_¥efix_hódî
[16] = 0x31;

1641 
dummy_¥efix_hódî
[17] = 0x64;

1644 
h_iw_sys_dúe˘m≠
 =

1645 
	`WP_IwSy°emCª©e
 (
	`WP_WINPATH
 (0), 
WP_IW_DIRECTMAP_MODE
,

1646 &
iw_sys_dúe˘m≠_cfg
);

1647 
	`Aµ_Tîmö©eOnEº‹
 (
h_iw_sys_dúe˘m≠
,

1651 
pwe3_©m_Êow_agg_c⁄fig
->
dúe˘i⁄
 = 
WP_PWE3_INGRESS
;

1652 
pwe3_©m_Êow_agg_c⁄fig
->
txfunc
 = 
h_íë2_tx
;

1653 
pwe3_©m_Êow_agg_c⁄fig
->
¥efix_Àngth
 = 18;

1655 
	`mem˝y
 (
pwe3_©m_Êow_agg_c⁄fig
->
¥efix_hódî
, 
dummy_¥efix_hódî
,

1657 
h_Êow_agg_pwe3_©m_ögªss
[0] =

1658 
	`WP_IwFlowAggªg©i⁄Cª©e
 (
APP_MASTER_WPID
, 
WP_IW_PWE3_MODE
,

1659 
pwe3_©m_Êow_agg_c⁄fig
);

1660 
	`Aµ_Tîmö©eOnEº‹
 (
h_Êow_agg_pwe3_©m_ögªss
[0],

1663 
rx_bödög_dúe˘m≠_cfg
.
deÁu…_aggªg©i⁄
 =

1664 
h_Êow_agg_pwe3_©m_ögªss
[0];

1665 
ii
 = 0; iò< 
NUM_OF_GROUPS
; ii++)

1667 
°©us
 = 
	`WP_IwRxBödögCª©e
 (
ima_rx_ch_h™dÀ
[
ii
],

1668 
h_iw_sys_dúe˘m≠
,

1669 
ima_qn
, &
rx_bödög_dúe˘m≠_cfg
);

1670 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
,

1674 
°©us
 = 
	`WP_IwSy°emBuûd
 (
h_iw_sys_dúe˘m≠
);

1675 
	`Aµ_Tîmö©eOnEº‹
 (
°©us
, " WP_IwSystemBuild() DirectMap");

1676 
	}
}

1686 
	$Aµ_≥rf‹m_‰ìrun
 ()

1688 
WP_°©us
 
ªsu…
;

1689 
WP_U32
 
i
;

1692 
i
 = 0; i < 
APP_MAX_PKTS_NUM
; i++)

1694 
	`Aµ_D©aSíd
 (
h_íë1_tx
, 
h_poﬁ_buf„r_iw
);

1697 
	`WP_Dñay
 (5000000);

1699 
	`Aµ_CheckSèts
 (&
ªsu…
);

1701 i‡(
ªsu…
 =
WP_OK
)

1703 
	`¥ötf
 ("Test Passed!\n");

1707 
	`¥ötf
 ("Test Failed!\n");

1710 
	`¥ötf
 ("This isÅheÜastÅest case inÅhisápplication!\n");

1711 
	`¥ötf
 ("ThisÅest case DO NOTÇeed further manuallyÅest!\n");

1712 #ifde‡
WPI_APP_REBOOT


1714 
	`Aµ_Quô
 (1);

1716 
	`Aµ_Quô
 (0);

1719 
	}
}

	@atm_ima_ufe.h

14 #i‚de‡
WTI_ATM_IMA_H


15 
	#WTI_ATM_IMA_H


	)

18 
	#BOARD_WP3


	)

20 
	#IMA_DEBUG
 0

	)

21 
	#APP_DEBUG
 0

	)

23 
	#APP_VLAN_ID
 0xa

	)

24 
	#APP_MAX_MAC_ADDRESS
 10

	)

26 
	#APP_MAX_PKTS_NUM
 3

	)

27 
	#STARTUP_LOOP_UFE
 (1)

	)

31 
	#APP_MAX_BPORTS
 10

	)

32 
	#APP_NUM_IW_BUFFERS
 65535

	)

33 
	#APP_IW_BUFFER_SIZE
 1984

	)

34 
	#APP_IW_BUFFER_OFFSET
 64

	)

35 
	#APP_MASTER_WPID
 
	`WP_WINPATH
(0)

	)

36 
	#APP_PORT_INGRESS
 
WP_PORT_ENET13


	)

37 
	#APP_PORT_EGRESS
 
WP_PORT_ENET14


	)

41 
	#NUM_OF_GROUPS
 1

	)

43 
	#NUM_OF_LINKS
 2

	)

45 
	#NUM_OF_LINKS
 8

	)

47 
	#MIN_NUM_OF_LINKS
 1

	)

48 
	#PQBLOCK_SIZE
 2

	)

50 
	#NUM_OF_CH_IN_GROUP
 2

	)

52 
	#NUM_OF_CH_IN_GROUP
 8

	)

54 
	#NUM_OF_SWCH
 (
NUM_OF_CH_IN_GROUP
*
NUM_OF_GROUPS
)

	)

55 
	#MAX_ATM_TX_CHANNEL
 (
NUM_OF_CH_IN_GROUP
*
NUM_OF_GROUPS
)

	)

56 
	#MAX_ATM_RX_CHANNEL
 (
NUM_OF_CH_IN_GROUP
*
NUM_OF_GROUPS
)

	)

57 
	#RATE_TABLE_SLOTS
 10

	)

58 
	#VP_PER_IMA_GROUP
 1

	)

59 
	#APP_MAX_TDM_PORTS
 
NUM_OF_LINKS


	)

60 
	#MAX_CPS_SDU
 45

	)

61 
	#MAX_SSSAR_SDU
 1500

	)

62 
	#MIN_AAL2_CID_VALUE
 1

	)

63 
	#MAX_AAL2_CID_VALUE
 255

	)

64 
	#APP_MPLS_SIZE
 4

	)

65 
	#PCR
 4000

	)

66 
	#MAX_CHANNEL_RATE
 (
NUM_OF_GROUPS
*
NUM_OF_LINKS
*
PCR
)

	)

68 
	#PHY_TYPE_T1
 0

	)

69 
	#PHY_TYPE_E1
 1

	)

70 #unde‡
PHY_TYPE_T1


72 
	#WTI_MAX_LINES
 252

73 

	)

74 
	#APP_EMPHY_PORT
 
WP_PORT_UPI1


	)

75 
	#APP_MAX_IMA_DEVICE
 (
NUM_OF_LINKS
 * 
NUM_OF_GROUPS
)

	)

77 
	#WTI_INITIALIZE_FIRMWARE
 1

	)

78 
	#WTI_TX_MAX_SDU
 8192

	)

79 
	#WTI_MAX_PW
 350

80 
	#WTI_EMPHY_PORT
 
WP_PORT_UPI1


	)

82 
	#WT_BRG_UPI1
 
WP_BRG3


	)

83 
	#WT_BRG_UPI2
 
WP_BRG1


	)

84 
	#N_MAX_OUT_OF_BAND_CAS_FLOWS
 2

	)

85 
	#WTI_MAX_ABS_PW
 
WTI_MAX_PW


	)

86 
	#WTI_MAX_NUM_EMPHY_PHYS
 
WTI_MAX_PW


	)

87 
	#WTI_SOCKET_LOOPBACK_MODE
 
WUFE_LINE_LOOPBACK_TYPE_NONE


	)

88 
	#WT_FIRST_LINE_INDEX
 0

	)

91 
	#N_MAX_UFE_SPE_INDEX
 
WUFE_MAX_N_CORE
*
WUFE_MAX_N_STM1
*
WUFE_MAX_N_SPE


	)

92 
	#MAX_UFE_LINES_USED
 1344

	)

93 
	#N_MAX_EMPHY_PHYS
 4032

	)

94 
	#WT_UFE_HANDLE_INVALID
 0xffffffff

	)

96 
	#WTI_MAX_LINES
 252

97 

	)

98 
	#MAX_UFE_LINES
 
WTI_MAX_LINES


	)

99 
	#OCTETS_PER_LINE
 28

	)

101 
	#WT_MAX_LINE_INDEX
 252

	)

103 
	#MAX_UFE_LINES_USED
 1344

	)

104 
	#MAX_CHANNELS
 
WTI_MAX_LINES
 * 2

	)

105 
	#WTI_MAX_DEVICE
 
WTI_MAX_LINES


	)

106 
	#WTI_MAX_TX_RX_CHANNEL
 
WTI_MAX_LINES


	)

108 
	#NUM_TU
 3

	)

111 
	#WTI_MAX_FLEXMUX_DEVICES_SUPPORTED_BY_DRIVER
 4

	)

112 
	#WTI_FLEXMUX_NUM_DEVICES
 1

	)

113 
	#WTI_MAX_LINE_PORTS_PER_FLEXMUX_DEVICE
 16

	)

115 
	#MAX_BANDWIDTH
 600000000

	)

118 
	#MAC_COPY
(
d
,
s
Ë{ 
_i
; \

119 
_i
=0;_i<6;_i++) \

120 *((
d
)+
_i
)=*((
s
)+_i); }

	)

122 
WP_U32
 
dps_ProgømImage
[];

123 
WP_U16
 
dps_PC_TabÀ_Inô
[];

126 
WP_c⁄ãxt
 
	gc⁄ãxt_cfg
 = { 6,

129 { 
WP_BUS_PARAM
, 
APP_BANK_PARAM
},

130 { 
WP_BUS_PACKET
, 
APP_BANK_PACKET
},

131 { 
WP_BUS_INTERNAL
, 
APP_BANK_INTERNAL
},

132 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

133 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

134 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

135 { 
WP_BUS_NONE
, 0},

136 { 
WP_BUS_NONE
, 0},

137 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

138 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

139 { 
WP_BUS_INTERNAL
, 
APP_BANK_INTERNAL
},

140 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

141 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

142 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

143 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

144 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

145 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

146 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

147 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

148 { 
WP_BUS_INTERNAL
, 
APP_BANK_INTERNAL
},

149 { 
WP_BUS_PACKET
, 
APP_BANK_PACKET
},

150 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

151 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

152 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

153 { 
WP_BUS_INTERNAL
, 
APP_BANK_INTERNAL
},

154 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

155 { 
WP_BUS_PARAM
, 
APP_BANK_PARAM
},

156 { 
WP_BUS_PACKET
, 
APP_BANK_PACKET
},

157 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

158 { 
WP_BUS_INTERNAL
, 
APP_BANK_INTERNAL
},

159 { 
WP_BUS_NONE
, 0},

160 { 
WP_BUS_NONE
, 0},

162 { 
WP_BUS_PACKET
, 
APP_BANK_PACKET
},

163 { 
WP_BUS_HOST
, 
APP_BANK_HOST
},

164 { 
WP_BUS_NONE
, 0},

165 { 
WP_BUS_PACKET
, 
APP_BANK_PACKET
},

166 { 
WP_BUS_NONE
, 0},

167 { 
WP_BUS_PACKET
, 
APP_BANK_PACKET
}

171 
dps_ProgømImage
, dps_ProgramImage},

173 
dps_PC_TabÀ_Inô
, dps_PC_Table_Init},

175 
NULL
,

181 
NULL
,

184 
NULL


187 
WP_öt_queue_èbÀ
 
	göt_queue_èbÀ_cfg
 = {

196 
WP_qnode_ho°q
 
	gqnode_ho°q_cfg
 = {

199  
WP_IRQT1


202 
WP_poﬁ_rög_d©a
 
	gpoﬁ_rög_d©a_cfg
 = {

205  
WP_BUS_PARAM
,

206  
APP_BANK_PARAM


209 
WP_poﬁ_buf„r_d©a
 
	gpoﬁ_buf„r_d©a_256_cfg
 = {

214  
WP_BUS_PACKET
,

215  
APP_BANK_PACKET
,

218 
WP_poﬁ_buf„r_d©a
 
	gpoﬁ_buf„r_d©a_iw_cfg
 = {

219  
APP_NUM_IW_BUFFERS
,

223  
WP_BUS_PACKET
,

224  
APP_BANK_PACKET


228 
WP_©m_globÆ
 
	g©m_globÆ_cfg
 = {

229  
MAX_CHANNELS
,

230  
MAX_CHANNELS
,

231  
NUM_OF_SWCH
,

235  
WP_BUS_NONE
,

237  {
WP_ATM_RAS_TIMESTAMP_DISABLE
, 
WP_AAL2_RX_3FE_DISABLE
},

238  
MAX_CHANNELS
,

243 
WP_vp_vc_block
 
	gvp_vc_ønge
[2] = {

245 
WP_VP_VC_BLOCK_TERM


248 
WP_tdm_bödög
 
	gt1_bödög
[] = {

252 
WP_p‹t_íë
 
	gp‹t_íë_cfg
 = {

261  
WP_FLOWMODE_FAST
,

263  
WP_ENET_SGMII_AN
,

265  
WP_ENET_1000_BASE_X_AN
,

267  
WP_IW_BKGND_NOT_USED
,

270 
WP_íë_fûãrs
 
	gíë_fûãrs_cfg
 = {

271  
WP_ENET_FILTER_PROCESS
,

272  
WP_ENET_FILTER_HOSTTERM
,

273  
WP_ENET_FILTER_HOSTTERM
,

276 
WP_devi˚_íë
 
	gdevi˚_íë_cfg
 = {

279  
WP_UNUSED
,

282  
WP_ENET_NORMAL
,

283  
NULL
,

286 
WP_pkt_sh≠ög_wfq
 
	gdeÁu…_pkt_sh≠ög_wfq_cfg
 = {

291 
WP_ch_íë
 
	gch_íë_cfg
 = {

292  
WP_PKTCH_INT_ENABLE
,

293  
WP_PKTCH_IWM_ENABLE
,

294  
WP_PKTCH_TEST_DISABLE
,

297  
WP_FMU_SHAPING_TYPE_STRICT
,

298  
NULL
,

300  
WP_CW_ID_A
,

305 
WP_ˇÀnd¨_whìl
 
	gcw_c⁄fig
[2] = {

307  
WP_CW_ASU
,

308  
WP_CW_ID_A
,

310  
MAX_CHANNEL_RATE


312 
WP_CALENDAR_WHEEL_TERM


315 
WP_iw_globÆ
 
	giw_globÆ_cfg
 = {

323  
NULL
,

327 
WP_IW_POLICER_ENABLE
,

328 
WP_IW_STATISTICS_BUNDLE_STAT_ENABLE
,

329 
WP_IW_L2_HEADER_EXTENSION_ENABLE
,

330 
WP_IW_ENHANCED_FLOW_STAT_ENABLE
,

331 
WP_IW_FLOW_STAT_ENABLE
,

332 
WP_IW_FR_TX_FLOW_STAT_DISABLE
,

334 
WP_IW_LEARNING_DISABLE
,

336 
WP_IW_PORT_FILTERING_ENABLE
,

344  
APP_MAX_BPORTS
,

354 
WP_tx_bödög
 
	gtx_bödög_cfg
 = {

356  
WP_IW_DYN_CH_INSERT_ENABLE
,

360 
WP_qnode_iwq
 
	gqnode_iwq_cfg
 = {

361  
WP_IRQT1
,

367 
WP_ch_iw_rx
 
	gch_iw_rx_cfg
 = {

372  
WP_IW_TX_BINDING
,

374  
NULL
,

377 
WP_rx_bödög_bridgög
 
	grx_bödög_bridgög_cfg
 = {

378  
WP_IW_VCMUX
,

384 
WP_iw_agg_bridgög
 
	gdeÁu…_iw_agg_bridgög_cfg
 = {

388  
WP_IW_RFCS_ENABLE
,

389  
WP_IW_L2H_INSERT_DISABLE
,

390  
WP_IW_VLAN_TAG_DISABLE
,

391  
WP_IW_IRQT1
,

392  
WP_IW_ERRPKT_DISCARD
,

393  
WP_IW_INT_ENABLE
,

394  
WP_IW_STAT_ENABLE
,

395  
WP_IW_TIME_STAMP_DISABLE
,

396  
WP_IW_OV_POOL_DISABLE
,

398  
WP_IW_REPLACE_VTAG_DISABLE
,

404  
WP_IW_POLICER_DISABLE
,

405  
NULL
,

406  
WP_IW_CONGESTION_DISABLE
,

407  
NULL
,

408  
WP_IW_FLOW_AGG_PRIMARY
,

410 
WP_IW_EXTERN_VLAN_NONE
,

413 
WP_IW_BC_PRIORITY_DISABLE
,

415 
WP_IW_MC_PRIORITY_DISABLE
,

417  
WP_IW_NOT_RESERVED
,

418  
WP_IW_OVERRIDE_INPORT
,

420  
WP_IW_MAC_REPLACE_DISABLED
,

427 
WP_dfc_sys_öfo
 
	gdfc_sys_öfo
 = {

428  
WP_IW_32K_HASH_ENTRIES
,

429  
WP_IW_PORT_FILTERING_ENABLE
,

430  
WP_IW_DENY_EQUAL_IP_DISABLE
,

433 
WP_iw_sys_bridgög
 
	giw_sys_bridge
 = {

437  
WP_IW_CLASSIFIER_BASED_BRIDGING
,

438  {
WP_IW_DYNAMIC_CLASS
, 100, 0, 
NULL
},

439  
WP_IW_BRIDGE_LEARNING_DISABLE
,

441 
WP_IW_IRQT1
,

443 
WP_LEARNING_INTENABLE
,

446  
WP_IW_32K_HASH_ENTRIES
,

447  
WP_IW_32K_HASH_ENTRIES
,

449  
APP_MAX_BPORTS
,

450  &
dfc_sys_öfo
,

451  
WP_IW_SVL_DISABLED
,

454 
WP_bridge_p‹t
 
	gbridge_p‹t_cfg
 = {

456  
WP_IW_DIRECT_MAP_DISABLE
,

458  
WP_IW_HOST_TERM_MODE
,

459  
WP_IW_LEARNING_DISABLE
,

460  
WP_IW_INGRESS_FILTER_DISABLE
,

462 
WP_IW_ACCEPT_TAGGED_UNTAGGED
,

466 
WP_IW_VLAN_PRIORITY_ENFORCE_DISABLED
,

468  
APP_MAX_MAC_ADDRESS
,

470  
WP_IW_GROUP_FILTER_DISABLE
,

476  
WP_IW_PORT_STAT_ENABLE
,

478  
WP_IW_IWPORT_CLASSIFICATION_ENABLED
,

481  
WP_IW_RES_MC_HT_ENABLE
,

484 
WP_iw_sys_dúe˘m≠
 
	giw_sys_dúe˘m≠_cfg
 = {

485  2 * 
APP_MAX_TDM_PORTS
,

489 
WP_iw_agg_dúe˘m≠
 
	giw_agg_dúe˘m≠_cfg
 = {

492  
WP_IW_RFCS_DISABLE
,

493  
WP_IW_L2H_INSERT_DISABLE
,

494  
WP_IW_IRQT1
,

495  
WP_IW_ERRPKT_DISCARD
,

496  
WP_IW_INT_DISABLE
,

497  
WP_IW_STAT_ENABLE
,

498  
WP_IW_TIME_STAMP_DISABLE
,

510  
NULL
,

512  
NULL


515 
WP_qnode_iwq
 
	gqn_iw_ima_cfg
 = {

522 
WP_U16
 
	gsh≠ög_èbÀ
[
RATE_TABLE_SLOTS
 + 1];

532 
WP_ima_group_Æloc
 
	ggroup_Æloc
[] = {

534  
WP_ATM_DEV_SHAPING_VC
,

536  
NULL
,

537  
WP_ATM_LOOKUP_HASH
,

538  
WP_ATM_EXT_PHY_STATS_DISABLE
,

542  
WP_ATM_DEV_SHAPING_VC
,

544  
NULL
,

545  
WP_ATM_LOOKUP_HASH
,

546  
WP_ATM_EXT_PHY_STATS_DISABLE
,

550 
WP_IMA_GROUP_ALLOC_TERM


554 
WP_ima_sy°em
 
	gima_sys_∑øms
 = {

555  {
MAX_CHANNELS
, MAX_CHANNELS, 0, 0, 0, 0},

556  
WP_PORT_UPI1
,

557  
NUM_OF_GROUPS
,

558  
WTI_MAX_LINES
,

562 (
MAX_BANDWIDTH
 | 
WP_IMA_MAX_BANDWIDTH
),

567  
vp_vc_ønge
,

568  
group_Æloc
,

570  
WP_IW_BKGND_NOT_USED
,

571  
WP_IRQT1


575 
WP_ima_group
 
	gima_group
 =

579  
WP_IMA_FRAME_SIZE_128
,

580  
WP_IMA_SYM_CFG_SYM_OP
,

581  
WP_IMA_VERSION_1_1
,

582  
WP_IMA_TX_CLOCK_CTC
,

583  
MIN_NUM_OF_LINKS
,

584  
MIN_NUM_OF_LINKS
,

588  
WP_IMA_E1_CELL_TIME
,

591  
vp_vc_ønge
,

592  &
group_Æloc
[0],

593 #ifde‡
_WP_MODULE_IMA_AR_ENABLE_


594  
WP_IMA_AUTO_RESTART_ENABLE
 | 
WP_IMA_FE_GID_LEARN
,

596  
WP_IMA_FE_GID_LEARN
,

602 
WP_ima_lök
 
	gima_lök
[1] = {

604  
WP_IMA_LINK_TX_RX
,

605  
WP_IMA_AUTO_LINK_ID
,

606  {
WP_IMA_NO_CHANGE
,

607 
WP_IMA_NO_CHANGE
,

608 
WP_IMA_NO_CHANGE
,

609 
WP_IMA_NO_CHANGE
,

610 
WP_IMA_NO_CHANGE
,

611 
WP_IMA_NO_CHANGE
},

615 
WP_©m_sh≠ög_unsh≠ed
 
	gunsh≠ed_sh≠ög_∑øm
 = {

619 
WP_©m_sh≠ög_p¸
 
	gØl5_sh≠ög_∑øm
 = {

626 
WP_ch_Øl5
 
	giw_ch_Øl5_cfg
[1] = {

630  
WP_ATMCH_INT_ENABLE
,

631  
WP_ATMCH_IWM_DISABLE
,

632  
WP_ATMCH_STAT_ENABLE
,

633  
WP_ATMCH_TEST_DISABLE
,

636  
WP_ATM_SHAPING_PCR
,

637  &
Øl5_sh≠ög_∑øm
,

640  
WP_ATMCH_UU_DISABLE
,

646  
WP_CW_ID_A
,

651 
WP_iw_agg_pwe3
 
	gpwe3_©m_Êow_agg_c⁄fig
[1] = {

656  
WP_DISABLE
,

657  
WP_IRQT3
,

658  
WP_ENABLE
,

659  
WP_IW_TIME_STAMP_DISABLE
,

660  
WP_IW_OV_POOL_DISABLE
,

663  
WP_IW_AGG_PRIMARY
,

665  
WP_PWE3_ATM_AAL5_SDU
,

666  
WP_PWE3_EGRESS
,

667  
WP_DISABLE
,

669  
WP_ENABLE
,

670  
WP_PWE3_REPLACE_NOTHING
,

674  
WP_DISABLE
,

678  (Ë
NULL
,

682  
WP_PWE3_INGRESS_NO_CELL_RELAY
,

683  
WP_PWE3_OAM_TRANPARENT
,

684  
WP_PWE3_EGRESS_LOOKUP_DISABLE
,

691 
WP_rx_bödög_dúe˘m≠
 
	grx_bödög_dúe˘m≠_cfg
 = {

699 
WP_p‹t_upi_emphy_ext
 
	gemphy_ext
 = {

701  
WP_EMPHY_ATM
,

703  
WTI_MAX_PW
,

705  
MAX_UFE_LINES_USED
,

709 
WP_p‹t_©m_limôs
 
	gu„4_©m_limôs
 = {

710  
MAX_CHANNELS
,

711  
MAX_CHANNELS
,

718  
MAX_UFE_LINES


721 
WP_p‹t_upi_©m_ext
 
	gu„4_©m_ext
 = {

723 
WP_UPI_IDLEDISC_ON
 | 
WP_ATM_EXT_PHY_STATS_ENABLE
,

725  &
u„4_©m_limôs
,

728  
WP_ATM_LOOKUP_HASH


731 
WP_p‹t_upi
 
	gupi_emphy_p‹t_c⁄fig
 = {

732  
WP_UPI_UFE4
,

733  
WP_UPI_NORMAL
,

735 
WP_UPI_MASTER
 |

736 
WP_UPI_SINGLE
 |

737 
WP_UPI_PRT_EVEN
 |

738 
WP_UPI_ROBIN
 |

739 
WP_TQ_SLOW_MODE
 |

740 
WP_TX_PRIORITY_4
 | 
WP_UPI_EMPHY2_13
 | 
WP_UPI_BUS_WIDTH_16
,

742 
WP_UPI_MASTER
 |

743 
WP_UPI_SINGLE
 |

744 
WP_UPI_PRT_EVEN
 |

745 
WP_UPI_ROBIN
 | 
WP_UPI_PRTCHK_OFF
 | 
WP_UPI_BUS_WIDTH_16
,

746  &
u„4_©m_ext
,

749  &
emphy_ext


752 
WP_devi˚_emphy_©m
 
	gu„_devi˚_cfg
[1] = {

756  
WP_ATM_DEV_SHAPING_VC
,

758  
NULL
,

763  
WP_EMPHY_ATM_NNI_MODE
,

764  
WP_EMPHY_IDLE_REGULAR
,

765  
WP_NO_LINE_ID


772 
WP_CHAR
 *
	mevít
;

773 
WP_U32
 
	mshi·
;

774 } 
	tevít_èbÀ_s
;

776 
evít_èbÀ_s
 
	gevít_èbÀ
[] = {

777 {"BW Ch™gê(0=dißbÀ, 1Û«bÀ): ", 
WP_IMA_EVENT_BANDWIDTH_CHANGE
},

778 {"TTS (0=dißbÀ, 1Û«bÀ): ", 
WP_IMA_EVENT_TTS
},

779 {"TOS (0=dißbÀ, 1Û«bÀ): ", 
WP_IMA_EVENT_TOS
},

780 {"OP Ch™gê(0=dißbÀ, 1Û«bÀ): ", 
WP_IMA_EVENT_OPERATIONAL_CHANGE
},

781 {"TxQ Em±y (0=dißbÀ, 1Û«bÀ): ", 
WP_IMA_EVENT_TXQEMPTY
},

782 {"TxQ FuŒ (0=dißbÀ, 1Û«bÀ): ", 
WP_IMA_EVENT_TXQFULL
},

783 {"FE ICP Ch™gê(0=dißbÀ, 1Û«bÀ): ", 
WP_IMA_EVENT_FE_ICP_CHANGE
},

784 {"NE ICP Ch™gê(0=dißbÀ, 1Û«bÀ): ", 
WP_IMA_EVENT_NE_ICP_CHANGE
},

785 {"Rx LASR (0=dißbÀ, 1Û«bÀ): ", 
WP_IMA_EVENT_GSU_LASR_RX
},

786 {"Tx LASR (0=dißbÀ, 1Û«bÀ): ", 
WP_IMA_EVENT_GSU_LASR_TX
},

787 {
NULL
, (
WP_U32
) NULL}

790 
WP_U32
 
	gticks
;

795 
WP_U8
 
	gwt_mac_íë1
[6] = { 0x45, 0x6e, 0x65, 0x74, 0x23, 0x31 };

796 
WP_U8
 
	gwt_mac_íë2
[6] = { 0x45, 0x6e, 0x65, 0x74, 0x23, 0x32 };

797 
WP_èg
 
	gèg_ch™√l_ba£
 = 1;

799 
WP_Êow_À¨nög_ruÀ_vœn
 
	gbridge_cfg
;

800 
WP_l2_f‹w¨d
 
	gf‹w¨d_ruÀ
;

805 
WP_èg
 
	mevít_èg
;

806 
WP_U32
 
	mevít_ty≥
;

807 *
	mevít_∑øm
;

808 } 
	t≠p_èsk
;

812 
WP_U16
 
	mhód
;

813 
WP_U16
 
	mèû
;

814 
WP_U16
 
	mnum_ñemíts
;

815 
WP_U16
 
	m∑d
;

816 
≠p_èsk
 *
	mèsk
;

817 } 
	t≠p_èsk_li°
;

821 
WP_U16
 
	mö
;

822 
WP_U16
 
	mout
;

823 
WP_U16
 
	msize
;

824 
WP_ima_evít
 *
	mèsk
;

826 
	tima_≠p_èsk_li°
;

829 
	#IRQ_TASK_LIST_SIZE
 4096

	)

830 
≠p_èsk
 
	gúq_èsk
[
IRQ_TASK_LIST_SIZE
];

831 
≠p_èsk_li°
 
	gúq_èsk_li°
[1] =

832 { {0, 0, 
IRQ_TASK_LIST_SIZE
, 0, 
úq_èsk
} };

833 
ima_≠p_èsk_li°
 
	gima_úq_èsk_li°
[1] =

834 { {0, 0, 
IRQ_TASK_LIST_SIZE
, (
WP_ima_evít
 *Ë& 
úq_èsk
} };

837 
Aµ_Quô
 (
WP_U32
 
°©us
);

838 
Aµ_EvítRxIndiˇã
 (
WP_èg
 
èg
, 
WP_U32
 
öfo
, WP_U32 
d©a
);

839 
Aµ_EvítTxIndiˇã
 (
WP_èg
 
èg
, 
WP_U32
 
öfo
, WP_U32 
d©a
);

840 
Aµ_EvítEº‹Indiˇã
 (
WP_èg
 
èg
, 
WP_U32
 
öfo
, WP_U32 
d©a
);

841 
Aµ_ImaEvít
 (
WP_èg
 
èg
, 
WP_U32
 
d©a
, WP_U32 
öfo
);

842 
Aµ_Debug
 (
WP_boﬁón
 
debug
);

843 
Aµ_Tîmö©eOnEº‹
 (
WP_h™dÀ
 
h™dÀ
, 
WP_CHAR
 * 
s
);

844 
Aµ_Cª©eE√tHdlcBridge
 ();

845 
Aµ_Cª©eHdlcE√tBridge
 ();

846 
Aµ_DuRe˚ive
 (
WP_h™dÀ
 
h_rx
, 
WP_U32
 
d©a_ty≥
);

847 
Aµ_D©aSíd
 (
WP_h™dÀ
 
h_dev
, WP_h™dÀ 
h_poﬁ
);

848 
WPI_SimuœãI¡îru±s
 ();

850 
≠p_èsk
 *
√xt_èsk
 (
≠p_èsk_li°
 * 
èsk_li°
,áµ_èsk * 
ªsu…
);

852 
WP_ima_evít
 *
ima_√xt_èsk
 (
ima_≠p_èsk_li°
 * 
èsk_li°
,

853 
WP_ima_evít
 * 
ªsu…
);

855 
add_èsk
 (
≠p_èsk_li°
 * 
èsk_li°
, 
WP_U32
 
evít_ty≥
, 
WP_èg
 
èg
,

856 *
evít_∑øm
);

857 
ima_add_èsk
 (
ima_≠p_èsk_li°
 * 
èsk_li°
,

858 
WP_U32
 
d©a
, WP_U32 
öfo
);

860 
≠p_≥rf‹m_a˘i⁄
 (
≠p_èsk
 * 
èsk
);

861 
Aµ_≥rf‹m_‰ìrun
 ();

864 
Aµ_ShowSèts
 ();

865 
Aµ_ShowE√tDevi˚Sèts
 (
WP_h™dÀ
 
íë_devi˚_h™dÀ
,

866 
WP_°©s_íë
 *
s_hs_íë
);

867 
Aµ_ShowTdmDevi˚Sèts
 (
WP_h™dÀ
 
tdm_devi˚_h™dÀ
,

868 
WP_°©s_tdi_hdlc
 
tdi_hdlc_°©s
);

869 
Aµ_ShowTdmAtmDevi˚Sèts
 (
WP_h™dÀ
 
tdm_devi˚_h™dÀ
,

870 
WP_°©s_tdi_©m
 
tdi_©m_°©s
);

871 
Aµ_ShowBridgeP‹tSèts
 (
WP_h™dÀ
 
bp‹t_h™dÀ
,

872 
WP_bp‹t_°©s
 
bp‹t_°©s
);

873 
Aµ_ShowFlowAggSèts
 (
WP_h™dÀ
 
Êow_agg_h™dÀ
,

874 
WP_iw_Êow_°©s
 
Êow_°©s
);

875 
Aµ_AtmTxCh™√lSèts
 (
WP_h™dÀ
 
©m_tx_ch_h™dÀ
,

876 
WP_°©s_Øl5_tx
 
©m_tx_ch™√l_°©s
);

877 
Aµ_AtmRxCh™√lSèts
 (
WP_h™dÀ
 
©m_rx_ch_h™dÀ
,

878 
WP_°©s_Øl5_rx
 
©m_rx_ch™√l_°©s
);

879 
Aµ_ShowPwe3FlowAggSèts
 (
WP_h™dÀ
 
Êow_agg_h™dÀ
,

880 
WP_iw_pwe3_°©s
 
Êow_°©s
);

881 
Aµ_ShowImaGroupSèts
 ();

882 
Aµ_ShowImaLökSèts
 ();

885 
Aµ_Te°Inô
 ();

886 
Aµ_InôHW
 ();

887 
Aµ_SysInô
 ();

888 
Aµ_P‹tsCª©e
 ();

889 
Aµ_Devi˚sAŒocCª©e
 ();

890 
Aµ_IMADevi˚sCª©e
 ();

891 
Aµ_Buf„rPoﬁsCª©e
 ();

892 
Aµ_Sy°emSëup
 ();

893 
Aµ_ImaSëup
 ();

894 
Aµ_ImaGroupEvít
 ();

895 
Aµ_Ch™√lsCª©e
 ();

896 
Aµ_ImaCh™√lsCª©e
 ();

897 
Aµ_P‹tsDevi˚sE«bÀ
 ();

898 
Aµ_Ch™√lsE«bÀ
 ();

899 
Aµ_Cª©eU„E√tIwSy°em
 ();

900 
Aµ_Cª©eE√tU„IwSy°em
 ();

901 
Aµ_íabÀEmphyP‹t
 ();

902 
Aµ_u„Sy°em
 ();

903 
Aµ_E«bÀUFESy°em
 ();

904 
Aµ_IMADevi˚sE«bÀ
 ();

906 
	#ENET_HEADER_SIZE
 14

	)

907 
	#IP_HEADER_SIZE
 20

	)

909 
	#IP_VER_HLEN
 0

	)

910 
	#IP_SER_TYPE
 1

	)

911 
	#IP_LENGTH
 2

	)

912 
	#IP_TTL
 8

	)

913 
	#IP_PROTOCOL
 9

	)

914 
	#IP_CHECKSUM
 10

	)

915 
	#IP_SA
 12

	)

916 
	#IP_DA
 16

	)

918 
	#UDP_HEADER_SIZE
 8

	)

919 
	#UDP_SRC_PORT
 0

	)

920 
	#UDP_DST_PORT
 2

	)

921 
	#UDP_LENGTH
 4

	)

922 
	#UDP_CHECKSUM
 6

	)

925 
ö£π_ù_hódî
 (
WP_U32
 
ù_ß
, WP_U32 
ù_da
, WP_U32 
∑ylﬂd_size
,

926 
WP_U32
 
¥Ÿocﬁ
, WP_U32 
Àngth
, 
WP_U8
 * 
¥efix
);

929 
WP_h™dÀ
 
	gh_p‹t_íë1
, 
	gh_p‹t_íë2
;

930 
WP_h™dÀ
 
	gh_devi˚_íë1
, 
	gh_devi˚_íë2
;

933 
WP_h™dÀ
 
	gh_poﬁ_buf„r_ho°
;

934 
WP_h™dÀ
 
	gh_poﬁ_rög_ho°
;

935 
WP_h™dÀ
 
	gh_poﬁ_buf„r_iw
, 
	gh_poﬁ_256
;

936 
WP_h™dÀ
 
	gh_qnode_iwq
, 
	gh_qnode_ho°
, 
	gh_qnode_iwq_tdm
;

937 
WP_h™dÀ
 
	gh_bridge1_iwho°
, 
	gh_bridge2_iwho°
;

938 
WP_h™dÀ
 
	gh_bridge1_deÁu…_agg
, 
	gh_bridge2_deÁu…_agg
;

939 
WP_h™dÀ
 
	gh_Êow_agg_tdm
[
APP_MAX_TDM_PORTS
];

940 
WP_h™dÀ
 
	gh_iw_sys_bridge1
, 
	gh_iw_sys_bridge2
;

941 
WP_h™dÀ
 
	gh_À¨nögÊow_íë1
;

942 
WP_h™dÀ
 
	gh_bridge1_dfcÊow1
[
MAX_ATM_TX_CHANNEL
];

943 
WP_h™dÀ
 
	gh_bridge2_dfcÊow
[4];

944 
WP_h™dÀ
 
	gh_bridge1_fûãr
[2], 
	gh_bridge2_fûãr
[4];

945 
WP_h™dÀ
 
	gh_p‹t_iwho°
, 
	gh_dev_iwho°
;

946 
WP_h™dÀ
 
	gh_bridge1_bp‹t_íë1
, 
	gh_bridge1_bp‹t_tdm
[
APP_MAX_TDM_PORTS
];

947 
WP_h™dÀ
 
	gh_bridge2_bp‹t_íë2
, 
	gh_bridge2_bp‹t_tdm
[
APP_MAX_TDM_PORTS
];

948 
WP_h™dÀ
 
	gh_Êow_agg_íë2
;

949 
WP_h™dÀ
 
	gh_Ω‹t_tdm
[
APP_MAX_TDM_PORTS
], 
	gh_Ω‹t_íë2
;

950 
WP_h™dÀ
 
	gh_íë1_rx
, 
	gh_íë1_ho°_tx
, 
	gh_íë1_tx
;

951 
WP_h™dÀ
 
	gh_íë2_rx
, 
	gh_íë2_tx
;

952 
WP_h™dÀ
 
	gh_tdm_rx
[
APP_MAX_TDM_PORTS
], 
	gh_tdm_tx
[APP_MAX_TDM_PORTS];

954 
WP_h™dÀ
 
	gemphy_p‹t
;

955 
WP_h™dÀ
 
	gh_dev_ima
[
APP_MAX_IMA_DEVICE
];

957 
WP_h™dÀ
 
	g°©us
;

960 
WP_h™dÀ
 
	gh_dev_tdm_Æloc
[
APP_MAX_TDM_PORTS
];

961 
WP_h™dÀ
 
	gima_sys_h™dÀ
;

962 
WP_h™dÀ
 
	gima_group_h™dÀ
[
NUM_OF_GROUPS
];

963 
WP_h™dÀ
 
	gima_lök_h™dÀ
[
NUM_OF_LINKS
 * 
NUM_OF_GROUPS
];

964 
WP_h™dÀ
 
	gima_tx_ch_h™dÀ
[
MAX_ATM_TX_CHANNEL
];

965 
WP_h™dÀ
 
	gima_rx_ch_h™dÀ
[
MAX_ATM_RX_CHANNEL
];

966 
WP_h™dÀ
 
	gima_group_pqblock_h™dÀ
[
NUM_OF_GROUPS
];

967 
WP_h™dÀ
 
	gpﬁi˚r_h™dÀ
;

968 
WP_h™dÀ
 
	gima_qn
;

969 
WP_h™dÀ
 
	gh_bridge1_bp‹t_ima
;

970 
WP_h™dÀ
 
	gh_Êow_agg_å™s_bridge_egªss
[
MAX_ATM_TX_CHANNEL
];

971 
WP_h™dÀ
 
	gh_Êow_agg_pwe3_©m_ögªss
[
MAX_ATM_RX_CHANNEL
];

972 
WP_h™dÀ
 
	gh_iw_sys_dúe˘m≠
;

973 
WP_èg
 
	gèg_bridge1_bp‹t_ima
;

974 
WP_èg
 
	gèg_agg_ima1
;

977 
WP_èg
 
	gèg_agg_íë
;

979 
WP_èg
 
	gèg_bp‹t_íë1
;

980 
WP_èg
 
	gèg_bp‹t_íë2
;

981 
WP_èg
 
	gèg_bridge1_bp‹t_tdm
[
APP_MAX_TDM_PORTS
];

982 
WP_èg
 
	gèg_bridge2_bp‹t_tdm
[
APP_MAX_TDM_PORTS
];

983 
WP_èg
 
	gèg_Ω‹t_tdm
[
APP_MAX_TDM_PORTS
];

984 
WP_èg
 
	gèg_Ω‹t_íë2
;

985 
WP_èg
 
	gèg_agg_íë2
;

987 
WP_èg
 
	gèg_iw_sys_bridge1
, 
	gèg_iw_sys_bridge2
;

988 
WP_èg
 
	gèg_agg_deÁu…_bridge1
, 
	gèg_agg_deÁu…_bridge2
;

990 
WP_èg
 
	gèg_íë1_rx
, 
	gèg_íë2_rx
;

991 
WP_èg
 
	gèg_íë1_tx
, 
	gèg_íë2_tx
;

992 
WP_èg
 
	gèg_iwho°_rx1
, 
	gèg_iwho°_rx2
;

993 
WP_èg
 
	gèg_tdmrx
 = 200;

994 
WP_èg
 
	gèg_tdmtx
 = 300;

995 
WP_boﬁón
 
	gdebug_⁄
 = 
WP_FALSE
;

	@atm_ima_ufe_stats.c

17 
	$m_showWUFE
 ()

19 
	`WUFE_Sy°emDi•œy
 (0);

22 
	}
}

26 *
lök_s
(
n
);

28 
	$m_showLnkSètus
 ()

30 
WP_ima_lök_°©e_öfo
 
lök_°©e
[
NUM_OF_LINKS
];

31 
i
 = 0;

33 
i
 = 0; i < 
NUM_OF_LINKS
; i ++)

35 
	`¥ötf
 ("\n");

36 
	`¥ötf
 ("im®lök[%d] sètus\n", 
i
);

37 
	`¥ötf
 ("================================================\n");

38 
°©us
 = 
	`WP_ImaLökSèã
(
ima_lök_h™dÀ
[
i
], &
lök_°©e
[i]);

39 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_ImaLinkState()");

40 
	`¥ötf
 ("lök_°©e[i].√_ima_id =%d\n", 
lök_°©e
[
i
].
√_ima_id
);

41 
	`¥ötf
 ("lök_°©e[i].„_ima_id =%d\n", 
lök_°©e
[
i
].
„_ima_id
);

42 
	`¥ötf
 ("lök_°©e[i].√_tx_lsm =%s\n", 
	`lök_s
(
lök_°©e
[
i
].
√_rx_lsm
));

43 
	`¥ötf
 ("lök_°©e[i].√_tx_lsm =%s\n", 
	`lök_s
(
lök_°©e
[
i
].
√_tx_lsm
));

44 
	`¥ötf
 ("lök_°©e[i].„_rx_lsm =%s\n", 
	`lök_s
(
lök_°©e
[
i
].
„_rx_lsm
));

45 
	`¥ötf
 ("lök_°©e[i].„_tx_lsm =%s\n", 
	`lök_s
(
lök_°©e
[
i
].
„_tx_lsm
));

47 
	`¥ötf
 ("lök_°©e[i].dñay =%d\n", 
lök_°©e
[
i
].
dñay
);

48 
	`¥ötf
 ("lök_°©e[i].rx_p‹t =%d\n", 
lök_°©e
[
i
].
rx_p‹t
);

49 
	`¥ötf
 ("lök_°©e[i].tx_p‹t =%d\n", 
lök_°©e
[
i
].
tx_p‹t
);

53 
	}
}

56 * 
ima_s
 (
n
);

57 * 
ima_„_s
 (
n
);

59 
	$m_showGΩSètus
 ()

61 
WP_°©us
 
°©us
;

62 
WP_ima_group_°©e_öfo
 
group_°©e
[
NUM_OF_GROUPS
];

63 
i
 = 0;

65 
°©us
 = 
	`WP_ImaGroupSèã
(
ima_group_h™dÀ
[
i
], &
group_°©e
[i]);

66 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_ImaGroupState()");

67 
	`¥ötf
 ("\n");

68 
	`¥ötf
 ("Group[%d] status:\n", 0);

69 
	`¥ötf
 ("=================================================\n");

70 
	`¥ötf
("group_°©e[0].√_°©ê =%s\n", 
	`ima_s
(
group_°©e
[
i
].
√_°©e
));

71 
	`¥ötf
("group_°©e[0].„_°©ê =%s\n", 
	`ima_„_s
(
group_°©e
[
i
].
„_°©e
));

72 
	`¥ötf
("group_°©e[0].g_id =%d\n", 
group_°©e
[
i
].
g_id
);

73 
	`¥ötf
("group_°©e[0].√_ima_id =%d\n", 
group_°©e
[
i
].
√_ima_id
);

74 
	`¥ötf
("group_°©e[0].√_symmëry =%d\n", 
group_°©e
[
i
].
√_symmëry
);

75 
	`¥ötf
("group_°©e[0].√_ål_p‹à =%d\n", 
group_°©e
[
i
].
√_ål_p‹t
);

76 
	`¥ötf
("group_°©e[0].√_ål_id =%d\n", 
group_°©e
[
i
].
√_ål_id
);

77 
	`¥ötf
("group_°©e[0].√_‰ame_sizê =%d\n", 
group_°©e
[
i
].
√_‰ame_size
);

78 
	`¥ötf
("group_°©e[0].√_˛ock_modê =%d\n", 
group_°©e
[
i
].
√_˛ock_mode
);

79 
	`¥ötf
("group_°©e[0].„_ima_id =%d\n", 
group_°©e
[
i
].
„_ima_id
);

80 
	`¥ötf
("group_°©e[0].„_symmëry =%d\n", 
group_°©e
[
i
].
„_symmëry
);

81 
	`¥ötf
("group_°©e[0].„_æ_id =%d\n", 
group_°©e
[
i
].
„_ål_id
);

82 
	`¥ötf
("group_°©e[0].„_m =%d\n", 
group_°©e
[
i
].
„_m
);

83 
	`¥ötf
("group_°©e[0].Ælowed_dñay =%d\n", 
group_°©e
[
i
].
Ælowed_dñay
);

84 
	`¥ötf
("group_°©e[0].dñay =%d\n", 
group_°©e
[
i
].
dñay
);

85 
	`¥ötf
("group_°©e[0].löke_dñay_dñè =%d\n", 
group_°©e
[
i
].
lök_dñay_dñè
);

86 
	`¥ötf
("group_°©e[0].sh‹t_dñay_p‹à =%d\n", 
group_°©e
[
i
].
sh‹t_dñay_p‹t
);

87 
	`¥ötf
("group_°©e[0].l⁄g_dñay_p‹à =%d\n", 
group_°©e
[
i
].
l⁄g_dñay_p‹t
);

88 
	`¥ötf
("group_°©e[0].tx_mö_lök† =%d\n", 
group_°©e
[
i
].
tx_mö_löks
);

89 
	`¥ötf
("group_°©e[0].rx_mö_lök† =%d\n", 
group_°©e
[
i
].
rx_mö_löks
);

90 
	`¥ötf
("group_°©e[0].√_Æ¨m_°©ê =%d\n", 
group_°©e
[
i
].
√_Æ¨m_°©e
);

91 
	`¥ötf
("group_°©e[0].√_Æ¨m_ty≥ =%d\n", 
group_°©e
[
i
].
√_Æ¨m_ty≥
);

92 
	`¥ötf
("group_°©e[0].„_Æ¨m_°©ê =%d\n", 
group_°©e
[
i
].
„_Æ¨m_°©e
);

93 
	`¥ötf
("group_°©e[0].„_Æ¨m_ty≥ =%d\n", 
group_°©e
[
i
].
„_Æ¨m_ty≥
);

94 
	`¥ötf
("group_°©e[0].√_°©ê =%s\n", 
	`ima_s
(
group_°©e
[
i
].
√_°©e
));

95 
	`¥ötf
("group_°©e[0].„_°©ê =%s\n", 
	`ima_„_s
(
group_°©e
[
i
].
„_°©e
));

96 
i
 ++;

97 
	}
}

112 
	$Aµ_ShowSèts
()

114 
WP_U32
 
ii
;

115 
WP_°©s_íë
 
s_hs_íë
={0};

116 
WP_°©s_íë
 
s_hs_íë_x
[2];

117 
WP_°©s_tdi_©m
 
tdi_©m_°©s
={0};

118 
WP_bp‹t_°©s
 
bp‹t_°©s
 = {0};

119 
WP_iw_Êow_°©s
 
Êow_°©s
 = {0};

120 
WP_iw_pwe3_°©s
 
pwe3_Êow_°©s
 = {0};

121 
WP_°©s_Øl5_tx
 
©m_tx_ch™√l_°©s
 = {0};

122 
WP_°©s_Øl5_rx
 
©m_rx_ch™√l_°©s
 = {0};

123 
WP_U8
 
ch
, 
°©s_Æl
=0;

125 
	`mem£t
 (&
s_hs_íë
, 0, (
WP_°©s_íë
));

128 { if(
°©s_Æl
==0)

130 
	`¥ötf
("\nMENU------------------------------------------------");

131 
	`¥ötf
("\nEnter 1ÅoÖrint Device Stats");

132 
	`¥ötf
("\nEnter 2ÅoÖrint Bport Stats");

133 
	`¥ötf
("\nEnter 3ÅoÖrint FlowAgg Stats");

134 
	`¥ötf
("\nEnter 4ÅoÖrint Channel Stats");

135 
	`¥ötf
("\nEnter 5ÅoÖrint IMA Stats");

136 
	`¥ötf
("\nEnter 6ÅoÖrint All Stats");

137 
	`¥ötf
("\nEnter 8ÅoÑestart group");

138 
	`¥ötf
("\nEnter 9Åo show group status");

139 
	`¥ötf
("\nEnteráÅo showÜinks' status");

140 
	`¥ötf
("\nEnter bÅo show WUFE_SystemDisplay' status");

141 
	`¥ötf
("\nEnter cÅo handleÉvents");

142 
	`¥ötf
("\nEnter dÅoÖrintÉmphyÖort stats");

143 
	`¥ötf
("\nEnter xÅoÖrevious menu");

144 
	`¥ötf
("\n");

146 
ch
=
	`gëch¨
();

147 if(
ch
=='6')

148 
°©s_Æl
='6';

152 
ch
'6'-
°©s_Æl
;

153 
°©s_Æl
--;

155 
ch
)

159 
WP_°©s_emphy
 
emphy_°©s
;

160 
	`mem£t
 (&
emphy_°©s
, 0, (
WP_°©s_emphy
));

161 
	`¥ötf
("-------------------------------\n");

162 
	`¥ötf
(" Emphy sètisic†p‹à \n",
ii
);

163 
	`¥ötf
("-------------------------------\n");

164 
	`¥ötf
 ("pos_îr(%d)\n", 
emphy_°©s
.
pos_îr
);

165 
	`¥ötf
("rx_unsuµ‹ãd_devi˚(%d)\n", 
emphy_°©s
.
rx_unsuµ‹ãd_devi˚
);

166 
	`¥ötf
("tx_unsuµ‹ãd_devi˚(%d)\n", 
emphy_°©s
.
tx_unsuµ‹ãd_devi˚
);

167 
	`¥ötf
("rx_îr_∑rôy(%d)\n", 
emphy_°©s
.
rx_îr_∑rôy
);

168 
	`¥ötf
("rx_îr_s›_e›(%d)\n", 
emphy_°©s
.
rx_îr_s›_e›
);

172 
ii
 = 0;iò< 
APP_MAX_TDM_PORTS
;ii++)

174 
	`¥ötf
("-------------------------------\n");

175 
	`¥ötf
(" Devi˚ sètisic†IMA %d \n",
ii
);

176 
	`¥ötf
("-------------------------------\n");

177 
	`Aµ_ShowTdmAtmDevi˚Sèts
(
h_dev_ima
[
ii
], 
tdi_©m_°©s
);

179 
	`¥ötf
("-------------------------------\n");

180 
	`¥ötf
(" ENET1 statisics \n");

181 
	`¥ötf
("-------------------------------\n");

182 
	`Aµ_ShowE√tDevi˚Sèts
(
h_devi˚_íë1
, &
s_hs_íë_x
[0]);

183 
	`¥ötf
("-------------------------------\n");

184 
	`¥ötf
(" ENET2 statisics \n");

185 
	`¥ötf
("-------------------------------\n");

186 
	`Aµ_ShowE√tDevi˚Sèts
(
h_devi˚_íë2
, &
s_hs_íë_x
[1]);

187 
	`¥ötf
 ("+++++\n");

189 
	`¥ötf
("Ñx_byãs[1] : %d\n", (
WP_U32
)
s_hs_íë_x
[0].
rx_byãs
);

190 
	`¥ötf
("Ñx_∑ckës[1] : %d\n",(
WP_U32
)
s_hs_íë_x
[0].
rx_∑ckës
);

191 
	`¥ötf
("Åx_byãs[1] : %d\n", (
WP_U32
)
s_hs_íë_x
[0].
tx_byãs
);

192 
	`¥ötf
("Åx_∑ckës[1] : %d\n",(
WP_U32
)
s_hs_íë_x
[0].
tx_∑ckës
);

193 
	`¥ötf
("Ñx_byãs[2] : %d\n", (
WP_U32
)
s_hs_íë_x
[1].
rx_byãs
);

194 
	`¥ötf
("Ñx_∑ckës[2] : %d\n",(
WP_U32
)
s_hs_íë_x
[1].
rx_∑ckës
);

195 
	`¥ötf
("Åx_byãs[2] : %d\n", (
WP_U32
)
s_hs_íë_x
[1].
tx_byãs
);

196 
	`¥ötf
("Åx_∑ckës[2] : %d\n",(
WP_U32
)
s_hs_íë_x
[1].
tx_∑ckës
);

197 if(
ch
== '1')

200 
	`¥ötf
("-------------------------------\n");

201 
	`¥ötf
("Bridge Port Statistics ENET1 \n");

202 
	`¥ötf
("-------------------------------\n");

203 
	`Aµ_ShowBridgeP‹tSèts
(
h_bridge1_bp‹t_íë1
, 
bp‹t_°©s
);

204 if(
ch
=='2')

207 
ii
 = 0;iò< 
MAX_ATM_TX_CHANNEL
;ii++)

209 
	`¥ötf
("---------------------------------------------------\n");

210 
	`¥ötf
(" Flow sèti°ic†IMA h_Êow_agg_å™s_bridge_egªss[%d] \n",
ii
);

211 
	`¥ötf
("---------------------------------------------------\n");

212 
	`Aµ_ShowFlowAggSèts
(
h_Êow_agg_å™s_bridge_egªss
[
ii
], 
Êow_°©s
);

214 
	`¥ötf
("----------------------------------------------------\n");

215 
	`¥ötf
(" Flow statistics IMA h_flow_agg_pwe3_atm_ingress[0] \n");

216 
	`¥ötf
("----------------------------------------------------\n");

217 
	`Aµ_ShowPwe3FlowAggSèts
(
h_Êow_agg_pwe3_©m_ögªss
[0], 
pwe3_Êow_°©s
);

218 if(
ch
=='3')

223 
ii
=0;ii<
MAX_ATM_TX_CHANNEL
;ii++)

225 
	`¥ötf
("-------------------------------\n");

226 
	`¥ötf
(" Ch™√»Sèti°ic†ATM Tx [%d] \n",
ii
);

227 
	`¥ötf
("-------------------------------\n");

228 
	`Aµ_AtmTxCh™√lSèts
(
ima_tx_ch_h™dÀ
[
ii
], 
©m_tx_ch™√l_°©s
);

231 
ii
=0;ii<
NUM_OF_GROUPS
;ii++)

233 
	`¥ötf
("-------------------------------\n");

234 
	`¥ötf
(" Ch™√»Sèti°ic†ATM Rx [%d] \n",
ii
);

235 
	`¥ötf
("-------------------------------\n");

236 
	`Aµ_AtmRxCh™√lSèts
(
ima_rx_ch_h™dÀ
[
ii
], 
©m_rx_ch™√l_°©s
);

239 if(
ch
=='4')

244 
	`Aµ_ShowImaGroupSèts
();

245 
	`Aµ_ShowImaLökSèts
();

246 if(
ch
=='5')

256 
	`¥ötf
("-------------------------------\n");

257 
	`¥ötf
 ("WP_ImaGroupRestart()\n");

258 
	`¥ötf
("-------------------------------\n");

259 #ifde‡
_WP_MODULE_IMA_AR_ENABLE_


260 
	`WP_ImaGroupRe°¨t
 (
ima_group_h™dÀ
[0], 
WP_IMA_USE_EXISTING_GID
, 0);

262 
	`WP_ImaGroupRe°¨t
 (
ima_group_h™dÀ
[0]);

266 
	`¥ötf
("-------------------------------\n");

267 
	`¥ötf
("show ima group state\n");

268 
	`¥ötf
("-------------------------------\n");

269 
	`m_showGΩSètus
 ();

272 
	`¥ötf
("-------------------------------\n");

273 
	`¥ötf
("show imaÜink state\n");

274 
	`¥ötf
("-------------------------------\n");

275 
	`m_showLnkSètus
 ();

278 
	`¥ötf
("-------------------------------\n");

279 
	`¥ötf
("show WUFE_system_status\n");

280 
	`¥ötf
("-------------------------------\n");

281 
	`m_showWUFE
();

284 
	`¥ötf
("-------------------------------\n");

285 
	`¥ötf
("clearÉvents\n");

286 
	`¥ötf
("-------------------------------\n");

287 
	`di•œy_evíts
();

290 
	`¥ötf
("Invalid Entry\n");

295 
	}
}

304 
	$Aµ_ShowE√tDevi˚Sèts
(
WP_h™dÀ
 
íë_devi˚_h™dÀ
, 
WP_°©s_íë
 *
s_hs_íë
)

306 
	`mem£t
(
s_hs_íë
,0,(s_hs_enet));

307 
°©us
 = 
	`WP_Devi˚Sèti°ics
(
íë_devi˚_h™dÀ
, 
s_hs_íë
);

308 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_DeviceStatistics");

309 i‡(
s_hs_íë
->
txrx_‰ames_64
)

310 
	`¥ötf
("Åxrx_‰ames_64 : %d\n", (
WP_U32
)
s_hs_íë
->
txrx_‰ames_64
);

311 i‡(
s_hs_íë
->
txrx_‰ames_127
)

312 
	`¥ötf
("Åxrx_‰ames_127 : %d\n", (
WP_U32
)
s_hs_íë
->
txrx_‰ames_127
);

313 i‡(
s_hs_íë
->
txrx_‰ames_255
)

314 
	`¥ötf
("Åxrx_‰ames_255 : %d\n", (
WP_U32
)
s_hs_íë
->
txrx_‰ames_255
);

315 i‡(
s_hs_íë
->
txrx_‰ames_511
)

316 
	`¥ötf
("Åxrx_‰ames_511 : %d\n", (
WP_U32
)
s_hs_íë
->
txrx_‰ames_511
);

317 i‡(
s_hs_íë
->
txrx_‰ames_1023
)

318 
	`¥ötf
("Åxrx_‰ames_1023 : %d\n", (
WP_U32
)
s_hs_íë
->
txrx_‰ames_1023
);

319 i‡(
s_hs_íë
->
txrx_‰ames_1518
)

320 
	`¥ötf
("Åxrx_‰ames_1518 : %d\n", (
WP_U32
)
s_hs_íë
->
txrx_‰ames_1518
);

321 i‡(
s_hs_íë
->
txrx_‰ames_1522
)

322 
	`¥ötf
("Åxrx_‰ames_1522 : %d\n", (
WP_U32
)
s_hs_íë
->
txrx_‰ames_1522
);

323 i‡(
s_hs_íë
->
rx_byãs
)

324 
	`¥ötf
("Ñx_byã† : %d\n", (
WP_U32
)
s_hs_íë
->
rx_byãs
);

325 i‡(
s_hs_íë
->
rx_∑ckës
)

326 
	`¥ötf
("Ñx_∑ckë† : %d\n", (
WP_U32
)
s_hs_íë
->
rx_∑ckës
);

327 i‡(
s_hs_íë
->
rx_îr_fcs
)

328 
	`¥ötf
("Ñx_îr_fc† : %d\n", (
WP_U32
)
s_hs_íë
->
rx_îr_fcs
);

329 i‡(
s_hs_íë
->
rx_mu…iˇ°
)

330 
	`¥ötf
("Ñx_mu…iˇ° : %d\n", (
WP_U32
)
s_hs_íë
->
rx_mu…iˇ°
);

331 i‡(
s_hs_íë
->
rx_brﬂdˇ°
)

332 
	`¥ötf
("Ñx_brﬂdˇ° : %d\n", (
WP_U32
)
s_hs_íë
->
rx_brﬂdˇ°
);

333 i‡(
s_hs_íë
->
rx_mac_c⁄åﬁ
)

334 
	`¥ötf
("Ñx_mac_c⁄åﬁ : %d\n", (
WP_U32
)
s_hs_íë
->
rx_mac_c⁄åﬁ
);

335 i‡(
s_hs_íë
->
rx_mac_∑u£
)

336 
	`¥ötf
("Ñx_mac_∑u£ : %d\n", (
WP_U32
)
s_hs_íë
->
rx_mac_∑u£
);

337 i‡(
s_hs_íë
->
rx_mac_unknown
)

338 
	`¥ötf
("Ñx_mac_unknow¿ : %d\n", (
WP_U32
)
s_hs_íë
->
rx_mac_unknown
);

339 i‡(
s_hs_íë
->
rx_îr_Æignmít
)

340 
	`¥ötf
("Ñx_îr_Æignmíà : %d\n", (
WP_U32
)
s_hs_íë
->
rx_îr_Æignmít
);

341 i‡(
s_hs_íë
->
rx_îr_Àngth
)

342 
	`¥ötf
("Ñx_îr_Àngth : %d\n", (
WP_U32
)
s_hs_íë
->
rx_îr_Àngth
);

343 i‡(
s_hs_íë
->
rx_îr_code
)

344 
	`¥ötf
("Ñx_îr_codê : %d\n", (
WP_U32
)
s_hs_íë
->
rx_îr_code
);

345 i‡(
s_hs_íë
->
rx_Ál£_ˇºõr
)

346 
	`¥ötf
("Ñx_Ál£_ˇºõ∏ : %d\n", (
WP_U32
)
s_hs_íë
->
rx_Ál£_ˇºõr
);

347 i‡(
s_hs_íë
->
rx_undîsize
)

348 
	`¥ötf
("Ñx_undîsizê : %d\n", (
WP_U32
)
s_hs_íë
->
rx_undîsize
);

349 i‡(
s_hs_íë
->
rx_ovîsize
)

350 
	`¥ötf
("Ñx_ovîsizê : %d\n", (
WP_U32
)
s_hs_íë
->
rx_ovîsize
);

351 i‡(
s_hs_íë
->
rx_‰agmíts
)

352 
	`¥ötf
("Ñx_‰agmít† : %d\n", (
WP_U32
)
s_hs_íë
->
rx_‰agmíts
);

353 i‡(
s_hs_íë
->
rx_jabbî
)

354 
	`¥ötf
("Ñx_jabbî : %d\n", (
WP_U32
)
s_hs_íë
->
rx_jabbî
);

355 i‡(
s_hs_íë
->
rx_dr›≥d
)

356 
	`¥ötf
("Ñx_dr›≥d : %d\n\n", (
WP_U32
)
s_hs_íë
->
rx_dr›≥d
);

357 i‡(
s_hs_íë
->
tx_byãs
)

358 
	`¥ötf
("Åx_byã† : %d\n", (
WP_U32
)
s_hs_íë
->
tx_byãs
);

359 i‡(
s_hs_íë
->
tx_∑ckës
)

360 
	`¥ötf
("Åx_∑ckë† : %d\n", (
WP_U32
)
s_hs_íë
->
tx_∑ckës
);

361 i‡(
s_hs_íë
->
tx_mu…iˇ°
)

362 
	`¥ötf
("Åx_mu…iˇ° : %d\n", (
WP_U32
)
s_hs_íë
->
tx_mu…iˇ°
);

363 i‡(
s_hs_íë
->
tx_brﬂdˇ°
)

364 
	`¥ötf
("Åx_brﬂdˇ° : %d\n", (
WP_U32
)
s_hs_íë
->
tx_brﬂdˇ°
);

365 i‡(
s_hs_íë
->
tx_mac_∑u£
)

366 
	`¥ötf
("Åx_mac_∑u£ : %d\n", (
WP_U32
)
s_hs_íë
->
tx_mac_∑u£
);

367 i‡(
s_hs_íë
->
tx_de„r
)

368 
	`¥ötf
("Åx_de„∏ : %d\n", (
WP_U32
)
s_hs_íë
->
tx_de„r
);

369 i‡(
s_hs_íë
->
tx_ex˚ss_de„r
)

370 
	`¥ötf
("Åx_ex˚ss_de„∏ : %d\n", (
WP_U32
)
s_hs_íë
->
tx_ex˚ss_de„r
);

371 i‡(
s_hs_íë
->
tx_sögÀ_cﬁlisi⁄
)

372 
	`¥ötf
("Åx_sögÀ_cﬁlisi⁄ : %d\n", (
WP_U32
)
s_hs_íë
->
tx_sögÀ_cﬁlisi⁄
);

373 i‡(
s_hs_íë
->
tx_mu…i_cﬁlisi⁄
)

374 
	`¥ötf
("Åx_mu…i_cﬁlisi⁄ : %d\n", (
WP_U32
)
s_hs_íë
->
tx_mu…i_cﬁlisi⁄
);

375 i‡(
s_hs_íë
->
tx_œã_cﬁlisi⁄
)

376 
	`¥ötf
("Åx_œã_cﬁlisi⁄ : %d\n", (
WP_U32
)
s_hs_íë
->
tx_œã_cﬁlisi⁄
);

377 i‡(
s_hs_íë
->
tx_ex˚ss_cﬁlisi⁄
)

378 
	`¥ötf
("Åx_ex˚ss_cﬁlisi⁄ : %d\n", (
WP_U32
)
s_hs_íë
->
tx_ex˚ss_cﬁlisi⁄
);

379 i‡(
s_hs_íë
->
tx_no_cﬁlisi⁄
)

380 
	`¥ötf
("Åx_no_cﬁlisi⁄ : %d\n", (
WP_U32
)
s_hs_íë
->
tx_no_cﬁlisi⁄
);

381 i‡(
s_hs_íë
->
tx_mac_∑u£_h⁄‹ed
)

382 
	`¥ötf
("Åx_mac_∑u£_h⁄‹ed : %d\n", (
WP_U32
)
s_hs_íë
->
tx_mac_∑u£_h⁄‹ed
);

383 i‡(
s_hs_íë
->
tx_dr›≥d
)

384 
	`¥ötf
("Åx_dr›≥d : %d\n", (
WP_U32
)
s_hs_íë
->
tx_dr›≥d
);

385 i‡(
s_hs_íë
->
tx_jabbî
)

386 
	`¥ötf
("Åx_jabbî : %d\n", (
WP_U32
)
s_hs_íë
->
tx_jabbî
);

387 i‡(
s_hs_íë
->
tx_îr_fcs
)

388 
	`¥ötf
("Åx_îr_fc† : %d\n", (
WP_U32
)
s_hs_íë
->
tx_îr_fcs
);

389 i‡(
s_hs_íë
->
tx_c⁄åﬁ
)

390 
	`¥ötf
("Åx_c⁄åﬁ : %d\n", (
WP_U32
)
s_hs_íë
->
tx_c⁄åﬁ
);

391 i‡(
s_hs_íë
->
tx_ovîsize
)

392 
	`¥ötf
("Åx_ovîsizê : %d\n", (
WP_U32
)
s_hs_íë
->
tx_ovîsize
);

393 i‡(
s_hs_íë
->
tx_undîsize
)

394 
	`¥ötf
("Åx_undîsizê : %d\n", (
WP_U32
)
s_hs_íë
->
tx_undîsize
);

395 i‡(
s_hs_íë
->
tx_‰agmíts
)

396 
	`¥ötf
("Åx_‰agmít† : %d\n\n", (
WP_U32
)
s_hs_íë
->
tx_‰agmíts
);

397 i‡(
s_hs_íë
->
rx_ho°_‰ames
)

398 
	`¥ötf
("Ñx_ho°_‰ame† : %d\n", (
WP_U32
)
s_hs_íë
->
rx_ho°_‰ames
);

399 i‡(
s_hs_íë
->
rx_iw_‰ames
)

400 
	`¥ötf
("Ñx_iw_‰ame† : %d\n", (
WP_U32
)
s_hs_íë
->
rx_iw_‰ames
);

401 i‡(
s_hs_íë
->
rx_îr_ho°_fuŒ
)

402 
	`¥ötf
("Ñx_îr_ho°_fuŒ : %d\n", (
WP_U32
)
s_hs_íë
->
rx_îr_ho°_fuŒ
);

403 i‡(
s_hs_íë
->
rx_îr_fbp_undîrun
)

404 
	`¥ötf
("Ñx_îr_fbp_undîru¿ : %d\n", (
WP_U32
)
s_hs_íë
->
rx_îr_fbp_undîrun
);

405 i‡(
s_hs_íë
->
rx_îr_n⁄vÆid_mac
)

406 
	`¥ötf
("Ñx_îr_n⁄vÆid_ma¯ : %d\n", (
WP_U32
)
s_hs_íë
->
rx_îr_n⁄vÆid_mac
);

407 i‡(
s_hs_íë
->
rx_îr_mru
)

408 
	`¥ötf
("Ñx_îr_mru : %d\n", (
WP_U32
)
s_hs_íë
->
rx_îr_mru
);

409 i‡(
s_hs_íë
->
rx_îr_sdu
)

410 
	`¥ötf
("Ñx_îr_sdu : %d\n", (
WP_U32
)
s_hs_íë
->
rx_îr_sdu
);

411 i‡(
s_hs_íë
->
tx_îr_undîrun
)

412 
	`¥ötf
("Åx_îr_undîru¿ : %d\n", (
WP_U32
)
s_hs_íë
->
tx_îr_undîrun
);

413 i‡(
s_hs_íë
->
rx_îr_ovîrun
)

414 
	`¥ötf
("Ñx_îr_ovîru¿ : %d\n", (
WP_U32
)
s_hs_íë
->
rx_îr_ovîrun
);

415 i‡(
s_hs_íë
->
tx_‰ames
)

416 
	`¥ötf
("Åx_‰ame† : %d\n", (
WP_U32
)
s_hs_íë
->
tx_‰ames
);

417 i‡(
s_hs_íë
->
g999_rx_∑u£_‰ames
)

418 
	`¥ötf
(" g999_rx_∑u£_‰ame† : %d\n", (
WP_U32
)
s_hs_íë
->
g999_rx_∑u£_‰ames
);

419 i‡(
s_hs_íë
->
g999_rx_îr‹ed_‰agmíts
)

420 
	`¥ötf
(" g999_rx_îr‹ed_‰agmít†: %d\n", (
WP_U32
)
s_hs_íë
->
g999_rx_îr‹ed_‰agmíts
);

421 i‡(
s_hs_íë
->
g999_rx_Àngth_îr‹
)

422 
	`¥ötf
(" g999_rx_Àngth_îr‹ : %d\n", (
WP_U32
)
s_hs_íë
->
g999_rx_Àngth_îr‹
);

423 i‡(
s_hs_íë
->
rx_byãs
)

424 
	`¥ötf
("Ñx_byã† : %d\n", (
WP_U32
)
s_hs_íë
->
rx_byãs
);

425 i‡(
s_hs_íë
->
rx_∑ckës
)

426 
	`¥ötf
("Ñx_∑ckë† : %d\n", (
WP_U32
)
s_hs_íë
->
rx_∑ckës
);

427 i‡(
s_hs_íë
->
tx_byãs
)

428 
	`¥ötf
("Åx_byã† : %d\n", (
WP_U32
)
s_hs_íë
->
tx_byãs
);

429 i‡(
s_hs_íë
->
tx_∑ckës
)

430 
	`¥ötf
("Åx_∑ckë† : %d\n", (
WP_U32
)
s_hs_íë
->
tx_∑ckës
);

432 
	}
}

441 
	$Aµ_ShowTdmDevi˚Sèts
(
WP_h™dÀ
 
tdm_devi˚_h™dÀ
, 
WP_°©s_tdi_hdlc
 
tdi_hdlc_°©s
)

443 
	`mem£t
(&
tdi_hdlc_°©s
,0,(
WP_°©s_tdi_hdlc
));

444 
°©us
 = 
	`WP_Devi˚Sèti°ics
(
tdm_devi˚_h™dÀ
,&
tdi_hdlc_°©s
);

445 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_Devicestatistics");

446 
	`¥ötf
("rx_‰ame† : %d\n", (
WP_U32
)
tdi_hdlc_°©s
.
rx_‰ames
);

447 
	`¥ötf
("tx_‰ame† : %d\n", (
WP_U32
)
tdi_hdlc_°©s
.
tx_‰ames
);

448 
	`¥ötf
("rx_îr_¸¯ : %d\n", (
WP_U32
)
tdi_hdlc_°©s
.
rx_îr_¸c
);

449 
	`¥ötf
("rx_îr_ab‹à : %d\n", (
WP_U32
)
tdi_hdlc_°©s
.
rx_îr_ab‹t
);

450 
	`¥ötf
("rx_îr_addr_mism©ch : %d\n", (
WP_U32
)
tdi_hdlc_°©s
.
rx_îr_addr_mism©ch
);

451 
	`¥ötf
("rx_îr_buf„r_ovîru¿ : %d\n", (
WP_U32
)
tdi_hdlc_°©s
.
rx_îr_buf„r_ovîrun
);

452 
	`¥ötf
("rx_îr_ovîru¿ : %d\n", (
WP_U32
)
tdi_hdlc_°©s
.
rx_îr_ovîrun
);

453 
	`¥ötf
("rx_îr_iw_buf„r_undîru¿ : %d\n", (
WP_U32
)
tdi_hdlc_°©s
.
rx_îr_iw_buf„r_undîrun
);

454 
	`¥ötf
("rx_îr_iw_mru : %d\n", (
WP_U32
)
tdi_hdlc_°©s
.
rx_îr_iw_mru
);

455 
	`¥ötf
("tx_îr_undîru¿ : %d\n", (
WP_U32
)
tdi_hdlc_°©s
.
tx_îr_undîrun
);

456 
	`¥ötf
("rx_îr_maxsdu : %d\n", (
WP_U32
)
tdi_hdlc_°©s
.
rx_îr_maxsdu
);

457 
	`¥ötf
("rx_iw_‰ame† : %d\n", (
WP_U32
)
tdi_hdlc_°©s
.
rx_iw_‰ames
);

458 
	`¥ötf
("rx_îr_n⁄_o˘ë : %d\n", (
WP_U32
)
tdi_hdlc_°©s
.
rx_îr_n⁄_o˘ë
);

459 
	`¥ötf
("rx_byã† : %d\n", (
WP_U32
)
tdi_hdlc_°©s
.
rx_byãs
);

460 
	`¥ötf
("rx_îr_byã† : %d\n", (
WP_U32
)
tdi_hdlc_°©s
.
rx_îr_byãs
);

461 
	`¥ötf
("tx_byã† : %d\n", (
WP_U32
)
tdi_hdlc_°©s
.
tx_byãs
);

462 
	`¥ötf
("rx_îr_iw_l2_∑r£ : %d\n", (
WP_U32
)
tdi_hdlc_°©s
.
rx_îr_iw_l2_∑r£
);

463 
	}
}

466 
	sp‹t_°©
 {

467 
WP_U64
 
	mrx_∑ckës
;

468 
WP_U64
 
	mtx_∑ckës
;

469 }
	tp‹t_°©
;

471 
p‹t_°©
 
	gp‹ts
[2];

480 
	$Aµ_ShowTdmAtmDevi˚Sèts
(
WP_h™dÀ
 
tdm_devi˚_h™dÀ
, 
WP_°©s_tdi_©m
 
tdi_©m_°©s
)

482 
	`mem£t
(&
tdi_©m_°©s
,0,(
WP_°©s_tdi_©m
));

483 
°©us
 = 
	`WP_Devi˚Sèti°ics
(
tdm_devi˚_h™dÀ
,&
tdi_©m_°©s
);

484 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_Devicestatistics");

486 i‡(
tdi_©m_°©s
.
rx_îr_hec
)

487 
	`¥ötf
("Ñx_îr_he¯ : %d\n", (
WP_U32
)
tdi_©m_°©s
.
rx_îr_hec
);

488 i‡(
tdi_©m_°©s
.
rx_îr_addr_mism©ch
)

489 
	`¥ötf
("Ñx_îr_addr_mism©ch : %d\n", (
WP_U32
)
tdi_©m_°©s
.
rx_îr_addr_mism©ch
);

490 i‡(
tdi_©m_°©s
.
rx_îr_ovîrun
)

491 
	`¥ötf
("Ñx_îr_ovîru¿ : %d\n", (
WP_U32
)
tdi_©m_°©s
.
rx_îr_ovîrun
);

492 i‡(
tdi_©m_°©s
.
rx_out_of_sync
)

493 
	`¥ötf
("Ñx_out_of_syn¯ : %d\n", (
WP_U32
)
tdi_©m_°©s
.
rx_out_of_sync
);

494 i‡(
tdi_©m_°©s
.
rx_íãr_sync
)

495 
	`¥ötf
("Ñx_íãr_syn¯ : %d\n\n", (
WP_U32
)
tdi_©m_°©s
.
rx_íãr_sync
);

496 i‡(
tdi_©m_°©s
.
å™s_rx_îr_ovîrun
)

497 
	`¥ötf
("Åøns_rx_îr_ovîru¿ : %d\n", (
WP_U32
)
tdi_©m_°©s
.
å™s_rx_îr_ovîrun
);

498 i‡(
tdi_©m_°©s
.
å™s_tx_îr_undîrun
)

499 
	`¥ötf
("Åøns_tx_îr_undîru¿ : %d\n", (
WP_U32
)
tdi_©m_°©s
.
å™s_tx_îr_undîrun
);

500 i‡(
tdi_©m_°©s
.
rx_sync_°©e
)

501 
	`¥ötf
("Ñx_sync_°©ê : %d\n\n", (
WP_U32
)
tdi_©m_°©s
.
rx_sync_°©e
);

502 i‡(
tdi_©m_°©s
.
ext_°©s
.
rx_˚Œs
)

504 
	`¥ötf
("Ñx_˚Œ† : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
rx_˚Œs
);

505 i‡(
tdi_©m_°©s
.
ext_°©s
.
rx_œ°_unknown_addr
)

506 
	`¥ötf
("Ñx_œ°_unknown_add∏ : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
rx_œ°_unknown_addr
);

507 i‡(
tdi_©m_°©s
.
ext_°©s
.
rx_˛p1_˚Œs
)

508 
	`¥ötf
("Ñx_˛p1_˚Œ† : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
rx_˛p1_˚Œs
);

509 i‡(
tdi_©m_°©s
.
ext_°©s
.
rx_gfc_˚Œs
)

510 
	`¥ötf
("Ñx_gfc_˚Œ† : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
rx_gfc_˚Œs
);

511 i‡(
tdi_©m_°©s
.
ext_°©s
.
tx_˚Œs
)

512 
	`¥ötf
("Åx_˚Œ† : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
tx_˚Œs
);

513 i‡(
tdi_©m_°©s
.
ext_°©s
.
tx_˛p1_˚Œs
)

514 
	`¥ötf
("Åx_˛p1_˚Œ† : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
tx_˛p1_˚Œs
);

515 i‡(
tdi_©m_°©s
.
ext_°©s
.
tx_efci_˚Œs
)

516 
	`¥ötf
("Åx_efci_˚Œ† : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
tx_efci_˚Œs
);

517 i‡(
tdi_©m_°©s
.
ext_°©s
.
rx_ﬂm_˚Œs
)

518 
	`¥ötf
("Ñx_ﬂm_˚Œ† : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
rx_ﬂm_˚Œs
);

519 i‡(
tdi_©m_°©s
.
ext_°©s
.
rx_rm_˚Œs
)

520 
	`¥ötf
("Ñx_rm_˚Œ† : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
rx_rm_˚Œs
);

521 i‡(
tdi_©m_°©s
.
ext_°©s
.
tx_ﬂm_˚Œs
)

522 
	`¥ötf
("Åx_ﬂm_˚Œ† : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
tx_ﬂm_˚Œs
);

523 i‡(
tdi_©m_°©s
.
ext_°©s
.
tx_rm_˚Œs
)

524 
	`¥ötf
("Åx_rm_˚Œ† : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
tx_rm_˚Œs
);

525 i‡(
tdi_©m_°©s
.
ext_°©s
.
rx_efci_˚Œs
)

526 
	`¥ötf
("Ñx_efci_˚Œ† : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
rx_efci_˚Œs
);

527 i‡(
tdi_©m_°©s
.
ext_°©s
.
tx_idÀ_˚Œs
)

528 
	`¥ötf
("Åx_idÀ_˚Œ† : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
tx_idÀ_˚Œs
);

529 i‡(
tdi_©m_°©s
.
ext_°©s
.
rx_˛p0_˚Œs
)

530 
	`¥ötf
("Ñx_˛p0_˚Œ† : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
rx_˛p0_˚Œs
);

531 i‡(
tdi_©m_°©s
.
ext_°©s
.
tx_˛p0_˚Œs
)

532 
	`¥ötf
("Åx_˛p0_˚Œ† : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
tx_˛p0_˚Œs
);

533 i‡(
tdi_©m_°©s
.
ext_°©s
.
rx_¸c_îr_˚Œs
)

534 
	`¥ötf
("Ñx_¸c_îr_˚Œ† : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
rx_¸c_îr_˚Œs
);

535 i‡(
tdi_©m_°©s
.
ext_°©s
.
rx_unsuµ‹ãd_˚Œs
)

536 
	`¥ötf
("Ñx_unsuµ‹ãd_˚Œ† : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
rx_unsuµ‹ãd_˚Œs
);

537 i‡(
tdi_©m_°©s
.
ext_°©s
.
Øl5_rx_‰ame_cou¡î
)

538 
	`¥ötf
("áÆ5_rx_‰ame_cou¡î : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
Øl5_rx_‰ame_cou¡î
);

539 i‡(
tdi_©m_°©s
.
ext_°©s
.
Øl5_rx_byãs_cou¡î
)

540 
	`¥ötf
("áÆ5_rx_byãs_cou¡î : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
Øl5_rx_byãs_cou¡î
);

541 i‡(
tdi_©m_°©s
.
ext_°©s
.
Øl5_tx_‰ame_cou¡î
)

542 
	`¥ötf
(" 64áÆ5_tx_‰ame_cou¡î: %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
Øl5_tx_‰ame_cou¡î
);

543 i‡(
tdi_©m_°©s
.
ext_°©s
.
Øl5_tx_byãs_cou¡î
)

544 
	`¥ötf
("áÆ5_tx_byãs_cou¡î : %d\n", (
WP_U32
)
tdi_©m_°©s
.
ext_°©s
.
Øl5_tx_byãs_cou¡î
);

546 
	}
}

556 
	$Aµ_ShowBridgeP‹tSèts
(
WP_h™dÀ
 
bp‹t_h™dÀ
, 
WP_bp‹t_°©s
 
bp‹t_°©s
)

558 
	`mem£t
(&
bp‹t_°©s
, 0, (bport_stats));

559 
°©us
 = 
	`WP_IwP‹tSèti°ics
(
bp‹t_h™dÀ
, &
bp‹t_°©s
);

560 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_BportStatistics");

561 i‡(
bp‹t_°©s
.
rx_vÆid_∑ckës
)

562 
	`¥ötf
("rx_vÆid_∑ckë† : %d\n",(
WP_U32
)
bp‹t_°©s
.
rx_vÆid_∑ckës
);

563 i‡(
bp‹t_°©s
.
disˇrd_vœn_ac˚±abÀ_fûãr
)

564 
	`¥ötf
("disˇrd_vœn_ac˚±abÀ_fûã∏ : %d\n",(
WP_U32
)
bp‹t_°©s
.
disˇrd_vœn_ac˚±abÀ_fûãr
);

565 i‡(
bp‹t_°©s
.
disˇrd_ögªss_fûãr
)

566 
	`¥ötf
("disˇrd_ögªss_fûã∏ : %d\n",(
WP_U32
)
bp‹t_°©s
.
disˇrd_ögªss_fûãr
);

567 i‡(
bp‹t_°©s
.
disˇrd_bridge_˛assifõr
)

568 
	`¥ötf
("disˇrd_bridge_˛assifõ∏ : %d\n",(
WP_U32
)
bp‹t_°©s
.
disˇrd_bridge_˛assifõr
);

569 i‡(
bp‹t_°©s
.
disˇrd_unk_macß
)

570 
	`¥ötf
("disˇrd_unk_macß : %d\n",(
WP_U32
)
bp‹t_°©s
.
disˇrd_unk_macß
);

571 i‡(
bp‹t_°©s
.
díy_mac_ß
)

572 
	`¥ötf
("díy_mac_ß : %d\n",(
WP_U32
)
bp‹t_°©s
.
díy_mac_ß
);

573 i‡(
bp‹t_°©s
.
díy_mac_da
)

574 
	`¥ötf
("díy_mac_d® : %d\n\n",(
WP_U32
)
bp‹t_°©s
.
díy_mac_da
);

575 i‡(
bp‹t_°©s
.
rx_bc_vÆid_∑ckës
)

576 
	`¥ötf
("rx_bc_vÆid_∑ckë† : %d\n",(
WP_U32
)
bp‹t_°©s
.
rx_bc_vÆid_∑ckës
);

577 i‡(
bp‹t_°©s
.
rx_mc_vÆid_∑ckës
)

578 
	`¥ötf
("rx_mc_vÆid_∑ckë† : %d\n",(
WP_U32
)
bp‹t_°©s
.
rx_mc_vÆid_∑ckës
);

579 i‡(
bp‹t_°©s
.
f‹w¨ded_uc_∑ckës
)

580 
	`¥ötf
("f‹w¨ded_uc_∑ckë† : %d\n",(
WP_U32
)
bp‹t_°©s
.
f‹w¨ded_uc_∑ckës
);

581 i‡(
bp‹t_°©s
.
f‹w¨ded_bc_∑ckës
)

582 
	`¥ötf
("f‹w¨ded_bc_∑ckë† : %d\n",(
WP_U32
)
bp‹t_°©s
.
f‹w¨ded_bc_∑ckës
);

583 i‡(
bp‹t_°©s
.
f‹w¨ded_mc_∑ckës
)

584 
	`¥ötf
("f‹w¨ded_mc_∑ckë† : %d\n",(
WP_U32
)
bp‹t_°©s
.
f‹w¨ded_mc_∑ckës
);

585 i‡(
bp‹t_°©s
.
¥Ÿocﬁ_îr‹
)

586 
	`¥ötf
("¥Ÿocﬁ_îr‹ : %d\n",(
WP_U32
)
bp‹t_°©s
.
¥Ÿocﬁ_îr‹
);

587 i‡(
bp‹t_°©s
.
ªs_mc_mac_díy
)

588 
	`¥ötf
("ªs_mc_mac_díy : %d\n",(
WP_U32
)
bp‹t_°©s
.
ªs_mc_mac_díy
);

589 i‡(
bp‹t_°©s
.
disˇrd_dfc_fûãr
[0] )

590 
	`¥ötf
("disˇrd_dfc_fûãr[0] : %d\n",(
WP_U32
)
bp‹t_°©s
.
disˇrd_dfc_fûãr
[0] );

591 i‡(
bp‹t_°©s
.
díy_cfm_‰ames
)

592 
	`¥ötf
("díy_cfm_‰ame† : %d\n\n",(
WP_U32
)
bp‹t_°©s
.
díy_cfm_‰ames
);

593 i‡(
bp‹t_°©s
.
bad_ù_vîsi⁄
)

594 
	`¥ötf
("bad_ù_vîsi⁄ : %d\n",(
WP_U32
)
bp‹t_°©s
.
bad_ù_vîsi⁄
);

595 i‡(
bp‹t_°©s
.
checksum_îr‹
)

596 
	`¥ötf
("checksum_îr‹ : %d\n",(
WP_U32
)
bp‹t_°©s
.
checksum_îr‹
);

597 i‡(
bp‹t_°©s
.
ù_¥Ÿocﬁ_îr‹
)

598 
	`¥ötf
("ù_¥Ÿocﬁ_îr‹ : %d\n",(
WP_U32
)
bp‹t_°©s
.
ù_¥Ÿocﬁ_îr‹
);

599 i‡(
bp‹t_°©s
.
disˇrd_p˚_fûãr
[0] )

600 
	`¥ötf
("disˇrd_p˚_fûãr[0] : %d\n",(
WP_U32
)
bp‹t_°©s
.
disˇrd_p˚_fûãr
[0] );

601 i‡(
bp‹t_°©s
.
ögªss_pﬁi˚r_n⁄_c⁄f‹mög_∑ckës
)

602 
	`¥ötf
("ögªss_pﬁi˚r_n⁄_c⁄f‹mög_∑ckë†: %d\n",(
WP_U32
)
bp‹t_°©s
.
ögªss_pﬁi˚r_n⁄_c⁄f‹mög_∑ckës
);

603 i‡(
bp‹t_°©s
.
rx_disˇrd_Õm
)

604 
	`¥ötf
("rx_disˇrd_Õm : %d\n",(
WP_U32
)
bp‹t_°©s
.
rx_disˇrd_Õm
);

605 i‡(
bp‹t_°©s
.
iw_múr‹_fbp_undîrun
)

606 
	`¥ötf
("iw_múr‹_fbp_undîru¿ : %d\n",(
WP_U32
)
bp‹t_°©s
.
iw_múr‹_fbp_undîrun
);

607 i‡(
bp‹t_°©s
.
iw_múr‹_iwbg_fbp_undîrun
)

608 
	`¥ötf
("iw_múr‹_iwbg_fbp_undîru¿ : %d\n",(
WP_U32
)
bp‹t_°©s
.
iw_múr‹_iwbg_fbp_undîrun
);

609 
	}
}

617 
	$Aµ_ShowFlowAggSèts
(
WP_h™dÀ
 
Êow_agg_h™dÀ
, 
WP_iw_Êow_°©s
 
Êow_°©s
)

619 
	`mem£t
(&
Êow_°©s
,0,(flow_stats));

620 
°©us
 = 
	`WP_IwFlowSèti°ics
(
Êow_agg_h™dÀ
,
WP_IW_FLOW_STAT
,&
Êow_°©s
);

621 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_IwFlowStatistics");

623 i‡(
Êow_°©s
.
f‹w¨d_∑ckë
)

624 
	`¥ötf
("F‹w¨d Packë : %d\n",(
WP_U32
)
Êow_°©s
.
f‹w¨d_∑ckë
);

625 i‡(
Êow_°©s
.
fbp_dr›_∑ckës
)

626 
	`¥ötf
("FBP Dr› Packë† : %d\n",(
WP_U32
)
Êow_°©s
.
fbp_dr›_∑ckës
);

627 i‡(
Êow_°©s
.
mtu_dr›_∑ckës
)

628 
	`¥ötf
("MTU Dr› Packë† : %d\n",(
WP_U32
)
Êow_°©s
.
mtu_dr›_∑ckës
);

629 i‡(
Êow_°©s
.
âl_dr›_∑ckës
)

630 
	`¥ötf
("TTL Dr› Packë† : %d\n",(
WP_U32
)
Êow_°©s
.
âl_dr›_∑ckës
);

631 i‡(
Êow_°©s
.
tx_queue_dr›_∑ckës
)

632 
	`¥ötf
("TX QueuêDr› Packë† : %d\n",(
WP_U32
)
Êow_°©s
.
tx_queue_dr›_∑ckës
);

633 i‡(
Êow_°©s
.
m∂s_dr›
)

634 
	`¥ötf
("MPLS Dr› : %d\n",(
WP_U32
)
Êow_°©s
.
m∂s_dr›
);

635 i‡(
Êow_°©s
.
díõd_∑ckës
)

636 
	`¥ötf
("Díõd Packë† : %d\n",(
WP_U32
)
Êow_°©s
.
díõd_∑ckës
);

637 i‡(
Êow_°©s
.
group_fûãªd_∑ckës
)

638 
	`¥ötf
("Grou∞Fûãªd Packë† : %d\n",(
WP_U32
)
Êow_°©s
.
group_fûãªd_∑ckës
);

639 i‡(
Êow_°©s
.
f‹w¨ded_byãs
)

640 
	`¥ötf
("F‹w¨ded Byã† : %d\n",(
WP_U32
)
Êow_°©s
.
f‹w¨ded_byãs
);

641 i‡(
Êow_°©s
.
gç_bad_hódîs
)

642 
	`¥ötf
("Gç Bad Hódî† : %d\n",(
WP_U32
)
Êow_°©s
.
gç_bad_hódîs
);

643 i‡(
Êow_°©s
.
pﬁi˚r_n⁄_c⁄f‹mög_∑ckës
)

644 
	`¥ötf
("Bad Pﬁi˚∏Packë† : %d\n",(
WP_U32
)
Êow_°©s
.
pﬁi˚r_n⁄_c⁄f‹mög_∑ckës
);

645 i‡(
Êow_°©s
.
cfm_mac_ö_mac_dr›
)

646 
	`¥ötf
("cfm_mac_ö_mac_dr› : %d\n",(
WP_U32
)
Êow_°©s
.
cfm_mac_ö_mac_dr›
);

647 i‡(
Êow_°©s
.
out_of_£quí˚_∑ckës
)

648 
	`¥ötf
("out_of_£quí˚_∑ckë† : %d\n",(
WP_U32
)
Êow_°©s
.
out_of_£quí˚_∑ckës
);

649 i‡(
Êow_°©s
.
pwe_swôchovî_evíts
)

650 
	`¥ötf
("pwe_swôchovî_evít† : %d\n",(
WP_U32
)
Êow_°©s
.
pwe_swôchovî_evíts
);

651 i‡(
Êow_°©s
.
n⁄_zîo_£q_num
)

652 
	`¥ötf
("n⁄_zîo_£q_num : %d\n",(
WP_U32
)
Êow_°©s
.
n⁄_zîo_£q_num
);

653 
	}
}

661 
	$Aµ_ShowPwe3FlowAggSèts
(
WP_h™dÀ
 
Êow_agg_h™dÀ
, 
WP_iw_pwe3_°©s
 
Êow_°©s
)

663 
	`mem£t
(&
Êow_°©s
,0,(
WP_iw_pwe3_°©s
));

664 
°©us
 = 
	`WP_IwFlowSèti°ics
(
Êow_agg_h™dÀ
,
WP_IW_FLOW_STAT
,&
Êow_°©s
);

665 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_IwFlowStatistics");

667 i‡(
Êow_°©s
.
f‹w¨ded_∑ckës
)

668 
	`¥ötf
("f‹w¨ded_∑ckë† : %d\n",(
WP_U32
)
Êow_°©s
.
f‹w¨ded_∑ckës
);

669 i‡(
Êow_°©s
.
f‹w¨ded_byãs
)

670 
	`¥ötf
("f‹w¨ded_byã† : %d\n",(
WP_U32
)
Êow_°©s
.
f‹w¨ded_byãs
);

671 i‡(
Êow_°©s
.
fbp_dr›_∑ckës
)

672 
	`¥ötf
("fbp_dr›_∑ckë† : %d\n",(
WP_U32
)
Êow_°©s
.
fbp_dr›_∑ckës
);

673 i‡(
Êow_°©s
.
mtu_dr›_∑ckës
)

674 
	`¥ötf
("mtu_dr›_∑ckë† : %d\n",(
WP_U32
)
Êow_°©s
.
mtu_dr›_∑ckës
);

675 i‡(
Êow_°©s
.
âl_dr›_∑ckës
)

676 
	`¥ötf
("âl_dr›_∑ckë† : %d\n\n",(
WP_U32
)
Êow_°©s
.
âl_dr›_∑ckës
);

677 i‡(
Êow_°©s
.
tx_queue_dr›_∑ckës
)

678 
	`¥ötf
("tx_queue_dr›_∑ckë† : %d\n",(
WP_U32
)
Êow_°©s
.
tx_queue_dr›_∑ckës
);

679 i‡(
Êow_°©s
.
m∂s_dr›_∑ckës
)

680 
	`¥ötf
("m∂s_dr›_∑ckë† : %d\n",(
WP_U32
)
Êow_°©s
.
m∂s_dr›_∑ckës
);

681 i‡(
Êow_°©s
.
díõd_∑ckës
)

682 
	`¥ötf
("díõd_∑ckë† : %d\n",(
WP_U32
)
Êow_°©s
.
díõd_∑ckës
);

683 i‡(
Êow_°©s
.
out_of_£q_∑ckës
)

684 
	`¥ötf
("out_of_£q_∑ckë† : %d\n",(
WP_U32
)
Êow_°©s
.
out_of_£q_∑ckës
);

685 i‡(
Êow_°©s
.
n⁄_zîo_¢_∑ckës
)

686 
	`¥ötf
("n⁄_zîo_¢_∑ckë† : %d\n",(
WP_U32
)
Êow_°©s
.
n⁄_zîo_¢_∑ckës
);

687 i‡(
Êow_°©s
.
pﬁi˚r_n⁄_c⁄f‹mög_∑ckës
)

688 
	`¥ötf
("pﬁi˚r_n⁄_c⁄f‹mög_∑ckë† : %d\n",(
WP_U32
)
Êow_°©s
.
pﬁi˚r_n⁄_c⁄f‹mög_∑ckës
);

689 i‡(
Êow_°©s
.
swôchovî_evíts
)

690 
	`¥ötf
("swôchovî_evít† : %d\n",(
WP_U32
)
Êow_°©s
.
swôchovî_evíts
);

691 i‡(
Êow_°©s
.
hash_Áû_˚Œs
)

692 
	`¥ötf
("hash_Áû_˚Œ† : %d\n",(
WP_U32
)
Êow_°©s
.
hash_Áû_˚Œs
);

693 
	}
}

701 
	$Aµ_AtmTxCh™√lSèts
(
WP_h™dÀ
 
©m_tx_ch_h™dÀ
, 
WP_°©s_Øl5_tx
 
©m_tx_ch™√l_°©s
)

703 
	`mem£t
(&
©m_tx_ch™√l_°©s
,0,(
WP_°©s_Øl5_tx
));

704 
°©us
 = 
	`WP_Ch™√lSèti°ics
(
©m_tx_ch_h™dÀ
,&
©m_tx_ch™√l_°©s
);

705 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_ChannelStatistics");

707 i‡(
©m_tx_ch™√l_°©s
.
tx_‰ames
)

708 
	`¥ötf
("tx_‰ame† : %d\n",(
WP_U32
)
©m_tx_ch™√l_°©s
.
tx_‰ames
);

709 i‡(
©m_tx_ch™√l_°©s
.
tx_˛p0_˚Œs
)

710 
	`¥ötf
("tx_˛p0_˚Œ† : %d\n",(
WP_U32
)
©m_tx_ch™√l_°©s
.
tx_˛p0_˚Œs
);

711 i‡(
©m_tx_ch™√l_°©s
.
tx_˛p1_˚Œs
)

712 
	`¥ötf
("tx_˛p1_˚Œ† : %d\n",(
WP_U32
)
©m_tx_ch™√l_°©s
.
tx_˛p1_˚Œs
);

713 i‡(
©m_tx_ch™√l_°©s
.
tx_byãs
)

714 
	`¥ötf
("tx_byã† : %d\n",(
WP_U32
)
©m_tx_ch™√l_°©s
.
tx_byãs
);

715 i‡(
©m_tx_ch™√l_°©s
.
tx_˛p1_‰ames
)

716 
	`¥ötf
("tx_˛p1_‰ame† : %d\n\n",(
WP_U32
)
©m_tx_ch™√l_°©s
.
tx_˛p1_‰ames
);

717 i‡(
©m_tx_ch™√l_°©s
.
tx_ﬂm_cc_˚Œs
)

718 
	`¥ötf
("tx_ﬂm_cc_˚Œ† : %d\n",(
WP_U32
)
©m_tx_ch™√l_°©s
.
tx_ﬂm_cc_˚Œs
);

719 i‡(
©m_tx_ch™√l_°©s
.
tx_ﬂm_ais_˚Œs
)

720 
	`¥ötf
("tx_ﬂm_ais_˚Œ† : %d\n",(
WP_U32
)
©m_tx_ch™√l_°©s
.
tx_ﬂm_ais_˚Œs
);

721 i‡(
©m_tx_ch™√l_°©s
.
tx_ﬂm_rdi_˚Œs
)

722 
	`¥ötf
("tx_ﬂm_rdi_˚Œ† : %d\n",(
WP_U32
)
©m_tx_ch™√l_°©s
.
tx_ﬂm_rdi_˚Œs
);

723 
	}
}

732 
	$Aµ_AtmRxCh™√lSèts
(
WP_h™dÀ
 
©m_rx_ch_h™dÀ
, 
WP_°©s_Øl5_rx
 
©m_rx_ch™√l_°©s
)

734 
	`mem£t
(&
©m_rx_ch™√l_°©s
,0,(
WP_°©s_Øl5_tx
));

735 
°©us
 = 
	`WP_Ch™√lSèti°ics
(
©m_rx_ch_h™dÀ
,&
©m_rx_ch™√l_°©s
);

736 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_ChannelStatistics");

738 i‡(
©m_rx_ch™√l_°©s
.
rx_‰ames
)

739 
	`¥ötf
("Ñx_‰ame† : %d\n",(
WP_U32
)
©m_rx_ch™√l_°©s
.
rx_‰ames
);

740 i‡(
©m_rx_ch™√l_°©s
.
ab‹ãd_‰ames
)

741 
	`¥ötf
("áb‹ãd_‰ame† : %d\n",(
WP_U32
)
©m_rx_ch™√l_°©s
.
ab‹ãd_‰ames
);

742 i‡(
©m_rx_ch™√l_°©s
.
îr_¸c
)

743 
	`¥ötf
("Éº_¸¯ : %d\n",(
WP_U32
)
©m_rx_ch™√l_°©s
.
îr_¸c
);

744 i‡(
©m_rx_ch™√l_°©s
.
îr_size
)

745 
	`¥ötf
("Éº_sizê : %d\n",(
WP_U32
)
©m_rx_ch™√l_°©s
.
îr_size
);

746 i‡(
©m_rx_ch™√l_°©s
.
îr_undîÊow
)

747 
	`¥ötf
("Éº_undîÊow : %d\n",(
WP_U32
)
©m_rx_ch™√l_°©s
.
îr_undîÊow
);

748 i‡(
©m_rx_ch™√l_°©s
.
îr_maxsdu
)

749 
	`¥ötf
("Éº_maxsdu : %d\n",(
WP_U32
)
©m_rx_ch™√l_°©s
.
îr_maxsdu
);

750 i‡(
©m_rx_ch™√l_°©s
.
îr_iw_undîrun
)

751 
	`¥ötf
("Éº_iw_undîru¿ : %d\n",(
WP_U32
)
©m_rx_ch™√l_°©s
.
îr_iw_undîrun
);

752 i‡(
©m_rx_ch™√l_°©s
.
îr_iw_maxmru
)

753 
	`¥ötf
("Éº_iw_maxmru : %d\n",(
WP_U32
)
©m_rx_ch™√l_°©s
.
îr_iw_maxmru
);

754 i‡(
©m_rx_ch™√l_°©s
.
îr_˝i
)

755 
	`¥ötf
("Éº_˝ò : %d\n",(
WP_U32
)
©m_rx_ch™√l_°©s
.
îr_˝i
);

756 i‡(
©m_rx_ch™√l_°©s
.
˛p_‰ames
)

757 
	`¥ötf
(" cÕ_‰ame† : %d\n",(
WP_U32
)
©m_rx_ch™√l_°©s
.
˛p_‰ames
);

758 i‡(
©m_rx_ch™√l_°©s
.
l3_iw_‰ames
)

759 
	`¥ötf
("Ü3_iw_‰ame† : %d\n",(
WP_U32
)
©m_rx_ch™√l_°©s
.
l3_iw_‰ames
);

760 i‡(
©m_rx_ch™√l_°©s
.
îr_øs_timeout
)

761 
	`¥ötf
("Éº_øs_timeouà : %d\n",(
WP_U32
)
©m_rx_ch™√l_°©s
.
îr_øs_timeout
);

762 i‡(
©m_rx_ch™√l_°©s
.
rx_˛p0_˚Œs
)

763 
	`¥ötf
("Ñx_˛p0_˚Œ† : %d\n",(
WP_U32
)
©m_rx_ch™√l_°©s
.
rx_˛p0_˚Œs
);

764 i‡(
©m_rx_ch™√l_°©s
.
rx_byãs
)

765 
	`¥ötf
("Ñx_byã† : %d\n",(
WP_U32
)
©m_rx_ch™√l_°©s
.
rx_byãs
);

766 i‡(
©m_rx_ch™√l_°©s
.
rx_˛p1_˚Œs
)

767 
	`¥ötf
("Ñx_˛p1_˚Œ† : %d\n",(
WP_U32
)
©m_rx_ch™√l_°©s
.
rx_˛p1_˚Œs
);

769 
	}
}

771 
	gimass
[64];

772 * 
	$ima_„_s
 (
n
)

774 
	`mem£t
 (
imass
, 0, 64);

775 
n
)

777 
WP_IMA_FE_GSM_START_UP
:

778 
	`•rötf
 (
imass
, "%s", "WP_IMA_FE_GSM_START_UP");

780 
WP_IMA_FE_GSM_START_UP_ACK
:

781 
	`•rötf
 (
imass
, "%s", "WP_IMA_FE_GSM_START_UP_ACK");

783 
WP_IMA_FE_GSM_CONFIG_ABORTED_M
:

784 
	`•rötf
 (
imass
, "%s", "WP_IMA_FE_GSM_CONFIG_ABORTED");

786 
WP_IMA_FE_GSM_INSUFFICIENT
:

787 
	`•rötf
 (
imass
, "%s", "WP_IMA_FE_GSM_INSUFFICIENT");

789 
WP_IMA_FE_GSM_BLOCKED
:

790 
	`•rötf
 (
imass
, "%s", "WP_IMA_FE_GSM_BLOCKED");

792 
WP_IMA_FE_GSM_OPERATIONAL
:

793 
	`•rötf
 (
imass
, "%s", "WP_IMA_FE_GSM_OPERATIONAL");

795 
WP_IMA_NO_ICP_RECEIVED
:

796 
	`•rötf
 (
imass
, "%s", "WP_IMA_NO_ICP_RECEIVED");

799 
	`•rötf
 (
imass
, "%s", "WP_IMA_FE_GSM_UNKOWN_STATE");

803  
imass
;

804 
	}
}

805 * 
	$ima_s
 (
n
)

807 
	`mem£t
 (
imass
, 0, 64);

808 
n
)

810 
WP_IMA_GSM_START_UP
:

811 
	`•rötf
 (
imass
, "%s", "WP_IMA_GSM_START_UP");

813 
WP_IMA_GSM_START_UP_ACK
:

814 
	`•rötf
 (
imass
, "%s", "WP_IMA_GSM_START_UP_ACK");

816 
WP_IMA_GSM_CONFIG_ABORTED
:

817 
	`•rötf
 (
imass
, "%s", "WP_IMA_GSM_CONFIG_ABORTED");

819 
WP_IMA_GSM_INSUFFICIENT
:

820 
	`•rötf
 (
imass
, "%s", "WP_IMA_GSM_INSUFFICIENT");

822 
WP_IMA_GSM_BLOCKED
:

823 
	`•rötf
 (
imass
, "%s", "WP_IMA_GSM_BLOCKED");

825 
WP_IMA_GSM_OPERATIONAL
:

826 
	`•rötf
 (
imass
, "%s", "WP_IMA_GSM_OPERATIONAL");

828 
WP_IMA_GSM_NOT_CONFIGURED
:

829 
	`•rötf
 (
imass
, "%s", "WP_IMA_GSM_NOT_CONFIGURED");

831 
WP_IMA_GSM_NUM_STATES
:

832 
	`•rötf
 (
imass
, "%s", "WP_IMA_GSM_NUM_STATES");

835 
	`•rötf
 (
imass
, "%s", "WP_IMA_GSM_UNKOWN_STATE");

839  
imass
;

840 
	}
}

849 
	$Aµ_ShowImaGroupSèts
()

851 
WP_U32
 
ii
;

852 
WP_°©us
 
°©us
;

853 
WP_ima_group_°©i°ics
 
ima_group_°©i°ics
;

855 
	`mem£t
(&
ima_group_°©i°ics
, 0, (
WP_ima_group_°©i°ics
));

856 
ii
=0;ii<
NUM_OF_GROUPS
;ii++)

858 
°©us
 = 
	`WP_ImaGroupSèti°ics
(
ima_group_h™dÀ
[
ii
] , &
ima_group_°©i°ics
);

859 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_ImaGroupStatistics");

860 
	`¥ötf
("-------------------------------\n");

861 
	`¥ötf
(" IMA Group[%d] sètisic† \n",
ii
);

862 
	`¥ötf
("-------------------------------\n");

863 i‡(
ima_group_°©i°ics
.
Áûuªs_√
)

864 
	`¥ötf
("Áûuªs_√ : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
Áûuªs_√
);

865 i‡(
ima_group_°©i°ics
.
Áûuªs_„
)

866 
	`¥ötf
("Áûuªs_„ : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
Áûuªs_„
);

867 i‡(
ima_group_°©i°ics
.
rx_îr_addr_mism©ch
)

868 
	`¥ötf
("rx_îr_addr_mism©ch : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
rx_îr_addr_mism©ch
);

869 i‡(
ima_group_°©i°ics
.
ru¬ög_£c⁄ds
)

870 
	`¥ötf
("ru¬ög_£c⁄d† : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ru¬ög_£c⁄ds
);

871 i‡(
ima_group_°©i°ics
.
u«vaûabÀ_£c⁄ds
)

872 
	`¥ötf
("u«vaûabÀ_£c⁄d† : %d\n\n", (
WP_U32
)
ima_group_°©i°ics
.
u«vaûabÀ_£c⁄ds
);

874 
	`¥ötf
("\nEXTENDED GROUP STATISTICS\n");

875 
	`¥ötf
("-------------------------------\n");

876 i‡(
ima_group_°©i°ics
.
ext_°©s
.
rx_˚Œs
)

877 
	`¥ötf
("ext_°©s.rx_˚Œ† : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
rx_˚Œs
);

878 i‡(
ima_group_°©i°ics
.
ext_°©s
.
rx_œ°_unknown_addr
)

879 
	`¥ötf
("ext_°©s.rx_œ°_unknown_add∏ : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
rx_œ°_unknown_addr
);

880 i‡(
ima_group_°©i°ics
.
ext_°©s
.
rx_˛p1_˚Œs
)

881 
	`¥ötf
("ext_°©s.rx_˛p1_˚Œ† : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
rx_˛p1_˚Œs
);

882 i‡(
ima_group_°©i°ics
.
ext_°©s
.
rx_gfc_˚Œs
)

883 
	`¥ötf
("ext_°©s.rx_gfc_˚Œ† : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
rx_gfc_˚Œs
);

884 i‡(
ima_group_°©i°ics
.
ext_°©s
.
tx_˚Œs
)

885 
	`¥ötf
("ext_°©s.tx_˚Œ† : %d\n\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
tx_˚Œs
);

886 i‡(
ima_group_°©i°ics
.
ext_°©s
.
tx_˛p1_˚Œs
)

887 
	`¥ötf
("ext_°©s.tx_˛p1_˚Œ† : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
tx_˛p1_˚Œs
);

888 i‡(
ima_group_°©i°ics
.
ext_°©s
.
tx_efci_˚Œs
)

889 
	`¥ötf
("ext_°©s.tx_efci_˚Œ† : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
tx_efci_˚Œs
);

890 i‡(
ima_group_°©i°ics
.
ext_°©s
.
rx_ﬂm_˚Œs
)

891 
	`¥ötf
("ext_°©s.rx_ﬂm_˚Œ† : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
rx_ﬂm_˚Œs
);

892 i‡(
ima_group_°©i°ics
.
ext_°©s
.
rx_rm_˚Œs
)

893 
	`¥ötf
("ext_°©s.rx_rm_˚Œ† : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
rx_rm_˚Œs
);

894 i‡(
ima_group_°©i°ics
.
ext_°©s
.
tx_ﬂm_˚Œs
)

895 
	`¥ötf
("ext_°©s.tx_ﬂm_˚Œ† : %d\n\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
tx_ﬂm_˚Œs
);

896 i‡(
ima_group_°©i°ics
.
ext_°©s
.
tx_rm_˚Œs
)

897 
	`¥ötf
("ext_°©s.tx_rm_˚Œ† : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
tx_rm_˚Œs
);

898 i‡(
ima_group_°©i°ics
.
ext_°©s
.
rx_efci_˚Œs
)

899 
	`¥ötf
("ext_°©s.rx_efci_˚Œ† : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
rx_efci_˚Œs
);

900 i‡(
ima_group_°©i°ics
.
ext_°©s
.
tx_idÀ_˚Œs
)

901 
	`¥ötf
("ext_°©s.tx_idÀ_˚Œ† : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
tx_idÀ_˚Œs
);

902 i‡(
ima_group_°©i°ics
.
ext_°©s
.
rx_˛p0_˚Œs
)

903 
	`¥ötf
("ext_°©s.rx_˛p0_˚Œ† : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
rx_˛p0_˚Œs
);

904 i‡(
ima_group_°©i°ics
.
ext_°©s
.
tx_˛p0_˚Œs
)

905 
	`¥ötf
("ext_°©s.tx_˛p0_˚Œ† : %d\n\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
tx_˛p0_˚Œs
);

906 i‡(
ima_group_°©i°ics
.
ext_°©s
.
rx_¸c_îr_˚Œs
)

907 
	`¥ötf
("ext_°©s.rx_¸c_îr_˚Œ† : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
rx_¸c_îr_˚Œs
);

908 i‡(
ima_group_°©i°ics
.
ext_°©s
.
rx_unsuµ‹ãd_˚Œs
)

909 
	`¥ötf
("ext_°©s.rx_unsuµ‹ãd_˚Œ† : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
rx_unsuµ‹ãd_˚Œs
);

910 i‡(
ima_group_°©i°ics
.
ext_°©s
.
Øl5_rx_‰ame_cou¡î
)

911 
	`¥ötf
("ext_°©s.Øl5_rx_‰ame_cou¡î : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
Øl5_rx_‰ame_cou¡î
);

912 i‡(
ima_group_°©i°ics
.
ext_°©s
.
Øl5_rx_byãs_cou¡î
)

913 
	`¥ötf
("ext_°©s.Øl5_rx_byãs_cou¡î : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
Øl5_rx_byãs_cou¡î
);

914 i‡(
ima_group_°©i°ics
.
ext_°©s
.
Øl5_tx_‰ame_cou¡î
)

915 
	`¥ötf
("ext_°©s.Øl5_tx_‰ame_cou¡î : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
Øl5_tx_‰ame_cou¡î
);

916 i‡(
ima_group_°©i°ics
.
ext_°©s
.
Øl5_tx_byãs_cou¡î
)

917 
	`¥ötf
("ext_°©s.Øl5_tx_byãs_cou¡î : %d\n", (
WP_U32
)
ima_group_°©i°ics
.
ext_°©s
.
Øl5_tx_byãs_cou¡î
);

921 
	}
}

923 
	glökss
[64];

924 *
	$lök_s
(
n
)

926 
n
)

928 
WP_IMA_LSM_NOT_IN_GROUP
:

929 
	`•rötf
 (
lökss
, "%s", "NOT_IN_GROUP");

931 
WP_IMA_LSM_UNUSABLE
:

932 
	`•rötf
 (
lökss
, "%s", "UNUSABLE");

934 
WP_IMA_LSM_FAULT
:

935 
	`•rötf
 (
lökss
, "%s", "FAULT");

937 
WP_IMA_LSM_MIS_CONNECTED
:

938 
	`•rötf
 (
lökss
, "%s", "MIS_CONNECTED");

940 
WP_IMA_LSM_INHIBITED
:

941 
	`•rötf
 (
lökss
, "%s", "INHIBITED");

943 
WP_IMA_LSM_FAILED
:

944 
	`•rötf
 (
lökss
, "%s", "FAILED");

946 
WP_IMA_LSM_USABLE
:

947 
	`•rötf
 (
lökss
, "%s", "USABLE");

949 
WP_IMA_LSM_ACTIVE
:

950 
	`•rötf
 (
lökss
, "%s", "ACTIVE");

952 
WP_IMA_LSM_UNKNOWN
:

953 
	`•rötf
 (
lökss
, "%s", "UNKNOWN");

955 
WP_IMA_LSM_NUM_STATES
:

956 
	`•rötf
 (
lökss
, "%s", "NUM_STATES");

959 
	`•rötf
 (
lökss
, "%s", "XXXXXXXXXXXXXXXXXX");

964  
lökss
;

965 
	}
}

968 
WP_CHAR
 *
	gŒöe_°©e
[] = {

985 
	$Aµ_ShowImaLökSèts
()

987 
WP_U32
 
ii
;

988 
WP_°©us
 
°©us
;

989 
WP_ima_lök_°©i°ics
 
ima_lök_°©i°ics
;

991 
	`mem£t
(&
ima_lök_°©i°ics
, 0, (
WP_ima_lök_°©i°ics
));

992 
ii
=0;ii<
NUM_OF_LINKS
;ii++)

994 
°©us
 = 
	`WP_ImaLökSèti°ics
(
ima_lök_h™dÀ
[
ii
] , &
ima_lök_°©i°ics
);

995 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_ImaLinkStatistics");

996 
	`¥ötf
("-------------------------------\n");

997 
	`¥ötf
(" IMA Lök[%d] sètisic† \n",
ii
);

998 
	`¥ötf
("-------------------------------\n");

999 i‡(
ima_lök_°©i°ics
.
rx_i˝_˚Œs
)

1000 
	`¥ötf
("rx_i˝_˚Œ† : %d\n", 
ima_lök_°©i°ics
.
rx_i˝_˚Œs
);

1001 i‡(
ima_lök_°©i°ics
.
rx_îr_i˝_˚Œs
)

1002 
	`¥ötf
("rx_îr_i˝_˚Œ† : %d\n", 
ima_lök_°©i°ics
.
rx_îr_i˝_˚Œs
);

1003 i‡(
ima_lök_°©i°ics
.
rx_lods
)

1004 
	`¥ötf
("rx_lod† : %d\n", 
ima_lök_°©i°ics
.
rx_lods
);

1005 i‡(
ima_lök_°©i°ics
.
rx_i˝_viﬁ©i⁄s
)

1006 
	`¥ötf
("rx_i˝_viﬁ©i⁄† : %d\n\n", 
ima_lök_°©i°ics
.
rx_i˝_viﬁ©i⁄s
);

1007 i‡(
ima_lök_°©i°ics
.
rx_°uff
)

1008 
	`¥ötf
("rx_°uf‡ : %d\n", 
ima_lök_°©i°ics
.
rx_°uff
);

1009 i‡(
ima_lök_°©i°ics
.
rx_√_£s
)

1010 
	`¥ötf
("rx_√_£† : %d\n", 
ima_lök_°©i°ics
.
rx_√_£s
);

1011 i‡(
ima_lök_°©i°ics
.
rx_√_uas
)

1012 
	`¥ötf
("rx_√_ua† : %d\n", 
ima_lök_°©i°ics
.
rx_√_uas
);

1013 i‡(
ima_lök_°©i°ics
.
rx_√_uus
)

1014 
	`¥ötf
("rx_√_uu† : %d\n", 
ima_lök_°©i°ics
.
rx_√_uus
);

1015 i‡(
ima_lök_°©i°ics
.
rx_√_Áûuª
)

1016 
	`¥ötf
("rx_√_Áûuª : %d\n\n", 
ima_lök_°©i°ics
.
rx_√_Áûuª
);

1017 i‡(
ima_lök_°©i°ics
.
rx_„_de„˘s
)

1018 
	`¥ötf
("rx_„_de„˘† : %d\n", 
ima_lök_°©i°ics
.
rx_„_de„˘s
);

1019 i‡(
ima_lök_°©i°ics
.
rx_„_Áûuª
)

1020 
	`¥ötf
("rx_„_Áûuª : %d\n", 
ima_lök_°©i°ics
.
rx_„_Áûuª
);

1021 i‡(
ima_lök_°©i°ics
.
rx_„_uus
)

1022 
	`¥ötf
("rx_„_uu† : %d\n", 
ima_lök_°©i°ics
.
rx_„_uus
);

1023 i‡(
ima_lök_°©i°ics
.
rx_„_£s
)

1024 
	`¥ötf
("rx_„_£† : %d\n", 
ima_lök_°©i°ics
.
rx_„_£s
);

1025 i‡(
ima_lök_°©i°ics
.
rx_„_uas
)

1026 
	`¥ötf
("rx_„_ua† : %d\n\n", 
ima_lök_°©i°ics
.
rx_„_uas
);

1027 i‡(
ima_lök_°©i°ics
.
tx_i˝_˚Œs
)

1028 
	`¥ötf
("tx_i˝_˚Œ† : %d\n", 
ima_lök_°©i°ics
.
tx_i˝_˚Œs
);

1029 i‡(
ima_lök_°©i°ics
.
tx_°uff
)

1030 
	`¥ötf
("tx_°uf‡ : %d\n", 
ima_lök_°©i°ics
.
tx_°uff
);

1031 i‡(
ima_lök_°©i°ics
.
tx_√_uus
)

1032 
	`¥ötf
("tx_√_uu† : %d\n", 
ima_lök_°©i°ics
.
tx_√_uus
);

1033 i‡(
ima_lök_°©i°ics
.
tx_„_uus
)

1034 
	`¥ötf
("tx_„_uu† : %d\n", 
ima_lök_°©i°ics
.
tx_„_uus
);

1035 i‡(
ima_lök_°©i°ics
.
tx_„_Áûuª
)

1036 
	`¥ötf
("tx_„_Áûuª : %d\n", 
ima_lök_°©i°ics
.
tx_„_Áûuª
);

1037 i‡(
ima_lök_°©i°ics
.
tx_√_Áûuª
)

1038 
	`¥ötf
("tx_√_Áûuª : %d\n\n", 
ima_lök_°©i°ics
.
tx_√_Áûuª
);

1040 
	`¥ötf
("tx_icp_cells-rx_icp_cells[%d][%%%d]\n",

1041 
ima_lök_°©i°ics
.
tx_i˝_˚Œs
 - ima_lök_°©i°ics.
rx_i˝_˚Œs
,

1042 100 * (
ima_lök_°©i°ics
.
tx_i˝_˚Œs
 - ima_lök_°©i°ics.
rx_i˝_˚Œs
) / ima_link_statistics.tx_icp_cells

1047 
	}
}

1056 
	$Aµ_CheckSèts
(
WP_°©us
 *
ã°_ªsu…
)

1059 
WP_°©us
 
°©us
;

1060 
WP_°©s_íë
 
s_hs_íë
={0};

1061 
WP_°©s_tdi_©m
 
tdi_©m_°©s
={0};

1062 
WP_bp‹t_°©s
 
bp‹t_°©s
 = {0};

1063 
WP_iw_Êow_°©s
 
Êow_°©s
 = {0};

1064 
WP_iw_pwe3_°©s
 
pwe3_Êow_°©s
 = {0};

1065 
WP_°©s_Øl5_tx
 
©m_tx_ch™√l_°©s
 = {0};

1066 
WP_°©s_Øl5_rx
 
©m_rx_ch™√l_°©s
 = {0};

1067 
WP_ima_group_°©i°ics
 
ima_group_°©i°ics
 = {0};

1068 
WP_ima_lök_°©i°ics
 
ima_lök_°©i°ics
 = {0};

1069 
WP_U32
 
°©s_sum1
 = 0, 
°©s_sum2
 = 0;

1070 
WP_U8
 
ii
;

1072 *
ã°_ªsu…
 = 
WP_OK
;

1075 
	`mem£t
(&
s_hs_íë
,0,(s_hs_enet));

1076 
°©us
 = 
	`WP_Devi˚Sèti°ics
(
h_devi˚_íë1
, &
s_hs_íë
);

1077 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_DeviceStatistics");

1079 i‡(
s_hs_íë
.
txrx_‰ames_127
 !
APP_MAX_PKTS_NUM
 * 2){

1080 *
ã°_ªsu…
 = (-1);

1081 
	`¥ötf
("ENET1Åxrx_frames_64 check fail!\n");

1084 i‡(
s_hs_íë
.
rx_∑ckës
 !
APP_MAX_PKTS_NUM
){

1085 *
ã°_ªsu…
 = (-1);

1086 
	`¥ötf
("ENET1Ñx_packets check fail!\n");

1089 i‡(
s_hs_íë
.
tx_∑ckës
 !
APP_MAX_PKTS_NUM
){

1090 *
ã°_ªsu…
 = (-1);

1091 
	`¥ötf
("ENET1Åx_packets check fail!\n");

1094 i‡(
s_hs_íë
.
rx_îr_fcs
 || s_hs_íë.
rx_îr_Æignmít
 ||

1095 
s_hs_íë
.
rx_îr_Àngth
 || s_hs_íë.
rx_îr_code
 ||

1096 
s_hs_íë
.
rx_Ál£_ˇºõr
 || s_hs_íë.
rx_undîsize
 ||

1097 
s_hs_íë
.
rx_ovîsize
 || s_hs_íë.
rx_dr›≥d
 ||

1098 
s_hs_íë
.
tx_dr›≥d
 || s_hs_íë.
tx_îr_fcs
 ||

1099 
s_hs_íë
.
tx_ovîsize
 || s_hs_íë.
tx_undîsize
 ||

1100 
s_hs_íë
.
rx_îr_ho°_fuŒ
 || s_hs_íë.
rx_îr_fbp_undîrun
 ||

1101 
s_hs_íë
.
rx_îr_n⁄vÆid_mac
 || s_hs_íë.
rx_îr_mru
 ||

1102 
s_hs_íë
.
rx_îr_sdu
 || s_hs_íë.
tx_îr_undîrun
 ||

1103 
s_hs_íë
.
rx_îr_ovîrun
)

1105 *
ã°_ªsu…
 = (-1);

1106 
	`¥ötf
("ENET1Érror check fail!\n");

1110 
	`mem£t
(&
s_hs_íë
,0,(s_hs_enet));

1111 
°©us
 = 
	`WP_Devi˚Sèti°ics
(
h_devi˚_íë2
, &
s_hs_íë
);

1112 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_DeviceStatistics");

1114 i‡(
s_hs_íë
.
txrx_‰ames_127
 !
APP_MAX_PKTS_NUM
 * 2){

1115 *
ã°_ªsu…
 = (-1);

1116 
	`¥ötf
("ENET2Åxrx_frames_64 check fail!\n");

1119 i‡(
s_hs_íë
.
rx_∑ckës
 !
APP_MAX_PKTS_NUM
){

1120 *
ã°_ªsu…
 = (-1);

1121 
	`¥ötf
("ENET2Ñx_packets check fail!\n");

1124 i‡(
s_hs_íë
.
tx_∑ckës
 !
APP_MAX_PKTS_NUM
){

1125 *
ã°_ªsu…
 = (-1);

1126 
	`¥ötf
("ENET2Åx_packets check fail!\n");

1130 i‡(
s_hs_íë
.
rx_îr_fcs
 || s_hs_íë.
rx_îr_Æignmít
 ||

1131 
s_hs_íë
.
rx_îr_Àngth
 || s_hs_íë.
rx_îr_code
 ||

1132 
s_hs_íë
.
rx_Ál£_ˇºõr
 || s_hs_íë.
rx_undîsize
 ||

1133 
s_hs_íë
.
rx_ovîsize
 || s_hs_íë.
rx_dr›≥d
 ||

1134 
s_hs_íë
.
tx_dr›≥d
 || s_hs_íë.
tx_îr_fcs
 ||

1135 
s_hs_íë
.
tx_ovîsize
 || s_hs_íë.
tx_undîsize
 ||

1136 
s_hs_íë
.
rx_îr_ho°_fuŒ
 || s_hs_íë.
rx_îr_fbp_undîrun
 ||

1137 
s_hs_íë
.
rx_îr_n⁄vÆid_mac
 || s_hs_íë.
rx_îr_mru
 ||

1138 
s_hs_íë
.
rx_îr_sdu
 || s_hs_íë.
tx_îr_undîrun
 ||

1139 
s_hs_íë
.
rx_îr_ovîrun
)

1141 *
ã°_ªsu…
 = (-1);

1142 
	`¥ötf
("ENET2Érror check fail!\n");

1146 
°©s_sum1
 = 0;

1148 
ii
 = 0;iò< 
APP_MAX_TDM_PORTS
;ii++)

1150 
	`mem£t
(&
tdi_©m_°©s
,0,(
WP_°©s_tdi_©m
));

1151 
°©us
 = 
	`WP_Devi˚Sèti°ics
(
h_dev_ima
[
ii
],&
tdi_©m_°©s
);

1152 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_Devicestatistics");

1154 
°©s_sum1
 +
tdi_©m_°©s
.
ext_°©s
.
Øl5_rx_‰ame_cou¡î
;

1157 i‡(
tdi_©m_°©s
.
rx_îr_hec
 ||Ådi_©m_°©s.
rx_îr_addr_mism©ch
 ||

1158 
tdi_©m_°©s
.
rx_îr_ovîrun
 ||Ådi_©m_°©s.
å™s_rx_îr_ovîrun
 ||

1159 
tdi_©m_°©s
.
å™s_tx_îr_undîrun
 ||Ådi_©m_°©s.
ext_°©s
.
rx_¸c_îr_˚Œs
 ||

1160 
tdi_©m_°©s
.
ext_°©s
.
rx_unsuµ‹ãd_˚Œs


1163 *
ã°_ªsu…
 = (-1);

1164 
	`¥ötf
("TDM devi˚ %dÉº‹ check faû!\n", 
ii
);

1169 i‡(
°©s_sum1
 == 0)

1171 *
ã°_ªsu…
 = (-1);

1172 
	`¥ötf
("IMA deviceáal5_rx_frame_counter check fail!\n");

1176 
	`mem£t
(&
bp‹t_°©s
, 0, (bport_stats));

1177 
°©us
 = 
	`WP_IwP‹tSèti°ics
(
h_bridge1_bp‹t_íë1
, &
bp‹t_°©s
);

1178 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_BportStatistics");

1180 i‡(
bp‹t_°©s
.
rx_vÆid_∑ckës
 !
APP_MAX_PKTS_NUM
){

1181 *
ã°_ªsu…
 = (-1);

1182 
	`¥ötf
("ENET1 bportÑx_valid_packets check fail!\n");

1185 i‡(
bp‹t_°©s
.
¥Ÿocﬁ_îr‹
 || bp‹t_°©s.
bad_ù_vîsi⁄
 ||

1186 
bp‹t_°©s
.
checksum_îr‹
 || bp‹t_°©s.
ù_¥Ÿocﬁ_îr‹
)

1188 *
ã°_ªsu…
 = (-1);

1189 
	`¥ötf
("ENET1 bportÉrror check fail!\n");

1193 
	`mem£t
(&
Êow_°©s
,0,(flow_stats));

1194 
°©us
 = 
	`WP_IwFlowSèti°ics
(
h_Êow_agg_å™s_bridge_egªss
[0],
WP_IW_FLOW_STAT
,&
Êow_°©s
);

1195 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_IwFlowStatistics");

1197 i‡(
Êow_°©s
.
f‹w¨d_∑ckë
 !
APP_MAX_PKTS_NUM
){

1198 *
ã°_ªsu…
 = (-1);

1199 
	`¥ötf
("IMAÅøn†bridgêegªs†0 f‹w¨d_∑ckë check faû(%d)!\n", 
ii
);

1202 i‡(
Êow_°©s
.
fbp_dr›_∑ckës
 || flow_°©s.
mtu_dr›_∑ckës
 ||

1203 
Êow_°©s
.
âl_dr›_∑ckës
 || flow_°©s.
tx_queue_dr›_∑ckës
 ||

1204 
Êow_°©s
.
m∂s_dr›
 || flow_°©s.
díõd_∑ckës
 ||

1205 
Êow_°©s
.
gç_bad_hódîs
 || flow_°©s.
cfm_mac_ö_mac_dr›
 ||

1206 
Êow_°©s
.
out_of_£quí˚_∑ckës
)

1208 *
ã°_ªsu…
 = (-1);

1209 
	`¥ötf
("IMAÅrans bridgeÉgress flowágg 0Érror check fail!\n");

1212 
	`mem£t
(&
Êow_°©s
,0,(flow_stats));

1213 
°©us
 = 
	`WP_IwFlowSèti°ics
(
h_Êow_agg_å™s_bridge_egªss
[1],
WP_IW_FLOW_STAT
,&
Êow_°©s
);

1214 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_IwFlowStatistics");

1216 i‡(
Êow_°©s
.
f‹w¨d_∑ckë
 != 0){

1217 *
ã°_ªsu…
 = (-1);

1218 
	`¥ötf
("IMAÅøn†bridgêegªs†1 f‹w¨d_∑ckë check faû(%d)!\n", 
ii
);

1221 i‡(
Êow_°©s
.
fbp_dr›_∑ckës
 || flow_°©s.
mtu_dr›_∑ckës
 ||

1222 
Êow_°©s
.
âl_dr›_∑ckës
 || flow_°©s.
tx_queue_dr›_∑ckës
 ||

1223 
Êow_°©s
.
m∂s_dr›
 || flow_°©s.
díõd_∑ckës
 ||

1224 
Êow_°©s
.
gç_bad_hódîs
 || flow_°©s.
cfm_mac_ö_mac_dr›
 ||

1225 
Êow_°©s
.
out_of_£quí˚_∑ckës
)

1227 *
ã°_ªsu…
 = (-1);

1228 
	`¥ötf
("IMAÅrans bridgeÉgress flowágg 1Érror check fail!\n");

1232 
	`mem£t
(&
pwe3_Êow_°©s
,0,(
WP_iw_pwe3_°©s
));

1233 
°©us
 = 
	`WP_IwFlowSèti°ics
(
h_Êow_agg_pwe3_©m_ögªss
[0],
WP_IW_FLOW_STAT
,&
pwe3_Êow_°©s
);

1234 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_IwFlowStatistics");

1236 i‡(
pwe3_Êow_°©s
.
f‹w¨ded_∑ckës
 !
APP_MAX_PKTS_NUM
){

1237 *
ã°_ªsu…
 = (-1);

1238 
	`¥ötf
("IMA PWE3 ingªs†Êowágg f‹w¨ded_∑ckë†check faû(%d)!\n", 
ii
);

1241 i‡(
pwe3_Êow_°©s
.
fbp_dr›_∑ckës
 ||Öwe3_Êow_°©s.
mtu_dr›_∑ckës
 ||

1242 
pwe3_Êow_°©s
.
âl_dr›_∑ckës
 ||Öwe3_Êow_°©s.
tx_queue_dr›_∑ckës
 ||

1243 
pwe3_Êow_°©s
.
m∂s_dr›_∑ckës
 ||Öwe3_Êow_°©s.
díõd_∑ckës
 ||

1244 
pwe3_Êow_°©s
.
hash_Áû_˚Œs
)

1246 *
ã°_ªsu…
 = (-1);

1247 
	`¥ötf
("IMA PWE3 ingress flowággÉrror check fail!\n");

1250 
°©s_sum1
 = 0;

1251 
°©s_sum2
 = 0;

1253 
	`mem£t
(&
©m_tx_ch™√l_°©s
,0,(
WP_°©s_Øl5_tx
));

1254 
°©us
 = 
	`WP_Ch™√lSèti°ics
(
ima_tx_ch_h™dÀ
[0],&
©m_tx_ch™√l_°©s
);

1255 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_ChannelStatistics");

1257 
°©s_sum1
 +
©m_tx_ch™√l_°©s
.
tx_‰ames
;

1258 
°©s_sum2
 +
©m_tx_ch™√l_°©s
.
tx_˛p0_˚Œs
;

1260 
	`mem£t
(&
©m_tx_ch™√l_°©s
,0,(
WP_°©s_Øl5_tx
));

1261 
°©us
 = 
	`WP_Ch™√lSèti°ics
(
ima_tx_ch_h™dÀ
[1],&
©m_tx_ch™√l_°©s
);

1262 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_ChannelStatistics");

1264 
°©s_sum1
 +
©m_tx_ch™√l_°©s
.
tx_‰ames
;

1265 
°©s_sum2
 +
©m_tx_ch™√l_°©s
.
tx_˛p0_˚Œs
;

1267 i‡(
°©s_sum1
 == 0){

1268 *
ã°_ªsu…
 = (-1);

1269 
	`¥ötf
("ATM TX ChannelÅx_frames check fail!\n");

1271 i‡(
°©s_sum2
 == 0){

1272 *
ã°_ªsu…
 = (-1);

1273 
	`¥ötf
("ATM TX ChannelÅx_clp0_cells check fail!\n");

1277 
	`mem£t
(&
©m_rx_ch™√l_°©s
,0,(
WP_°©s_Øl5_rx
));

1278 
°©us
 = 
	`WP_Ch™√lSèti°ics
(
ima_rx_ch_h™dÀ
[0],&
©m_rx_ch™√l_°©s
);

1279 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_ChannelStatistics");

1281 i‡(
©m_rx_ch™√l_°©s
.
l3_iw_‰ames
 !
APP_MAX_PKTS_NUM
){

1282 *
ã°_ªsu…
 = (-1);

1283 
	`¥ötf
("ATM RX ChannelÜ3_iw_frames check fail!\n");

1286 i‡(
©m_rx_ch™√l_°©s
.
rx_˛p0_˚Œs
 == 0){

1287 *
ã°_ªsu…
 = (-1);

1288 
	`¥ötf
("ATM RX ChannelÑx_clp0_cells check fail!\n");

1291 i‡(
©m_rx_ch™√l_°©s
.
îr_¸c
 ||átm_rx_ch™√l_°©s.
îr_size
 ||

1292 
©m_rx_ch™√l_°©s
.
îr_undîÊow
 ||átm_rx_ch™√l_°©s.
îr_maxsdu
 ||

1293 
©m_rx_ch™√l_°©s
.
îr_iw_undîrun
 ||átm_rx_ch™√l_°©s.
îr_iw_maxmru
 ||

1294 
©m_rx_ch™√l_°©s
.
îr_˝i
 ||átm_rx_ch™√l_°©s.
îr_øs_timeout


1297 *
ã°_ªsu…
 = (-1);

1298 
	`¥ötf
("ATM RX ChannelÉrror check fail!\n");

1302 
	`mem£t
(&
ima_group_°©i°ics
, 0, (
WP_ima_group_°©i°ics
));

1303 
°©us
 = 
	`WP_ImaGroupSèti°ics
(
ima_group_h™dÀ
[0] , &
ima_group_°©i°ics
);

1304 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_ImaGroupStatistics");

1323 i‡(
ima_group_°©i°ics
.
ext_°©s
.
rx_¸c_îr_˚Œs
 || ima_group_°©i°ics.ext_°©s.
rx_unsuµ‹ãd_˚Œs


1326 *
ã°_ªsu…
 = (-1);

1327 
	`¥ötf
("IMA group 0Érror check fail!\n");

1331 
ii
 = 0; iò< 
NUM_OF_LINKS
; ii ++)

1333 
	`mem£t
(&
ima_lök_°©i°ics
, 0, (
WP_ima_lök_°©i°ics
));

1334 
°©us
 = 
	`WP_ImaLökSèti°ics
(
ima_lök_h™dÀ
[
ii
] , &
ima_lök_°©i°ics
);

1335 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_ImaLinkStatistics");

1337 i‡(
ima_lök_°©i°ics
.
rx_i˝_˚Œs
 == 0){

1338 *
ã°_ªsu…
 = (-1);

1339 
	`¥ötf
("IMA grou∞%dÑx_i˝_˚Œ†check faû!\n", 
ii
);

1341 i‡(
ima_lök_°©i°ics
.
rx_°uff
 == 0){

1342 *
ã°_ªsu…
 = (-1);

1343 
	`¥ötf
("IMA grou∞%dÑx_°uf‡check faû!\n", 
ii
);

1345 i‡(
ima_lök_°©i°ics
.
tx_i˝_˚Œs
 == 0){

1346 *
ã°_ªsu…
 = (-1);

1347 
	`¥ötf
("IMA grou∞%dÅx_i˝_˚Œ†check faû!\n", 
ii
);

1349 i‡(
ima_lök_°©i°ics
.
tx_°uff
 == 0){

1350 *
ã°_ªsu…
 = (-1);

1351 
	`¥ötf
("IMA grou∞%dÅx_°uf‡check faû!\n", 
ii
);

1365 i‡(*
ã°_ªsu…
 !
WP_OK
)

1367 
	`¥ötf
("-------------------------------\n");

1368 
	`¥ötf
(" ENET1 statisics \n");

1369 
	`¥ötf
("-------------------------------\n");

1370 
	`Aµ_ShowE√tDevi˚Sèts
(
h_devi˚_íë1
, &
s_hs_íë
);

1371 
	`¥ötf
("-------------------------------\n");

1372 
	`¥ötf
(" ENET2 statisics \n");

1373 
	`¥ötf
("-------------------------------\n");

1374 
	`Aµ_ShowE√tDevi˚Sèts
(
h_devi˚_íë2
, &
s_hs_íë
);

1375 
ii
 = 0;iò< 
APP_MAX_TDM_PORTS
;ii++)

1377 
	`¥ötf
("-------------------------------\n");

1378 
	`¥ötf
(" Devi˚ sètisic†IMA %d \n",
ii
);

1379 
	`¥ötf
("-------------------------------\n");

1380 
	`Aµ_ShowTdmAtmDevi˚Sèts
(
h_dev_ima
[
ii
], 
tdi_©m_°©s
);

1382 
	`¥ötf
("-------------------------------\n");

1383 
	`¥ötf
("Bridge Port Statistics ENET1 \n");

1384 
	`¥ötf
("-------------------------------\n");

1385 
	`Aµ_ShowBridgeP‹tSèts
(
h_bridge1_bp‹t_íë1
, 
bp‹t_°©s
);

1386 
ii
 = 0;iò< 
MAX_ATM_TX_CHANNEL
;ii++)

1388 
	`¥ötf
("---------------------------------------------------\n");

1389 
	`¥ötf
(" Flow sèti°ic†IMA h_Êow_agg_å™s_bridge_egªss[%d] \n",
ii
);

1390 
	`¥ötf
("---------------------------------------------------\n");

1391 
	`Aµ_ShowFlowAggSèts
(
h_Êow_agg_å™s_bridge_egªss
[
ii
], 
Êow_°©s
);

1393 
	`¥ötf
("----------------------------------------------------\n");

1394 
	`¥ötf
(" Flow statistics IMA h_flow_agg_pwe3_atm_ingress[0] \n");

1395 
	`¥ötf
("----------------------------------------------------\n");

1396 
	`Aµ_ShowPwe3FlowAggSèts
(
h_Êow_agg_pwe3_©m_ögªss
[0], 
pwe3_Êow_°©s
);

1398 
ii
=0;ii<
MAX_ATM_TX_CHANNEL
;ii++)

1400 
	`¥ötf
("-------------------------------\n");

1401 
	`¥ötf
(" Ch™√»Sèti°ic†ATM Tx [%d] \n",
ii
);

1402 
	`¥ötf
("-------------------------------\n");

1403 
	`Aµ_AtmTxCh™√lSèts
(
ima_tx_ch_h™dÀ
[
ii
], 
©m_tx_ch™√l_°©s
);

1406 
ii
=0;ii<
NUM_OF_GROUPS
;ii++)

1408 
	`¥ötf
("-------------------------------\n");

1409 
	`¥ötf
(" Ch™√»Sèti°ic†ATM Rx [%d] \n",
ii
);

1410 
	`¥ötf
("-------------------------------\n");

1411 
	`Aµ_AtmRxCh™√lSèts
(
ima_rx_ch_h™dÀ
[
ii
], 
©m_rx_ch™√l_°©s
);

1414 
	`Aµ_ShowImaGroupSèts
();

1415 
	`Aµ_ShowImaLökSèts
();

1418 
	}
}

	@atm_ima_ufe_util.c

27 
Aµ_Tîmö©eOnEº‹X
 (
WP_h™dÀ
 
h™dÀ
, 
WP_CHAR
 *
s
, *
fûe
, 
löe
);

28 
	#Aµ_Tîmö©eOnEº‹
(
h™dÀ
,
s
Ë
	`Aµ_Tîmö©eOnEº‹X
(h™dÀ,s,
__FILE__
,
__LINE__
)

	)

31 
	$Aµ_D©aSíd
(
WP_h™dÀ
 
h_tx
, WP_h™dÀ 
h_poﬁ
)

33 
	#APP_DATA_LENGTH
 20

	)

35 
WP_d©a_unô
 
d©a_unô
 = {0} ;

36 
WP_d©a_£gmít
 
bufs
 = {0};

37 
WP_°©us
 
°©us
;

38 
WP_U8
 * 
km_d©a_±r
;

39 
WP_U32
 
ii
;

40 
WP_U8
 
d°_mac
[6] = {0x00,0x00,0x00,0x00,0x00,0x0a};

41 
WP_U8
 
§c_mac
[6] = {0x00,0x00,0x00,0x00,0x00,0x02};

42 
WP_U8
 
m∂s_hódî
[4] = {0x00,0x01,0x31,0x64};

44 
WP_U8
 
e_ty≥
[2] = {0x88,0x47};

45 
WP_U32
 
l2_hódî_Àn
 = (
d°_mac
Ë+ (
§c_mac
Ë+ (
m∂s_hódî
) +

46 (
e_ty≥
);

47 
WP_U32
 
ù_hódî_Àn
 = 20;

48 
WP_U32
 
∑ylﬂd_Àn
;

49 
WP_U32
 
off£t
;

51 
bufs
.
buf„r_˛ass
 = 0;

52 
bufs
.
di•œ˚mít
 = 0;

53 
bufs
.
u£r_öfo
 = 0;

54 
bufs
.
√xt
 = 
NULL
;

55 
bufs
.
poﬁ_h™dÀ
 = 
h_poﬁ
;

56 
bufs
.
d©a_size
 = 
APP_DATA_LENGTH
;

59 
d©a_unô
.
ty≥
 = 
WP_DATA_ENET
;

61 
d©a_unô
.
c⁄åﬁ
 =

62 
	`WP_HT_IW_B_MODE_FIELD
(
WP_HT_IW_B_FAST_MODE
)|

63 
	`WP_HT_IW_B_VA_DEST_TYPE_FIELD
(
WP_HT_IW_B_VA_DESTINATION_FLOW_AGG
)|

65 
	`WP_HT_IW_CRC_FIELD
(0);

66 
d©a_unô
.
ty≥
 = 
WP_DATA_IW
;

68 
d©a_unô
.
n_a˘ive
 = 1;

69 
d©a_unô
.
d©a_size
 = 
bufs
.data_size;

70 
d©a_unô
.
£gmít
 = &
bufs
;

71 
d©a_unô
.
n_£gmíts
 = 1;

73 
km_d©a_±r
 = 
	`WP_PoﬁAŒoc
(
h_poﬁ
);

74 
bufs
.
d©a
 = 
km_d©a_±r
;

75 if(
bufs
.
d©a
 =
NULL
)

77 
	`¥ötf
("Pool Alloc failure ! \n");

80 
	`WP_MEM_BYTES_FILL
(
km_d©a_±r
, 
APP_DATA_LENGTH
, 
poﬁ_buf„r_d©a_iw_cfg
.
size
);

82 
off£t
 = 0;

83 
	`mem˝y
(
km_d©a_±r
 + 
off£t
,
d°_mac
,(dst_mac));

84 
off£t
 +(
d°_mac
);

85 
	`mem˝y
(
km_d©a_±r
+
off£t
,
§c_mac
,(src_mac));

86 
off£t
 +(
§c_mac
);

87 
	`mem˝y
(
km_d©a_±r
+
off£t
,
e_ty≥
,(e_type));

88 
off£t
 +(
e_ty≥
);

90 
	`mem˝y
(
km_d©a_±r
+
off£t
,
m∂s_hódî
,(mpls_header));

91 
off£t
 +(
m∂s_hódî
);

93 
∑ylﬂd_Àn
 = 
APP_DATA_LENGTH
 - 
l2_hódî_Àn
 - 
ù_hódî_Àn
;

96 
	`ö£π_ù_hódî
(0x0a0a0a0a,0xc0a8„11,
∑ylﬂd_Àn
,4,
off£t
,
km_d©a_±r
);

97 
off£t
 +
ù_hódî_Àn
;

99 
	`mem£t
(
km_d©a_±r
+
off£t
,0xa,
∑ylﬂd_Àn
);

101 
	`¥ötf
("£ndögÖackë o‡Àngth %d\n",
APP_DATA_LENGTH
);

102 
ii
 = 0;iò< 
APP_DATA_LENGTH
;ii++)

104 
	`¥ötf
("%.2x",*(
km_d©a_±r
+
ii
));

105 if((
ii
 != 0) && !(ii % 40))

106 
	`¥ötf
("\n");

108 
	`¥ötf
("\n");

110 
°©us
 = 
	`WP_Ho°Síd
(
h_tx
, &
d©a_unô
);

111 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_HostSend()");

112 
	`WP_Dñay
(500000);

114 
	`WPI_SimuœãI¡îru±s
();

115 
	}
}

123 
	$add_èsk
(
≠p_èsk_li°
 *
èsk_li°
, 
WP_U32
 
evít_ty≥
, 
WP_èg
 
evít_èg
,

124 *
evít_∑øm
)

126 
WP_U16
 
èû
 = 
èsk_li°
->tail;

127 
WP_U32
 
√xt
 = 
èû
 + 1;

129 i‡(
√xt
 =
èsk_li°
->
num_ñemíts
)

130 
√xt
 = 0;

132 i‡(
√xt
 !
èsk_li°
->
hód
) {

133 
èsk_li°
->
èsk
[
èû
].
evít_èg
 =Évent_tag;

134 
èsk_li°
->
èsk
[
èû
].
evít_ty≥
 =Évent_type;

135 
èsk_li°
->
èsk
[
èû
].
evít_∑øm
 =Évent_param;

136 
èsk_li°
->
èû
 = 
√xt
;

138 
	}
}

151 
	$ima_add_èsk
(
ima_≠p_èsk_li°
 *
èsk_li°
,

152 
WP_U32
 
d©a
,

153 
WP_U32
 
öfo
)

155 
WP_U32
 
ö
 = 
èsk_li°
->in;

156 
WP_U32
 
out
 = 
èsk_li°
->out;

157 
WP_U32
 
size
 = 
èsk_li°
->size;

158 
WP_U32
 
öp
 = 
ö
 + 1;

160 i‡(
öp
 =
size
)

161 
öp
 = 0;

162 i‡(
öp
 !
out
)

164 
èsk_li°
->
èsk
[
ö
].
d©a
 = data;

165 
èsk_li°
->
èsk
[
ö
].
öfo
 = info;

166 
èsk_li°
->
ö
 = 
öp
;

168 
	}
}

177 
≠p_èsk
 *

178 
	$√xt_èsk
(
≠p_èsk_li°
 *
èsk_li°
, 
≠p_èsk
 *
ªsu…
)

180 
WP_U32
 
hód
 = 
èsk_li°
->head;

181 
WP_U32
 
èû
 = 
èsk_li°
->tail;

183 i‡(
hód
 =
èû
)

184  
NULL
;

186 *
ªsu…
 = 
èsk_li°
->
èsk
[
hód
];

187 i‡(++
hód
 =
èsk_li°
->
num_ñemíts
)

188 
hód
 = 0;

189 
èsk_li°
->
hód
 = head;

190  
ªsu…
;

191 
	}
}

210 
WP_ima_evít
 *
	$ima_√xt_èsk
(
ima_≠p_èsk_li°
 *
èsk_li°
,

211 
WP_ima_evít
 * 
ªsu…
)

213 
WP_U32
 
ö
 = 
èsk_li°
->in;

214 
WP_U32
 
out
 = 
èsk_li°
->out;

216 i‡(
out
 !
ö
)

218 *
ªsu…
 = 
èsk_li°
->
èsk
[
out
];

219 
out
++;

220 i‡(
out
 =
èsk_li°
->
size
)

221 
out
 = 0;

222 
èsk_li°
->
out
 = out;

223  
ªsu…
;

227  
NULL
;

228 
	}
}

237 
	$≠p_≥rf‹m_a˘i⁄
(
≠p_èsk
 *
èsk
)

239 
WP_U32
 
èg
 = 
èsk
->
evít_èg
;

240 
èsk
->
evít_ty≥
)

242 
WP_EVENT_RX_INDICATE
:

244 
	`¥ötf
("RxÉvíà⁄Åag %d \n",
èg
);

245 if(
èg
 =
èg_íë1_rx
)

247 
	`¥ötf
("receiving onÉnet1\n");

248 
	`Aµ_DuRe˚ive
(
h_íë1_rx
, 
WP_DATA_ENET
);

250 if(
èg
 =
èg_íë2_rx
)

252 
	`¥ötf
("receiving onÉnet2(event catch)\n");

253 
	`Aµ_DuRe˚ive
(
h_íë2_rx
, 
WP_DATA_ENET
);

255 if(
èg
 =
èg_agg_deÁu…_bridge1
)

257 
	`¥ötf
("receiving on default bridge1\n");

258 
	`Aµ_DuRe˚ive
(
h_bridge1_iwho°
, 
WP_DATA_IW
);

260 if(
èg
 =
èg_agg_deÁu…_bridge2
)

262 
	`¥ötf
("receiving on default bridge2\n");

263 
	`Aµ_DuRe˚ive
(
h_bridge2_iwho°
, 
WP_DATA_IW
);

265 if((
èg
 >
èg_tdmrx
Ë&& (èg <èg_tdmrx + 
APP_MAX_TDM_PORTS
))

267 
	`¥ötf
("ª˚ivög o¿tdm %d\n",
èg
 - 
èg_tdmrx
);

268 
	`Aµ_DuRe˚ive
(
h_tdm_rx
[
èg
 - 
èg_tdmrx
], 
WP_DATA_PPP_HDLC
);

272 
	`¥ötf
("RXÉvíà⁄ unknow¿èg %d\n",
èg
);

276 
WP_EVENT_TX_INDICATE
:

278 
	`¥ötf
("TXÉvíà⁄Åag %d\n",
èg
);

281 
WP_EVENT_STATUS_INDICATE
:

284 
	`¥ötf
("NotÖrocessing unknownÉvent\n");

286 
	}
}

288 * 
	gima_evíts_«me
 [] = {

314 
	$ima_≠p_≥rf‹m_a˘i⁄
(
WP_ima_evít
 * 
èsk
)

316 
WP_°©us
 
°©us
;

318 
WP_U32
 
d©a
;

319 
WP_U32
 
öfo
;

320 
WP_U32
 
a˘i⁄
;

322 
WP_U32
 
p‹t
;

323 
WP_U32
 
group
;

325 
d©a
 = 
èsk
->data;

326 
öfo
 = 
èsk
->info;

327 
a˘i⁄
 = 
d©a
 & 0xff;

329 
group
 = (
d©a
 >> 16) & 0xff;

330 
p‹t
 = (
d©a
 >> 8) & 0xff;

332 
a˘i⁄
)

334 
WP_IMA_EVENT_BANDWIDTH_CHANGE
:

335 
WP_IMA_EVENT_TXQEMPTY
:

336 
WP_IMA_EVENT_TTS
:

337 
WP_IMA_EVENT_OPERATIONAL_CHANGE
:

338 
WP_IMA_EVENT_FE_ICP_CHANGE
:

339 
WP_IMA_EVENT_NE_ICP_CHANGE
:

340 
WP_IMA_EVENT_PROPRIETARY
:

341 
WP_IMA_EVENT_GSU_LASR_TX
:

342 
WP_IMA_EVENT_GSU_LASR_RX
:

343 
WP_IMA_EVENT_TOS
:

346 
WP_IMA_EVENT_TICK
:

348 
°©us
 = 
	`WP_ImaEvít
(
ima_sys_h™dÀ
, 
èsk
);

349 i‡(
°©us
)

350 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_ImaEvent()");

352 i‡(
a˘i⁄
 =
WP_IMA_EVENT_TICK
)

353 
ticks
++;

355 i‡(
a˘i⁄
 !
WP_IMA_EVENT_TICK
)

365 
	}
}

374 
	$Aµ_DuRe˚ive
(
WP_h™dÀ
 
h_rx
, 
WP_U32
 
d©a_ty≥
)

376 
WP_d©a_unô
 
d©a_unô
;

377 
WP_d©a_£gmít
 
d©a_£gmít
, *
cuº_buff_±r
;

378 
WP_U32
 
kk
;

379 
WP_°©us
 
°©us
;

381 
d©a_unô
.
£gmít
 = &
d©a_£gmít
;

382 
d©a_unô
.
n_£gmíts
 = 1;

383 
d©a_unô
.
ty≥
 = 
d©a_ty≥
;

384 
d©a_unô
.
n_a˘ive
 = 0;

386 #i‡
MORRIS_DISABLE_AGG_WHEN_RECV


387 
	`¥ötf
 ("App_DuReceive: disable flowAgg\n");

388 
	`WP_IwFlowAggªg©i⁄DißbÀ
 (
h_bridge1_deÁu…_agg
);

389 
	`WP_IwFlowAggªg©i⁄DißbÀ
 (
h_Êow_agg_tdm
[1]);

392 
°©us
 = 
	`WP_Ho°Re˚ive
(
h_rx
, &
d©a_unô
);

393 i‡(
WP_OK
 !
°©us
)

395 
	`¥ötf
 ("WP_Ho°Re˚ive:Éº‹=(%s)\n", 
WP_îr‹_«me
[
	`WP_ERROR
(
°©us
)]);

398 
	`Aµ_Tîmö©eOnEº‹
(
°©us
, "WP_HostReceive");

400 if(
d©a_unô
.
n_a˘ive
 > 0)

402 
cuº_buff_±r
 = 
d©a_unô
.
£gmít
;

403 
kk
 = 0;kk < 
cuº_buff_±r
->
d©a_size
;kk++)

405 
	`¥ötf
("%2.2x", 
cuº_buff_±r
->
d©a
[
kk
]);

407 
	`¥ötf
("–%d byã†)\n", 
cuº_buff_±r
->
d©a_size
);

409 
	}
}

411 
	$Aµ_EvítRxIndiˇã
(
WP_èg
 
èg
, 
WP_U32
 
d©a
, WP_U32 
öfo
)

413 
	`¥ötf
 ("App_EventRxIndicate called\n");

414 
	`fÊush
((
FILE
*)1);

415 
	`add_èsk
(
úq_èsk_li°
, 
WP_EVENT_RX_INDICATE
, 
èg
, 
NULL
);

416 
	}
}

418 
	$Aµ_EvítTxIndiˇã
(
WP_èg
 
èg
, 
WP_U32
 
d©a
, WP_U32 
öfo
)

420 
	`add_èsk
(
úq_èsk_li°
, 
WP_EVENT_TX_INDICATE
, 
èg
, 
NULL
);

421 
	}
}

423 
	$Aµ_EvítEº‹Indiˇã
(
WP_èg
 
èg
, 
WP_U32
 
evít
, WP_U32 
d©a
)

425 
	`add_èsk
(
úq_èsk_li°
, 
WP_EVENT_STATUS_INDICATE
, 
èg
, 
NULL
);

426 
	}
}

429 
	$Aµ_ImaEvít
(
WP_èg
 
èg
, 
WP_U32
 
d©a
, WP_U32 
öfo
)

431 
	`ima_add_èsk
(
ima_úq_èsk_li°
, 
d©a
, 
öfo
);

432 
	}
}

442 
	$di•œy_evíts
()

444 
WP_ima_evít
 
a_èsk
;

445 
WP_ima_evít
 *
èsk
;

447 
	`WPI_SimuœãI¡îru±s
();

448 (
èsk
 = 
	`ima_√xt_èsk
(
ima_úq_èsk_li°
, &
a_èsk
)))

449 
	`ima_≠p_≥rf‹m_a˘i⁄
(
èsk
);

450 
	}
}

459 
	$WT_ReboŸ
()

461 #i‡!
	`deföed
(
__löux__
)

465 i‡(
WPI_REBOOT_ENABLE
) {

466 
	`¥ötf
("Test Rebooting winmon by WT_Reboot\nWinMon>\n");

467 
	`WPX_ReboŸ
();

470 
	`¥ötf
("Not Rebooting with WT_Reboot\nWinMon>\n");

472 
	}
}

474 
	$Aµ_Quô
(
WP_U32
 
°©us
)

476 
	`WP_DrivîRñó£
();

478 i‡(
°©us
)

480 
	`WT_ReboŸ
();

483 
	`exô
(0);

484 
	}
}

492 
	$Aµ_Tîmö©eOnEº‹X
 (
WP_h™dÀ
 
h™dÀ
, 
WP_CHAR
 *
s
, *
fûe
, 
löe
)

494 i‡(
	`WPI_SimuœãI¡îru±s
(), 
	`WP_ERROR_P
(
h™dÀ
)) {

495 
	`¥ötf
("Te° Ab‹à%†%†0x%x, fûe(%sÓöe(%d)\n", 
s
, 
WP_îr‹_«me
[
	`WP_ERROR
(
h™dÀ
)], h™dÀ, 
fûe
, 
löe
);

497 
	`WP_DrivîRñó£
();

498 
	`exô
(1);

502 if(
h™dÀ
 =
WP_OK
)

503 
	`¥ötf
("Sètu†ªtu∫ed from %†: WP_OK\n",
s
);

506 i‡(
h™dÀ
 !
WP_ERR_IMA_UNKNOWN_EVENT
) {

507 
	`¥ötf
("ªtu∫ed from %†i†%#8.8x,fûe(%sÓöe(%d)\n", 
s
,
h™dÀ
, 
fûe
, 
löe
);

511 
	}
}

519 
	$Aµ_Debug
(
WP_boﬁón
 
debug
)

521 
WP_Êow_˛ass_ruÀ
 
Êow_˛ass_ruÀ
;

522 
WP_Êow_˛ass_f‹w¨dög_a˘i⁄
 
f‹w¨dög_a˘i⁄
;

524 if(
debug
)

526 
	`¥ötf
("Debug is on. Turning it OFF\n");

527 
f‹w¨dög_a˘i⁄
.
Êow_aggªg©i⁄
 = 
h_Êow_agg_tdm
[1];

528 
debug_⁄
 = 
WP_FALSE
;

532 
	`¥ötf
("Debug is off. Turning it ON\n");

533 
f‹w¨dög_a˘i⁄
.
Êow_aggªg©i⁄
 = 
h_bridge1_deÁu…_agg
;

534 
debug_⁄
 = 
WP_TRUE
;

537 
Êow_˛ass_ruÀ
.
m©ch_a˘i⁄
 = 
WP_FLOW_CLASS_MODE_FLOW_AGG
;

538 
Êow_˛ass_ruÀ
.
a˘i⁄_öfo
.
f‹w¨dög_a˘i⁄
 = forwarding_action;

539 
Êow_˛ass_ruÀ
.
wªd_íåy
 = 0;

541 
°©us
 = 
	`WP_IwFlowModify
(
h_iw_sys_bridge1
, 
h_bridge1_dfcÊow1
[0], 
WP_IW_MODIFY_WRITE_THROUGH
,

542 
WP_IW_FLOW_MOD_FLOW_AGG
, &
Êow_˛ass_ruÀ
);

543 
	`Aµ_Tîmö©eOnEº‹
(
°©us
," WP_IwFlowModify() DFC");

545 
°©us
 = 
	`WP_IwSy°emBuûd
(
h_iw_sys_bridge1
);

546 
	`Aµ_Tîmö©eOnEº‹
(
°©us
," WP_IwSystemBuild()");

547 
	}
}

556 
	$ö£π_ù_hódî
(
WP_U32
 
ù_ß
, WP_U32 
ù_da
, WP_U32 
∑ylﬂd_size
,

557 
WP_U32
 
¥Ÿocﬁ
, WP_U32 
off£t
, 
WP_U8
 *
hódî
)

559 
WP_U32
 
∑ckë_Àngth
;

560 
WP_U32
 
ãmp_sum
, 
i
;

561 
WP_U32
 
checksum
 = 0;

562 
WP_U8
 *
±r_ù_d©a
;

563 
WP_U8
 *
°¨t_ù_d©a
;

565 
±r_ù_d©a

hódî
 + 
off£t
;

566 
°¨t_ù_d©a
 = 
±r_ù_d©a
;

569 
	`mem£t
(
±r_ù_d©a
,0,
IP_HEADER_SIZE
);

572 
±r_ù_d©a
[
IP_VER_HLEN
] = 0x45;

575 
∑ckë_Àngth
 = 
∑ylﬂd_size
 + 
IP_HEADER_SIZE
;

576 
±r_ù_d©a
[
IP_LENGTH
] = (
WP_U8
)(
∑ckë_Àngth
 >> 8);

577 
±r_ù_d©a
[
IP_LENGTH
+1] = (
WP_U8
)(
∑ckë_Àngth
 & 0xff);

580 
±r_ù_d©a
[
IP_TTL
] = 64;

583 
±r_ù_d©a
[
IP_PROTOCOL
] = 
¥Ÿocﬁ
;

586 
±r_ù_d©a
[
IP_SA
] = (
WP_U8
)(
ù_ß
 >> 24);

587 
±r_ù_d©a
[
IP_SA
+1] = (
WP_U8
)(
ù_ß
 >> 16);

588 
±r_ù_d©a
[
IP_SA
+2] = (
WP_U8
)(
ù_ß
 >> 8);

589 
±r_ù_d©a
[
IP_SA
+3] = (
WP_U8
)(
ù_ß
 & 0xff);

592 
±r_ù_d©a
[
IP_DA
] = (
WP_U8
)(
ù_da
 >> 24);

593 
±r_ù_d©a
[
IP_DA
+1] = (
WP_U8
)(
ù_da
 >> 16);

594 
±r_ù_d©a
[
IP_DA
+2] = (
WP_U8
)(
ù_da
 >> 8);

595 
±r_ù_d©a
[
IP_DA
+3] = (
WP_U8
)(
ù_da
 & 0xff);

599 
±r_ù_d©a
[
IP_SER_TYPE
] = 0x00;

602 
i
=0;ò< (
IP_HEADER_SIZE
/2); i++)

604 
ãmp_sum
 = (
±r_ù_d©a
[0] << 8 |Ötr_ip_data[1]);

605 
checksum
 +
ãmp_sum
;

606 
±r_ù_d©a
 += 2;

609 
checksum
 & 0xffff0000)

610 
checksum
 = (checksum & 0xffff) + ((checksum & 0xffff0000) >> 16);

612 
checksum
 = ~checksum;

615 
°¨t_ù_d©a
[
IP_CHECKSUM
] = 
checksum
 >> 8;

616 
°¨t_ù_d©a
[
IP_CHECKSUM
+1] = 
checksum
 & 0xff;

617 
	}
}

	@flexmux_util.c

16 
	~<°rög.h
>

17 
	~"wp_wddi.h
"

19 #i‚de‡
WTI_FLEXMUX_UTIL_H


20 
	~"Êexmux_utû.h
"

22 #i‚de‡
_WPL_PLATFORM_H__


23 
	~<w∂_∂©f‹m.h
>

25 #i‚de‡
_SW_SEMAPHORE_H__


26 
	~<w∂_sw_£m≠h‹e.h
>

29 #ifde‡
__WT_UFE4_REVB__


30 
	#WTI_UFE412_REVA
 0

	)

32 
	#WTI_UFE412_REVA
 1

	)

35 #i‡
WTI_FLEXMUX_ENABLE_PERFORMANCE_MONITORING


36 
	gho_å™s„r_ty≥_ö_u£
;

37 
	glo_å™s„r_ty≥_ö_u£
;

38 
WP_U8
 
	gbuûd_≥rs⁄Æôy_ö_u£
;

41 
	#WTI_NUM_OF_WORDS_TO_READ
 64

	)

43 
	sWTI_DIAG_PEEK_INFO
{

44 
U8
 
	miDevi˚
;

45 
U32
 
	mAddªss
;

46 
U32
 
	mVÆue
;

47 
U8
 
	mVÆid
;

49 } 
	gDIAG_PEEK_INFO
;

51 
	$WTI_U„FømîTîmö©eOnEº‹
(
WP_h™dÀ
 
h™dÀ
, 
WP_CHAR
 *
s
,
WP_U32
 
id
,WP_U32 
LöeNum
)

53 if(
h™dÀ
 !
WUFE_OK
)

55 
	`¥ötf
("Te° Ab‹à%†%d %†0x%x Löe:%d\n", 
s
,
id
,

56 
WUFE_îr‹_«me
[(
h™dÀ
&0x03ffffff)], h™dÀ, 
LöeNum
);

58 
	`exô
(1);

60 #i‡
WTI_DEBUG_LEVEL


63 
	`¥ötf
("H™dÀ,Sètu†ªtu∫ed from %†i†%d, id i†%d, Löê%d\n", 
s
, 
h™dÀ
, 
id
, 
LöeNum
);

66 
	}
}

68 
	$WTI_UFE_FRAMER_PEEK_RESPONSE_CALLBACK
(
U8
 
iDevi˚
, 
U32
 
Addªss
, U32 
VÆue
)

70 
	`¥ötf
 ("WTI_UFE_FRAMER_PEEK_RESPONSE_CALLBACK called\n");

71 
DIAG_PEEK_INFO
.
iDevi˚
=iDevice;

72 
DIAG_PEEK_INFO
.
Addªss
=Address;

73 
DIAG_PEEK_INFO
.
VÆue
=Value;

74 
DIAG_PEEK_INFO
.
VÆid
=1;

77 
	}
}

79 
	$WTI_FÀxmuxTîmö©eOnEº‹
(
WP_CHAR
 * 
pF©ÆEº‹Mesßge
, 
WP_U8
 
îr‹_code
)

81 
	`¥ötf
("Te° Ab‹t: %†Löe:%d Eº‹ codê%d\n", 
pF©ÆEº‹Mesßge
, 
__LINE__
, (
WP_U32
Ë
îr‹_code
);

82 
	`exô
(-1);

83 
	}
}

84 
	#WTI_FÀxmuxCheckSètus
(
m
,
s
,
l
Ë
	`WTI_FÀxmuxCheckSètusX
(m,s,l,
__FILE__
)

	)

85 
	$WTI_FÀxmuxCheckSètusX
 (
WP_CHAR
 * 
Mesßge
, 
WP_U8
 
°©us
, 
WP_U32
 
löe
, *
f
)

87 *
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
WP_U32
 
Eº‹Code
);

88 i‡(
°©us
)

90 
	`¥ötf
("Test Abort: function %s in file(%s)Line:%dÑeturned Error code %s\n",

91 
Mesßge
, 
f
, 
löe
, 
	`OMIINO_FRAMER_Eº‹CodeToTxt
((
WP_U32
Ë
°©us
));

92 
	`exô
(-1);

96 #i‡
WTI_FLEXMUX_DBG_MODE


97 
	`¥ötf
("Sètu†ªtu∫ed from %†i†WPX_UFE_FRAMER_OK\n", 
Mesßge
);

101 
	}
}

104 
WP_U32
 
	g‰amî_lock
;

105 
WP_U32
 
	g£rvî_lock
;

107 
	#WTI_FRAMER_LOCK_KEY
 
	`WPL_LOCK_KEY_CREATE
(
WPL_SW_LOCK
, 
WPL_PRIVATE_LOCK
, 0, 0x37901)

	)

108 
	#WTI_SERVER_LOCK_KEY
 
	`WPL_LOCK_KEY_CREATE
(
WPL_SW_LOCK
, 
WPL_PRIVATE_LOCK
, 0, 0x37902)

	)

111 #i‡(
USE_POLLING
 == 0)

112 
	$WTI_Êexmux_èke_‰amî_lock
()

114 
rc
;

118 
rc
 = 
	`wpv_sw£m_acquúe
((*)(&
‰amî_lock
), 
NO_WAIT
);

119 i‡(
rc
 =
WPL_OK
)

123 
	`WPX_U„412C∂dI¡îru±MaskGë
(0);

125 
	}
}

127 
	$WTI_Êexmux_ªÀa£_‰amî_lock
()

129 
	`wpv_sw£m_ªÀa£
((*)(&
‰amî_lock
));

130 
	}
}

132 
	$WTI_Êexmux_èke_£rvî_lock
()

134 
rc
;

138 
rc
 = 
	`wpv_sw£m_acquúe
((*)(&
£rvî_lock
), 
NO_WAIT
);

139 i‡(
rc
 =
WPL_OK
)

143 
	`WPX_U„412C∂dI¡îru±MaskGë
(0);

145 
	}
}

147 
	$WTI_Êexmux_ªÀa£_£rvî_lock
()

149 
	`wpv_sw£m_ªÀa£
((*)(&
£rvî_lock
));

150 
	}
}

152 
	$öôülize_locks
()

154 
	`WPL_LockKeyInô
(
WTI_FRAMER_LOCK_KEY
, &
‰amî_lock
);

155 
	`WPL_LockKeyInô
(
WTI_SERVER_LOCK_KEY
, &
£rvî_lock
);

156 
	}
}

160 
	$öôülize_locks
(Ë{
	}
}

161 
	$WTI_Êexmux_èke_‰amî_lock
(Ë{
	}
}

162 
	$WTI_Êexmux_ªÀa£_‰amî_lock
(Ë{
	}
}

163 
	$WTI_Êexmux_èke_£rvî_lock
(Ë{
	}
}

164 
	$WTI_Êexmux_ªÀa£_£rvî_lock
(Ë{
	}
}

169 
WP_S32
 
WTI_FÀxmuxDevi˚Inô
(
WP_U32
 
upi_ödex
,

170 
WP_U8
 
Êexmux_id
,

171 
WTI_Êexmux_physiˇl_c⁄f
 
Êexmux_hw_c⁄fig
,

172 
WP_U8
 
Êexmux_mode
,

173 
WPX_UFE_FRAMER_WUFE_löe_å™sf_ty≥
 
vc_3_4
,

174 
WP_U8
 
max_löe_p‹ts
,

175 
WP_U8
 
löe_ö¸emít
,

176 
WP_U8
 
wti_Êexmux_buûd_≥rs⁄Æôy
,

177 
WTI_Êexmux_löe_p‹t_mode
 
löe_p‹t_mode
,

178 
WTI_FÀxmux_globÆ_£tup
 *
Êexmux_cfg
);

180 
WP_S32
 
WTI_FÀxmuxCÀ¨Ch™√lC⁄figuªHighOrdî
(

181 
WP_U8
 
Êexmux_id
,

182 
WP_U8
 
Êexmux_mode
,

183 
WTI_Êexmux_löe_p‹t_mode
 
löe_p‹t_mode
,

184 
WP_U8
 
löe_ö¸emít
,

185 
WP_U8
 
max_löe_p‹ts


190 
WTI_Æloˇã_pm_°‹age_¨ós
();

191 
WP_THREAD_ID
 
	gmaûbox_thªad_id
 = 0;

192 
WP_THREAD_ID
 
	gÆ¨m_™d_pm_thªad_id
 = 0;

194 
WP_S32
 
	$WTI_FÀxmuxInô
(
WP_U32
 
upi_ödex
,

195 
WP_U8
 
Êexmux_id
,

196 
WTI_Êexmux_physiˇl_c⁄f
 
Êexmux_hw_c⁄fig
,

197 
WP_U8
 
Êexmux_mode
,

198 
WPX_UFE_FRAMER_WUFE_löe_å™sf_ty≥
 
vc_3_4
,

199 
WTI_FÀxmux_globÆ_£tup
 *
Êexmux_cfg
)

201 
WUFE_°©us
 
°©us
;

202 
WP_U8
 
max_löe_p‹ts
=0, 
löe_ö¸emít
=0;

203 
WP_U8
 
wti_Êexmux_buûd_≥rs⁄Æôy
=0;

204 
WTI_Êexmux_löe_p‹t_mode
 
löe_p‹t_mode
=0;

205 #i‡
WTI_DUAL_EMPHY


206 
WTI_Êexmux_physiˇl_c⁄f
 
£c⁄d_Êexmux_hw_c⁄fig
 = 0;

209 i‡(
Êexmux_id
 > 
WPX_UFE_FRAMER_BUILD_OPTION_MAX_DEVICES
)

210 
	`WTI_FÀxmuxTîmö©eOnEº‹
("flexmux_id is out of bounds !", 0);

212 i‡(
Êexmux_hw_c⁄fig
 !
WT_FLEXMUX_UFE_412_1_PORT_OC12
 &&

213 
Êexmux_hw_c⁄fig
 !
WT_FLEXMUX_UFE_412_2_PORTS_OC3
 &&

214 
Êexmux_hw_c⁄fig
 !
WT_FLEXMUX_UFE_412_4_PORTS_OC3
 &&

215 
Êexmux_hw_c⁄fig
 !
WT_FLEXMUX_UFE_448_4_PORTS_OC12
 &&

216 
Êexmux_hw_c⁄fig
 !
WT_FLEXMUX_UFE_448_8_PORTS_OC3_PLUS_8_PROTECTION
 &&

217 
Êexmux_hw_c⁄fig
 !
WT_FLEXMUX_UFE_448_4_PORTS_OC12_CARD_PROTECTION_MASTER
 &&

218 
Êexmux_hw_c⁄fig
 !
WT_FLEXMUX_UFE_448_4_PORTS_OC12_CARD_PROTECTION_SLAVE
 &&

219 
Êexmux_hw_c⁄fig
 !
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CARD_PROTECTION_MASTER
 &&

220 
Êexmux_hw_c⁄fig
 !
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CARD_PROTECTION_SLAVE
 &&

221 
Êexmux_hw_c⁄fig
 !
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CARD_PROTECTION_SLAVE
 &&

222 
Êexmux_hw_c⁄fig
 !
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CLEAR_CHANNEL
 &&

223 
Êexmux_hw_c⁄fig
 !
WT_FLEXMUX_UFE_412_1_PORT_OC12_CLEAR_CHANNEL


225 #i‡
WTI_DUAL_EMPHY


226 && 
Êexmux_hw_c⁄fig
 !
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CARD_PROTECTION_UPI1_MASTER_UPI3_SLAVE


229 
	`WTI_FÀxmuxTîmö©eOnEº‹
("Invalid flexmux_hw_config !", 0);

231 i‡(
Êexmux_mode
 !
WPX_UFE_FRAMER_DEVICE_MODE_SONET
 &&

232 
Êexmux_mode
 !
WPX_UFE_FRAMER_DEVICE_MODE_SDH
)

233 
	`WTI_FÀxmuxTîmö©eOnEº‹
("Invalid flexmux_mode !", 0);

235 
	`WTI_Æloˇã_pm_°‹age_¨ós
();

237 i‡–
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_1_PORT_OC12
 ||

238 
Êexmux_hw_c⁄fig
=
WT_FLEXMUX_UFE_412_1_PORT_OC12_CLEAR_CHANNEL
)

240 i‡(
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SONET
)

242 
löe_p‹t_mode
 = 
WT_FLEXMUX_LINE_PORT_OC12
;

244 i‡(
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SDH
)

246 
löe_p‹t_mode
 = 
WT_FLEXMUX_LINE_PORT_STM4
;

248 
max_löe_p‹ts
 = 1;

249 
löe_ö¸emít
 = 1;

250 
wti_Êexmux_buûd_≥rs⁄Æôy
 = 
WPX_UFE_FRAMER_BUILD_PERSONALITY_1_PLUS_1_OC3_OC12
;

251 #i‡
WTI_DUAL_EMPHY


252 
£c⁄d_Êexmux_hw_c⁄fig
 = 
Êexmux_hw_c⁄fig
;

255 i‡(
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_4_PORTS_OC3
 ||

256 
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CARD_PROTECTION_MASTER
 ||

257 
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CARD_PROTECTION_SLAVE
 ||

258 
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CLEAR_CHANNEL
)

260 i‡(
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SONET
)

262 
löe_p‹t_mode
 = 
WT_FLEXMUX_LINE_PORT_OC3
;

264 i‡(
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SDH
)

266 
löe_p‹t_mode
 = 
WT_FLEXMUX_LINE_PORT_STM1
;

268 
max_löe_p‹ts
 = 4;

269 
löe_ö¸emít
 = 1;

270 
wti_Êexmux_buûd_≥rs⁄Æôy
 = 
WPX_UFE_FRAMER_BUILD_PERSONALITY_4_PLUS_4_OC3
;

271 #i‡
WTI_DUAL_EMPHY


272 
£c⁄d_Êexmux_hw_c⁄fig
 = 
Êexmux_hw_c⁄fig
;

275 #i‡
WTI_DUAL_EMPHY


276 i‡(
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CARD_PROTECTION_UPI1_MASTER_UPI3_SLAVE
)

278 i‡(
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SONET
)

280 
löe_p‹t_mode
 = 
WT_FLEXMUX_LINE_PORT_OC3
;

282 i‡(
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SDH
)

284 
löe_p‹t_mode
 = 
WT_FLEXMUX_LINE_PORT_STM1
;

286 
max_löe_p‹ts
 = 4;

287 
löe_ö¸emít
 = 1;

288 
wti_Êexmux_buûd_≥rs⁄Æôy
 = 
WPX_UFE_FRAMER_BUILD_PERSONALITY_4_PLUS_4_OC3
;

289 
Êexmux_hw_c⁄fig
 = 
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CARD_PROTECTION_MASTER
;

290 
£c⁄d_Êexmux_hw_c⁄fig
 = 
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CARD_PROTECTION_SLAVE
;

293 i‡(
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_2_PORTS_OC3
)

295 i‡(
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SONET
)

297 
löe_p‹t_mode
 = 
WT_FLEXMUX_LINE_PORT_OC3
;

299 i‡(
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SDH
)

301 
löe_p‹t_mode
 = 
WT_FLEXMUX_LINE_PORT_STM1
;

303 
max_löe_p‹ts
 = 2;

304 
löe_ö¸emít
 = 1;

305 
wti_Êexmux_buûd_≥rs⁄Æôy
 = 
WPX_UFE_FRAMER_BUILD_PERSONALITY_2_PLUS_2_OC3
;

306 #i‡
WTI_DUAL_EMPHY


307 
£c⁄d_Êexmux_hw_c⁄fig
 = 
Êexmux_hw_c⁄fig
;

310 i‡(
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_448_4_PORTS_OC12
 ||

311 
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_448_4_PORTS_OC12_CARD_PROTECTION_MASTER
 ||

312 
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_448_4_PORTS_OC12_CARD_PROTECTION_SLAVE
 )

314 i‡(
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SONET
)

316 
löe_p‹t_mode
 = 
WT_FLEXMUX_LINE_PORT_OC12
;

318 i‡(
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SDH
)

320 
löe_p‹t_mode
 = 
WT_FLEXMUX_LINE_PORT_STM4
;

322 
max_löe_p‹ts
 = 4;

323 
löe_ö¸emít
 = 1;

324 
wti_Êexmux_buûd_≥rs⁄Æôy
 = 
WPX_UFE_FRAMER_BUILD_PERSONALITY_4_PLUS_4_OC3_OC12
;

326 i‡(
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_448_8_PORTS_OC3_PLUS_8_PROTECTION
)

328 i‡(
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SONET
)

330 
löe_p‹t_mode
 = 
WT_FLEXMUX_LINE_PORT_OC3
;

332 i‡(
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SDH
)

334 
löe_p‹t_mode
 = 
WT_FLEXMUX_LINE_PORT_STM1
;

336 
max_löe_p‹ts
 = 8;

337 
löe_ö¸emít
 = 1;

338 
wti_Êexmux_buûd_≥rs⁄Æôy
 = 
WPX_UFE_FRAMER_BUILD_PERSONALITY_8_PLUS_8_OC3
;

342 
	`WTI_FÀxmuxTîmö©eOnEº‹
("Invalid flexmux_hw_config !", 0);

345 #i‡
WTI_DUAL_EMPHY


346 i‡(
Êexmux_id
 =
WTI_FLEXMUX_SECOND_FLEXMUX_ID
)

347 
	`WTI_FÀxmuxTîmö©eOnEº‹
("Invalid flexmux_id for DUAL EMPHY !", 0);

350 
	`öôülize_locks
();

352 
	`mem£t
(
Êexmux_cfg
, 0, (
WTI_FÀxmux_globÆ_£tup
));

355 
Êexmux_cfg
->
Êexmux_id
 = flexmux_id;

357 #i‡
WTI_DUAL_EMPHY


359 
Êexmux_cfg
->
£c⁄d_Êexmux_id
 = 
WTI_FLEXMUX_SECOND_FLEXMUX_ID
;

363 
	`WPX_U„412C∂dI¡îru±MaskSë
(0, 
WPX_FPGA_INTR_ALL_MASKED
);

366 
	`WPX_FRMR_Regi°îPìkCÆlback
((*)(()
WTI_UFE_FRAMER_PEEK_RESPONSE_CALLBACK
));

369 
	`WPX_FRMR_Regi°îFømîLockCÆlback
((*)(()
WTI_Êexmux_èke_‰amî_lock
));

372 
°©us
 = 
	`WPX_UFE_FRAMER_FÀxmuxInô
(
Êexmux_cfg
->
Êexmux_id
,

373 
upi_ödex
);

374 
	`WTI_FÀxmuxCheckSètus
("WPX_UFE_FRAMER_FÀxmuxInô", 
°©us
, 
__LINE__
);

376 #i‡
	`deföed
(
WP_BOARD_WDS3
)

379 
WP_U32
 
j
;

381 #i‡
	`deföed
(
__WT_UFE412__
)

382 
j
 = 0x88000028; j <= 0x88000e28; j += 0x200)

384 
	`WPX_FRMR_DEV_DIAG_Poke
(0, 0, 
j
, 0x00000001);

385 
	`¥ötf
 ("WPX_FRMR_DEV_DIAG_Poke:áddr(%x)\n", 
j
);

387 #ñi‡
	`deföed
(
__WT_UFE448__
)

388 
j
 = 0x88000028; j <= 0x88000e28; j += 0x200)

389 
	`WPX_FRMR_DEV_DIAG_Poke
(0, 0, 
j
, 0x00000000);

396 
WP_U32
 
thªad_∑øms
[2*
WPX_UFE_FRAMER_BUILD_OPTION_MAX_DEVICES
];

398 
thªad_∑øms
[0] = 
Êexmux_cfg
->
Êexmux_id
;

399 
thªad_∑øms
[1] = 
upi_ödex
;

400 #i‡
WTI_DUAL_EMPHY


401 
thªad_∑øms
[2] = 
Êexmux_cfg
->
£c⁄d_Êexmux_id
;

402 
thªad_∑øms
[3] = 
WTI_FLEXMUX_SECOND_UPI_INDEX
;

405 i‡(
maûbox_thªad_id
 == 0)

406 
	`WPL_ThªadInô
(&
maûbox_thªad_id
,

407 (*(*)(*)Ë
WPX_UFE_FRAMER_FÀxmuxSîvi˚Maûbox
,

408 (*Ë
thªad_∑øms
);

411 #i‡
WTI_FLEXMUX_ALARM_AND_PM_THREAD


415 
WP_U32
 
thªad_∑øms
[2] = { 0, 1 };

416 
	`¥o˚ss_‰amî_èsk_li°
();

418 i‡(
Æ¨m_™d_pm_thªad_id
 == 0)

419 
	`WPL_ThªadInô
(&
Æ¨m_™d_pm_thªad_id
,

420 (*(*)(*)Ë
¥o˚ss_‰amî_èsk_li°
,

421 (*Ë
thªad_∑øms
);

427 
°©us
 = 
	`WPX_UFE_FRAMER_FÀxmuxSëBuûdPîs⁄Æôy
(
Êexmux_cfg
->
Êexmux_id
,

428 
wti_Êexmux_buûd_≥rs⁄Æôy
,

429 
upi_ödex
);

430 
	`WTI_U„FømîTîmö©eOnEº‹
(
°©us
, "fú° UFE WPX_UFE_FRAMER_FÀxmuxSëBuûdPîs⁄Æôy", 0, 
__LINE__
);

432 #i‡
WTI_DUAL_EMPHY


434 
°©us
 = 
	`WPX_UFE_FRAMER_FÀxmuxSëBuûdPîs⁄Æôy
(
Êexmux_cfg
->
£c⁄d_Êexmux_id
,

435 
wti_Êexmux_buûd_≥rs⁄Æôy
,

436 
WTI_FLEXMUX_SECOND_UPI_INDEX
);

437 
	`WTI_U„FømîTîmö©eOnEº‹
(
°©us
, "£c⁄d UFE WPX_UFE_FRAMER_FÀxmuxSëBuûdPîs⁄Æôy", 0, 
__LINE__
);

440 #i‡
WTI_FLEXMUX_ENABLE_PERFORMANCE_MONITORING


441 
buûd_≥rs⁄Æôy_ö_u£
 = 
wti_Êexmux_buûd_≥rs⁄Æôy
;

444 
	`WTI_FÀxmuxDevi˚Inô
(
upi_ödex
,

445 
Êexmux_id
,

446 
Êexmux_hw_c⁄fig
,

447 
Êexmux_mode
,

448 
vc_3_4
,

449 
max_löe_p‹ts
,

450 
löe_ö¸emít
,

451 
wti_Êexmux_buûd_≥rs⁄Æôy
,

452 
löe_p‹t_mode
,

453 
Êexmux_cfg
);

455 #i‡
WTI_DUAL_EMPHY


457 
	`WP_Dñay
(50000);

459 
	`WTI_FÀxmuxDevi˚Inô
(
WTI_FLEXMUX_SECOND_UPI_INDEX
,

460 
Êexmux_cfg
->
£c⁄d_Êexmux_id
,

461 
£c⁄d_Êexmux_hw_c⁄fig
,

462 
Êexmux_mode
,

463 
vc_3_4
,

464 
max_löe_p‹ts
,

465 
löe_ö¸emít
,

466 
wti_Êexmux_buûd_≥rs⁄Æôy
,

467 
löe_p‹t_mode
,

468 
Êexmux_cfg
);

473 
	}
}

475 
WP_S32
 
	$WTI_FÀxmuxDevi˚Inô
(
WP_U32
 
upi_ödex
,

476 
WP_U8
 
Êexmux_id
,

477 
WTI_Êexmux_physiˇl_c⁄f
 
Êexmux_hw_c⁄fig
,

478 
WP_U8
 
Êexmux_mode
,

479 
WPX_UFE_FRAMER_WUFE_löe_å™sf_ty≥
 
vc_3_4
,

480 
WP_U8
 
max_löe_p‹ts
,

481 
WP_U8
 
löe_ö¸emít
,

482 
WP_U8
 
wti_Êexmux_buûd_≥rs⁄Æôy
,

483 
WTI_Êexmux_löe_p‹t_mode
 
löe_p‹t_mode
,

484 
WTI_FÀxmux_globÆ_£tup
 *
Êexmux_cfg
)

486 
WUFE_°©us
 
°©us
;

488 #ifde‡
__WT_UFE448__


489 
	`WPX_FRMR_DEMO_ONLY_C⁄figuª_GTP_ClockSour˚
(
Êexmux_id
);

491 #i‡
WTI_UFE412_REVA


493 
	`WPX_FRMR_DEMO_ONLY_C⁄figuª_GTP_ClockSour˚
(
Êexmux_id
);

496 #i‡
WTI_FRAMER_SCRIPT


502 
°©us
 = 
	`WPX_FRMR_DEV_SëMode
(0, 
Êexmux_id
, 
Êexmux_mode
);

503 
	`WTI_FÀxmuxCheckSètus
("WPX_UFE_FRAMER_CONFIGURATION_DEVICE_SëMode", 
°©us
, 
__LINE__
);

504 #i‡
WTI_FLEXMUX_DBG_MODE


505 
U8
 
pDevi˚PrŸe˘i⁄Mode
;

506 
U8
 
pC¨dPrŸe˘i⁄O≥øtögMode
;

509 if(
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CARD_PROTECTION_MASTER
 ||

510 
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_448_4_PORTS_OC12_CARD_PROTECTION_MASTER
){

511 
°©us
 = 
	`WPX_FRMR_SëDevPrŸe˘Mode
–0, 
Êexmux_id
, 
WPX_UFE_DEVICE_PROTECTION_MODE_CARD
);

512 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SëDevPrŸe˘Mode", 
°©us
, 
__LINE__
);

513 #i‡
WTI_FLEXMUX_DBG_MODE


514 
	`WPX_FRMR_GëDevPrŸe˘Mode
 (
Êexmux_id
,&
pDevi˚PrŸe˘i⁄Mode
);

515 if(
pDevi˚PrŸe˘i⁄Mode
 !
WPX_UFE_DEVICE_PROTECTION_MODE_CARD
)

516 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_GetDevProtectMode != WPX_UFE_DEVICE_PROTECTION_MODE_CARD\n", 0);

518 
°©us
 = 
	`WPX_FRMR_SëDevC¨dPrŸe˘O≥øtögMode
(0,
Êexmux_id
,
WPX_UFE_DEVICE_CARD_PROTECTION_OPERATING_MODE_MASTER
);

519 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SëDevC¨dPrŸe˘O≥øtögMode", 
°©us
, 
__LINE__
);

520 #i‡
WTI_FLEXMUX_DBG_MODE


521 
	`WPX_FRMR_GëDevC¨dPrŸe˘O≥øtögMode
(
Êexmux_id
, &
pC¨dPrŸe˘i⁄O≥øtögMode
);

522 if(
pC¨dPrŸe˘i⁄O≥øtögMode
!=
WPX_UFE_DEVICE_CARD_PROTECTION_OPERATING_MODE_MASTER
)

523 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_GetDevCardProtectOperatingMode != WPX_UFE_DEVICE_CARD_PROTECTION_OPERATING_MODE_MASTER\n", 0);

526 if(
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CARD_PROTECTION_SLAVE
 ||

527 
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_448_4_PORTS_OC12_CARD_PROTECTION_SLAVE
){

528 
°©us
 = 
	`WPX_FRMR_SëDevPrŸe˘Mode
–0, 
Êexmux_id
, 
WPX_UFE_DEVICE_PROTECTION_MODE_CARD
);

529 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SëDevPrŸe˘Mode", 
°©us
, 
__LINE__
);

530 #i‡
WTI_FLEXMUX_DBG_MODE


531 
	`WPX_FRMR_GëDevPrŸe˘Mode
 (
Êexmux_id
,&
pDevi˚PrŸe˘i⁄Mode
);

532 if(
pDevi˚PrŸe˘i⁄Mode
 !
WPX_UFE_DEVICE_PROTECTION_MODE_CARD
)

533 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_GetDevProtectMode != WPX_UFE_DEVICE_PROTECTION_MODE_CARD\n", 0);

535 
°©us
 = 
	`WPX_FRMR_SëDevC¨dPrŸe˘O≥øtögMode
(0,
Êexmux_id
,
WPX_UFE_DEVICE_CARD_PROTECTION_OPERATING_MODE_SLAVE
);

536 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SëDevC¨dPrŸe˘O≥øtögMode", 
°©us
, 
__LINE__
);

537 #i‡
WTI_FLEXMUX_DBG_MODE


538 
	`WPX_FRMR_GëDevC¨dPrŸe˘O≥øtögMode
(
Êexmux_id
, &
pC¨dPrŸe˘i⁄O≥øtögMode
);

539 if(
pC¨dPrŸe˘i⁄O≥øtögMode
!=
WPX_UFE_DEVICE_CARD_PROTECTION_OPERATING_MODE_SLAVE
)

540 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_GetDevCardProtectOperatingMode != WPX_UFE_DEVICE_CARD_PROTECTION_OPERATING_MODE_SLAVE\n", 0);

545 
°©us
 = 
	`WPX_FRMR_SëDevPrŸe˘Mode
–0, 
Êexmux_id
, 
WPX_UFE_DEVICE_PROTECTION_MODE_LINE
);

546 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SëDevPrŸe˘Mode", 
°©us
, 
__LINE__
);

547 #i‡
WTI_FLEXMUX_DBG_MODE


548 
	`WPX_FRMR_GëDevPrŸe˘Mode
 (
Êexmux_id
,&
pDevi˚PrŸe˘i⁄Mode
);

549 if(
pDevi˚PrŸe˘i⁄Mode
 !
WPX_UFE_DEVICE_PROTECTION_MODE_LINE
)

550 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_GetDevProtectMode != WPX_UFE_DEVICE_PROTECTION_MODE_LINE\n", 0);

553 #i‡
WTI_FLEXMUX_DBG_MODE


554 
U8
 
pDevi˚Mode
;

555 
°©us
 = 
	`WPX_FRMR_DEV_GëMode
(
Êexmux_id
,&
pDevi˚Mode
 );

556 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

557 
Êexmux_mode
)

559 
WPX_UFE_FRAMER_DEVICE_MODE_SDH
:

560 if(
pDevi˚Mode
 !
WPX_UFE_FRAMER_DEVICE_MODE_SDH
)

562 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_DEV_GetMode != WPX_UFE_DEVICE_MODE_SDH\n", 0);

565 
WPX_UFE_FRAMER_DEVICE_MODE_SONET
:

566 if(
pDevi˚Mode
 !
WPX_UFE_FRAMER_DEVICE_MODE_SONET
)

568 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_DEV_GetMode != WPX_UFE_DEVICE_MODE_SONET\n", 0);

575 
Êexmux_cfg
->
Êexmux_hw_c⁄fig
 = flexmux_hw_config;

578 
Êexmux_cfg
->
Êexmux_buûd_≥rs⁄Æôy
 = 
wti_Êexmux_buûd_≥rs⁄Æôy
;

581 
Êexmux_ªg
[
Êexmux_id
].
is_öôülized
 = 
WP_TRUE
;

582 
Êexmux_ªg
[
Êexmux_id
].
Êexmux_hw_c⁄fig
 = flexmux_hw_config;

583 
Êexmux_ªg
[
Êexmux_id
].
Êexmux_buûd_≥rs⁄Æôy
 = 
wti_Êexmux_buûd_≥rs⁄Æôy
;

584 
Êexmux_ªg
[
Êexmux_id
].
Êexmux_mode
 = flexmux_mode;

585 
Êexmux_ªg
[
Êexmux_id
].
max_löe_p‹ts
 = max_line_ports;

586 if–
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CLEAR_CHANNEL
 ||

587 
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_1_PORT_OC12_CLEAR_CHANNEL
)

588 
	`WTI_FÀxmuxCÀ¨Ch™√lC⁄figuªHighOrdî
(
Êexmux_id
,
Êexmux_mode
,
löe_p‹t_mode
,
löe_ö¸emít
,
max_löe_p‹ts
);

589 i‡(
wti_Êexmux_buûd_≥rs⁄Æôy
 =
WPX_UFE_FRAMER_BUILD_PERSONALITY_4_PLUS_4_OC3_OC12
 ||

590 
wti_Êexmux_buûd_≥rs⁄Æôy
 =
WPX_UFE_FRAMER_BUILD_PERSONALITY_8_PLUS_8_OC3
 ||

591 
wti_Êexmux_buûd_≥rs⁄Æôy
 =
WPX_UFE_FRAMER_BUILD_PERSONALITY_1_PLUS_1_OC3_OC12
 ||

592 
wti_Êexmux_buûd_≥rs⁄Æôy
 =
WPX_UFE_FRAMER_BUILD_PERSONALITY_2_PLUS_2_OC3
 ||

593 
wti_Êexmux_buûd_≥rs⁄Æôy
 =
WPX_UFE_FRAMER_BUILD_PERSONALITY_4_PLUS_4_OC3
)

595 
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
 
löe_íd_poöt
 = {0};

597 #i‡
WTI_ADM_MODE


599 
U8
 
TX_C2
=0x1, 
EX_C2
=0x1;

600 
WP_CHAR
 *
TX_J1
="0000000000000000", *
EX_J1
="0000000000000000",*
pTX_Tø˚Såög
="WG RS-TRACE",*
pEX_Tø˚Såög
="WG RS-TRACE";

602 
U8
 
TX_C2
=0x2, 
EX_C2
=0x2;

603 
WP_CHAR
 *
TX_J1
="WG HP-TRACE", *
EX_J1
="WG HP-TRACE",*
pTX_Tø˚Såög
="WG RS-TRACE",*
pEX_Tø˚Såög
="WG RS-TRACE";

606 i‡(
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SONET
)

608 
WP_U32
 
°s12
, 
°s3
, 
°s1
;

609 
löe_íd_poöt
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SONET_TYPE_STS1_SPE
;

611 if(
löe_p‹t_mode
 =
WT_FLEXMUX_LINE_PORT_OC3
)

613 
°s12
 = 0;

614 
löe_íd_poöt
.
u
.
SONET
.
°s12
 = sts12;

615 
°s3
=0; sts3<
max_löe_p‹ts
; sts3+=
löe_ö¸emít
)

617 
	`WTI_FÀxmuxLöeP‹tC⁄fig
(
Êexmux_id
,

618 
°s3
,

619 
löe_p‹t_mode
);

620 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëMode
(0, 
Êexmux_id
, 
°s3
, 
WPX_UFE_FRAMER_PATH_TRACE_MODE_16_BYTE
);

621 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëTX
(0, 
Êexmux_id
, 
°s3
, 
pTX_Tø˚Såög
);

622 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_SOH_J0_SëTX", 
°©us
, 
__LINE__
);

624 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëEX
(0, 
Êexmux_id
, 
°s3
, 
pEX_Tø˚Såög
);

625 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_SOH_J0_SëEX", 
°©us
, 
__LINE__
);

627 
löe_íd_poöt
.
u
.
SONET
.
°s3
 = sts3;

628 
°s1
=0; sts1<3; ++sts1)

630 
löe_íd_poöt
.
u
.
SONET
.
°s1
 = sts1;

631 
°©us
 = 
	`WPX_FRMR_SONET_SDH_Cª©eFacûôy
(0, 
Êexmux_id
, &
löe_íd_poöt
);

632 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_Cª©eFacûôy (VC3/4)", 
°©us
, 
__LINE__
);

635 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_C2
);

636 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_C2_SëTX", 
°©us
, 
__LINE__
);

637 #i‡
WTI_FLEXMUX_DBG_MODE


638 
U8
 
pTX_C2
;

639 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pTX_C2
 );

640 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

641 if(
pTX_C2
!=
TX_C2
)

643 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_C2_GetTX != TX_C2\n", 0);

646 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_C2
);

647 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_C2_SëEX", 
°©us
, 
__LINE__
);

648 #i‡
WTI_FLEXMUX_DBG_MODE


649 
U8
 
pEX_C2
;

650 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pEX_C2
 );

651 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

652 if(
pTX_C2
!=
TX_C2
)

654 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_C2_GetTX != EX_C2\n", 0);

659 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëMode
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
WPX_UFE_FRAMER_PATH_TRACE_MODE_16_BYTE
);

660 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_J1
);

661 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_SëTX", 
°©us
, 
__LINE__
);

662 #i‡
WTI_FLEXMUX_DBG_MODE


663 
WP_CHAR
 
pTX_J1
[65];

664 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_GëTX
(
Êexmux_id
, &
löe_íd_poöt
, 
pTX_J1
);

665 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

666 i‡(
	`°∫cmp
(
pTX_J1
, 
TX_J1
, 11))

668 
	`¥ötf
("pTX_J1 %s\nTX_J1 %s\n", 
pTX_J1
, 
TX_J1
);

669 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GetTX != TX_J1\n", 0);

673 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_J1
);

674 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_SëEX", 
°©us
, 
__LINE__
);

675 #i‡
WTI_FLEXMUX_DBG_MODE


676 
WP_CHAR
 
pEX_J1
[65];

677 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_GëEX
(
Êexmux_id
, &
löe_íd_poöt
, 
pEX_J1
);

678 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

679 i‡(
	`°∫cmp
(
pEX_J1
, 
EX_J1
, 11))

681 
	`¥ötf
("pEX_J1 %s\nEX_J1 %s\n", 
pEX_J1
, 
EX_J1
);

682 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GetEX != EX_J1\n", 0);

689 if(
löe_p‹t_mode
 =
WT_FLEXMUX_LINE_PORT_OC12
)

691 
°s12
=0; sts12<
max_löe_p‹ts
; sts12+=
löe_ö¸emít
)

693 
löe_íd_poöt
.
u
.
SONET
.
°s12
 = sts12;

694 
	`WTI_FÀxmuxLöeP‹tC⁄fig
(
Êexmux_id
,

695 
°s12
,

696 
löe_p‹t_mode
);

697 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëMode
(0, 
Êexmux_id
, 
°s12
, 
WPX_UFE_FRAMER_PATH_TRACE_MODE_16_BYTE
);

698 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëTX
(0, 
Êexmux_id
, 
°s12
, 
pTX_Tø˚Såög
);

699 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_SOH_J0_SëTX", 
°©us
, 
__LINE__
);

701 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëEX
(0, 
Êexmux_id
, 
°s12
, 
pEX_Tø˚Såög
);

702 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_SOH_J0_SëEX", 
°©us
, 
__LINE__
);

704 
°s3
=0; sts3<4; ++sts3)

706 
löe_íd_poöt
.
u
.
SONET
.
°s3
 = sts3;

707 
°s1
=0; sts1<3; ++sts1)

709 
löe_íd_poöt
.
u
.
SONET
.
°s1
 = sts1;

710 
°©us
 = 
	`WPX_FRMR_SONET_SDH_Cª©eFacûôy
(0, 
Êexmux_id
, &
löe_íd_poöt
);

711 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_Cª©eFacûôy (VC2/4)", 
°©us
, 
__LINE__
);

714 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_C2
);

715 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_C2_SëTX", 
°©us
, 
__LINE__
);

717 #i‡
WTI_FLEXMUX_DBG_MODE


718 
U8
 
pTX_C2
;

719 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pTX_C2
 );

720 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

721 if(
pTX_C2
!=
TX_C2
)

723 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_C2_GetTX != TX_C2\n", 0);

726 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_C2
);

727 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_C2_SëEX", 
°©us
, 
__LINE__
);

728 #i‡
WTI_FLEXMUX_DBG_MODE


729 
U8
 
pEX_C2
;

730 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pEX_C2
 );

731 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

732 if(
pTX_C2
!=
TX_C2
)

734 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_C2_GetTX != EX_C2\n", 0);

737 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëMode
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
WPX_UFE_FRAMER_PATH_TRACE_MODE_16_BYTE
);

738 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_J1
);

739 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_SëTX", 
°©us
, 
__LINE__
);

740 #i‡
WTI_FLEXMUX_DBG_MODE


741 
WP_CHAR
 
pTX_J1
[65];

742 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_GëTX
(
Êexmux_id
, &
löe_íd_poöt
, 
pTX_J1
);

743 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

744 i‡(
	`°∫cmp
(
pTX_J1
, 
TX_J1
, 11))

746 
	`¥ötf
("pTX_J1 %s\nTX_J1 %s\n", 
pTX_J1
, 
TX_J1
);

747 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GetTX != TX_J1\n", 0);

751 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_J1
);

752 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_SëEX", 
°©us
, 
__LINE__
);

753 #i‡
WTI_FLEXMUX_DBG_MODE


754 
WP_CHAR
 
pEX_J1
[65];

755 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_GëEX
(
Êexmux_id
, &
löe_íd_poöt
, 
pEX_J1
);

756 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

757 i‡(
	`°∫cmp
(
pEX_J1
, 
EX_J1
, 11))

759 
	`¥ötf
("pEX_J1 %s\nEX_J1 %s\n", 
pEX_J1
, 
EX_J1
);

760 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GetEX != EX_J1\n", 0);

769 i‡(
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SDH
)

771 
WP_U32
 
°m4
, 
°m1
, 
°m0
, 
num_f‹_vc3_‹_vc4
;

773 
löe_íd_poöt
.
Tøns„rTy≥
 = 
vc_3_4
;

777 i‡(
vc_3_4
 =
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC3
)

779 
num_f‹_vc3_‹_vc4
 = 3;

783 
num_f‹_vc3_‹_vc4
 = 1;

786 i‡(
löe_p‹t_mode
 =
WT_FLEXMUX_LINE_PORT_STM1
)

788 
°m1
=0; stm1<
max_löe_p‹ts
; stm1+=
löe_ö¸emít
)

790 
löe_íd_poöt
.
u
.
SDH
.
°m4
 = 2 * (
°m1
/4);

793 
löe_íd_poöt
.
u
.
SDH
.
°m1
 = (stm1%4);

794 
	`WTI_FÀxmuxLöeP‹tC⁄fig
(
Êexmux_id
,

795 
°m1
,

796 
löe_p‹t_mode
);

797 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëMode
(0, 
Êexmux_id
, 
°m1
, 
WPX_UFE_FRAMER_PATH_TRACE_MODE_16_BYTE
);

798 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëTX
(0, 
Êexmux_id
, 
°m1
, 
pTX_Tø˚Såög
);

799 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_SOH_J0_SëTX", 
°©us
, 
__LINE__
);

801 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëEX
(0, 
Êexmux_id
, 
°m1
, 
pEX_Tø˚Såög
);

802 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_SOH_J0_SëEX", 
°©us
, 
__LINE__
);

804 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_B1_SëEx˚ssiveTh
(510 + 
°m1
, 0, stm1,

805 
WPX_UFE_FRAMER_THRESHOLD_10E4
);

806 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_SEC_B1_SëEx˚ssiveTh", 
°©us
, 
__LINE__
);

808 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_B1_SëSig«lDegødeTh
(410 + 
°m1
, 0, stm1,

809 
WPX_UFE_FRAMER_THRESHOLD_10E5
);

810 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_SEC_B1_SëSig«lDegødeTh", 
°©us
, 
__LINE__
);

812 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_LINE_B2_SëEx˚ssiveTh
(540 + 
°m1
, 0, stm1,

813 
WPX_UFE_FRAMER_THRESHOLD_10E5
);

814 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_LINE_B2_SëEx˚ssiveTh", 
°©us
, 
__LINE__
);

816 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_LINE_B2_SëSigDegødeTh
(440 + 
°m1
, 0, stm1,

817 
WPX_UFE_FRAMER_THRESHOLD_10E6
);

818 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_LINE_B2_SëSigDegødeTh", 
°©us
, 
__LINE__
);

820 
°m0
=0; stm0<
num_f‹_vc3_‹_vc4
; ++stm0)

822 
löe_íd_poöt
.
u
.
SDH
.
°m0
 = stm0;

823 #i‡
WTI_FLEXMUX_DBG_MODE


824 
	`¥ötf
("löe_íd_poöt.u.SDH.°m4 %d\n", 
löe_íd_poöt
.
u
.
SDH
.
°m4
);

825 
	`¥ötf
("löe_íd_poöt.u.SDH.°m1 %d\n", 
löe_íd_poöt
.
u
.
SDH
.
°m1
);

826 
	`¥ötf
("löe_íd_poöt.u.SDH.°m0 %d\n", 
löe_íd_poöt
.
u
.
SDH
.
°m0
);

829 
°©us
 = 
	`WPX_FRMR_SONET_SDH_Cª©eFacûôy
(0, 
Êexmux_id
, &
löe_íd_poöt
);

830 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_Cª©eFacûôy (VC3/4)", 
°©us
, 
__LINE__
);

833 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_C2
);

834 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_C2_SëTX", 
°©us
, 
__LINE__
);

835 #i‡
WTI_FLEXMUX_DBG_MODE


836 
U8
 
pTX_C2
;

837 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pTX_C2
 );

838 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

839 if(
pTX_C2
!=
TX_C2
)

841 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_C2_GetTX != TX_C2\n", 0);

844 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_C2
);

845 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_C2_SëEX", 
°©us
, 
__LINE__
);

846 #i‡
WTI_FLEXMUX_DBG_MODE


847 
U8
 
pEX_C2
;

848 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pEX_C2
 );

849 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

850 if(
pTX_C2
!=
TX_C2
)

852 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_C2_GetTX != EX_C2\n", 0);

855 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëMode
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
WPX_UFE_FRAMER_PATH_TRACE_MODE_16_BYTE
);

856 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_J1
);

857 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_SëTX", 
°©us
, 
__LINE__
);

858 #i‡
WTI_FLEXMUX_DBG_MODE


859 
WP_CHAR
 
pTX_J1
[65];

860 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_GëTX
(
Êexmux_id
, &
löe_íd_poöt
, 
pTX_J1
);

861 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GëTX", 
°©us
, 
__LINE__
);

862 i‡(
	`°∫cmp
(
pTX_J1
, 
TX_J1
, 11))

864 
	`¥ötf
("pTX_J1 %s\nTX_J1 %s\n", 
pTX_J1
, 
TX_J1
);

865 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GetTX != TX_J1\n", 0);

869 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_J1
);

870 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_SëEX", 
°©us
, 
__LINE__
);

871 #i‡
WTI_FLEXMUX_DBG_MODE


872 
WP_CHAR
 
pEX_J1
[65];

873 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_GëEX
(
Êexmux_id
, &
löe_íd_poöt
, 
pEX_J1
);

874 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

875 i‡(
	`°∫cmp
(
pTX_J1
, 
TX_J1
, 11))

877 
	`¥ötf
("pEX_J1 %s\nEX_J1 %s\n", 
pEX_J1
, 
EX_J1
);

878 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GetEX != EX_J1\n", 0);

881 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_B3_SëEx˚ssiveTh
(0,
Êexmux_id
, &
löe_íd_poöt
,

882 
WPX_UFE_FRAMER_THRESHOLD_10E4
);

883 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_B3_SëEx˚ssiveTh", 
°©us
, 
__LINE__
);

885 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_B3_SëSigDegødeTh
(0, 
Êexmux_id
, &
löe_íd_poöt
,

886 
WPX_UFE_FRAMER_THRESHOLD_10E6
);

887 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_B3_SëSigDegødeTh", 
°©us
, 
__LINE__
);

891 i‡(
löe_p‹t_mode
 =
WT_FLEXMUX_LINE_PORT_STM4
)

893 
°m4
=0; stm4<
max_löe_p‹ts
; stm4+=
löe_ö¸emít
)

895 
löe_íd_poöt
.
u
.
SDH
.
°m4
 = stm4;

896 
	`WTI_FÀxmuxLöeP‹tC⁄fig
(
Êexmux_id
,

897 
°m4
,

898 
löe_p‹t_mode
);

899 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëMode
(0, 
Êexmux_id
, 
°m4
, 
WPX_UFE_FRAMER_PATH_TRACE_MODE_16_BYTE
);

900 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëTX
(0, 
Êexmux_id
, 
°m4
, 
pTX_Tø˚Såög
);

901 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_SOH_J0_SëTX", 
°©us
, 
__LINE__
);

903 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëEX
(0, 
Êexmux_id
, 
°m4
, 
pEX_Tø˚Såög
);

904 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_SOH_J0_SëEX", 
°©us
, 
__LINE__
);

906 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_B1_SëEx˚ssiveTh
(510 + 
°m1
, 
Êexmux_id
, 
°m4
,

907 
WPX_UFE_FRAMER_THRESHOLD_10E4
);

908 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_SEC_B1_SëEx˚ssiveTh", 
°©us
, 
__LINE__
);

910 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_B1_SëSig«lDegødeTh
(410 + 
°m1
, 
Êexmux_id
, 
°m4
,

911 
WPX_UFE_FRAMER_THRESHOLD_10E5
);

912 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_SEC_B1_SëSig«lDegødeTh", 
°©us
, 
__LINE__
);

914 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_LINE_B2_SëEx˚ssiveTh
(540 + 
°m1
, 
Êexmux_id
, 
°m4
,

915 
WPX_UFE_FRAMER_THRESHOLD_10E5
);

916 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_LINE_B2_SëEx˚ssiveTh", 
°©us
, 
__LINE__
);

918 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_LINE_B2_SëSigDegødeTh
(440 + 
°m1
, 
Êexmux_id
, 
°m4
,

919 
WPX_UFE_FRAMER_THRESHOLD_10E6
);

920 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_LINE_B2_SëSigDegødeTh", 
°©us
, 
__LINE__
);

922 
°m1
=0; stm1<4; ++stm1)

924 
löe_íd_poöt
.
u
.
SDH
.
°m1
 = stm1;

925 
°m0
=0; stm0<
num_f‹_vc3_‹_vc4
; ++stm0)

927 
löe_íd_poöt
.
u
.
SDH
.
°m0
 = stm0;

928 
°©us
 = 
	`WPX_FRMR_SONET_SDH_Cª©eFacûôy
(0, 
Êexmux_id
, &
löe_íd_poöt
);

929 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_Cª©eFacûôy (VC3/4)", 
°©us
, 
__LINE__
);

932 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_C2
);

933 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_C2_SëTX", 
°©us
, 
__LINE__
);

934 #i‡
WTI_FLEXMUX_DBG_MODE


935 
U8
 
pTX_C2
;

936 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pTX_C2
 );

937 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

938 if(
pTX_C2
!=
TX_C2
)

940 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_C2_GetTX != TX_C2\n", 0);

943 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_C2
);

944 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_C2_SëEX", 
°©us
, 
__LINE__
);

945 #i‡
WTI_FLEXMUX_DBG_MODE


946 
U8
 
pEX_C2
;

947 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pEX_C2
 );

948 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

949 if(
pTX_C2
!=
TX_C2
)

951 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_C2_GetTX != EX_C2\n", 0);

954 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëMode
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
WPX_UFE_FRAMER_PATH_TRACE_MODE_16_BYTE
);

955 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_J1
);

956 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_SëTX", 
°©us
, 
__LINE__
);

957 #i‡
WTI_FLEXMUX_DBG_MODE


958 
WP_CHAR
 
pTX_J1
[65];

959 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_GëTX
(
Êexmux_id
, &
löe_íd_poöt
, 
pTX_J1
);

960 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

961 i‡(
	`°∫cmp
(
pTX_J1
, 
TX_J1
, 11))

963 
	`¥ötf
("pTX_J1 %s\nTX_J1 %s\n", 
pTX_J1
, 
TX_J1
);

964 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GetTX != TX_J1\n", 0);

968 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_J1
);

969 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_SëEX", 
°©us
, 
__LINE__
);

970 #i‡
WTI_FLEXMUX_DBG_MODE


971 
WP_CHAR
 
pEX_J1
[65];

972 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_GëEX
(
Êexmux_id
, &
löe_íd_poöt
, 
pEX_J1
);

973 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

974 i‡(
	`°∫cmp
(
pEX_J1
, 
EX_J1
, 11))

976 
	`¥ötf
("pEX_J1 %s\nEX_J1 %s\n", 
pEX_J1
, 
EX_J1
);

977 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GetEX != EX_J1\n", 0);

980 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_B3_SëEx˚ssiveTh
(700, 0, &
löe_íd_poöt
,

981 
WPX_UFE_FRAMER_THRESHOLD_10E4
);

982 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_B3_SëEx˚ssiveTh", 
°©us
, 
__LINE__
);

984 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_B3_SëSigDegødeTh
(701, 0, &
löe_íd_poöt
,

985 
WPX_UFE_FRAMER_THRESHOLD_10E6
);

986 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_B3_SëSigDegødeTh", 
°©us
, 
__LINE__
);

995 
	`WTI_FÀxmuxTîmö©eOnEº‹
("Unsupported BuildÖersonality", 0);

1001 
°©us
 = 
	`WPX_FRMR_DEV_DIAG_DRV_RecClkSë
(0, 0, 0 ,0);

1002 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_DIAG_DRV_RecClkSë", 
°©us
, 
__LINE__
);

1004 
°©us
 = 
	`WPX_FRMR_DEV_DIAG_DRV_RecClkSë
(0, 0, 1 ,0);

1005 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_DIAG_DRV_RecClkSë", 
°©us
, 
__LINE__
);

1007 #i‡
WTI_FLEXMUX_DBG_MODE


1008 
U8
 
piLöeP‹t
;

1009 
°©us
 = 
	`WPX_FRMR_DEV_DIAG_DRV_RecClkGë
(
Êexmux_id
,0,&
piLöeP‹t
 );

1010 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

1011 if(
piLöeP‹t
!=0)

1013 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_DEV_DIAG_DRV_RecClkGet != 0\n", 0);

1018 
	}
}

1020 
WP_S32
 
	$WTI_FÀxmuxCÀ¨Ch™√lC⁄figuªHighOrdî
(

1021 
WP_U8
 
Êexmux_id
,

1022 
WP_U8
 
Êexmux_mode
,

1023 
WTI_Êexmux_löe_p‹t_mode
 
löe_p‹t_mode
,

1024 
WP_U8
 
löe_ö¸emít
,

1025 
WP_U8
 
max_löe_p‹ts


1028 
WUFE_°©us
 
°©us
;

1029 
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
 
löe_íd_poöt
 = {0};

1030 #i‡
WTI_ADM_MODE


1032 
U8
 
TX_C2
=0x1, 
EX_C2
=0x1;

1033 
WP_CHAR
 *
TX_J1
="0000000000000000", *
EX_J1
="0000000000000000",*
pTX_Tø˚Såög
="WG RS-TRACE",*
pEX_Tø˚Såög
="WG RS-TRACE";

1035 
U8
 
TX_C2
=0x2, 
EX_C2
=0x2;

1036 
WP_CHAR
 *
TX_J1
="WG HP-TRACE", *
EX_J1
="WG HP-TRACE",*
pTX_Tø˚Såög
="WG RS-TRACE",*
pEX_Tø˚Såög
="WG RS-TRACE";

1038 i‡(
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SONET
)

1040 
WP_U32
 
°s12
, 
°s3
;

1041 if(
löe_p‹t_mode
 =
WT_FLEXMUX_LINE_PORT_OC3
)

1043 
löe_íd_poöt
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SONET_TYPE_STS3
;

1044 
°s12
 = 0;

1045 
löe_íd_poöt
.
u
.
SONET
.
°s12
 = sts12;

1046 
°s3
=0; sts3<
max_löe_p‹ts
; sts3+=
löe_ö¸emít
)

1048 
	`WTI_FÀxmuxLöeP‹tC⁄fig
(0,

1049 
°s3
,

1050 
löe_p‹t_mode
);

1051 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëMode
(0, 
Êexmux_id
, 
°s3
, 
WPX_UFE_FRAMER_PATH_TRACE_MODE_16_BYTE
);

1052 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëTX
(0, 
Êexmux_id
, 
°s3
, 
pTX_Tø˚Såög
);

1053 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_SOH_J0_SëTX", 
°©us
, 
__LINE__
);

1055 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëEX
(0, 
Êexmux_id
, 
°s3
, 
pEX_Tø˚Såög
);

1056 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_SOH_J0_SëEX", 
°©us
, 
__LINE__
);

1058 
löe_íd_poöt
.
u
.
SONET
.
°s3
 = sts3;

1059 
löe_íd_poöt
.
u
.
SONET
.
°s1
 = 0;

1060 
°©us
 = 
	`WPX_FRMR_SONET_SDH_Cª©eFacûôy
(0, 
Êexmux_id
, &
löe_íd_poöt
);

1061 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_Cª©eFacûôy (VC3/4)", 
°©us
, 
__LINE__
);

1064 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_C2
);

1065 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_C2_SëTX", 
°©us
, 
__LINE__
);

1066 #i‡
WTI_FLEXMUX_DBG_MODE


1067 
U8
 
pTX_C2
;

1068 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pTX_C2
 );

1069 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

1070 if(
pTX_C2
!=
TX_C2
)

1072 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_C2_GetTX != TX_C2\n", 0);

1075 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_C2
);

1076 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_C2_SëEX", 
°©us
, 
__LINE__
);

1077 #i‡
WTI_FLEXMUX_DBG_MODE


1078 
U8
 
pEX_C2
;

1079 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pEX_C2
 );

1080 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

1081 if(
pTX_C2
!=
TX_C2
)

1083 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_C2_GetTX != EX_C2\n", 0);

1086 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëMode
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
WPX_UFE_FRAMER_PATH_TRACE_MODE_16_BYTE
);

1087 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_J1
);

1088 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_SëTX", 
°©us
, 
__LINE__
);

1089 #i‡
WTI_FLEXMUX_DBG_MODE


1090 
WP_CHAR
 
pTX_J1
[65];

1091 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_GëTX
(
Êexmux_id
, &
löe_íd_poöt
, 
pTX_J1
);

1092 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

1093 i‡(
	`°∫cmp
(
pTX_J1
, 
TX_J1
, 11))

1095 
	`¥ötf
("pTX_J1 %s\nTX_J1 %s\n", 
pTX_J1
, 
TX_J1
);

1096 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GetTX != TX_J1\n", 0);

1100 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_J1
);

1101 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_SëEX", 
°©us
, 
__LINE__
);

1102 #i‡
WTI_FLEXMUX_DBG_MODE


1103 
WP_CHAR
 
pEX_J1
[65];

1104 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_GëEX
(
Êexmux_id
, &
löe_íd_poöt
, 
pEX_J1
);

1105 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

1106 i‡(
	`°∫cmp
(
pEX_J1
, 
EX_J1
, 11))

1108 
	`¥ötf
("pEX_J1 %s\nEX_J1 %s\n", 
pEX_J1
, 
EX_J1
);

1109 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GetEX != EX_J1\n", 0);

1114 if(
löe_p‹t_mode
 =
WT_FLEXMUX_LINE_PORT_OC12
)

1116 
löe_íd_poöt
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SONET_TYPE_STS12
;

1117 
°s12
=0; sts12<
max_löe_p‹ts
; sts12+=
löe_ö¸emít
)

1119 
löe_íd_poöt
.
u
.
SONET
.
°s12
 = sts12;

1120 
	`WTI_FÀxmuxLöeP‹tC⁄fig
(0,

1121 
°s12
,

1122 
löe_p‹t_mode
);

1123 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëMode
(0, 
Êexmux_id
, 
°s12
, 
WPX_UFE_FRAMER_PATH_TRACE_MODE_16_BYTE
);

1124 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëTX
(0, 
Êexmux_id
, 
°s12
, 
pTX_Tø˚Såög
);

1125 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_SOH_J0_SëTX", 
°©us
, 
__LINE__
);

1127 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëEX
(0, 
Êexmux_id
, 
°s12
, 
pEX_Tø˚Såög
);

1128 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_SOH_J0_SëEX", 
°©us
, 
__LINE__
);

1129 
löe_íd_poöt
.
u
.
SONET
.
°s3
 = 0;

1130 
löe_íd_poöt
.
u
.
SONET
.
°s1
 = 0;

1131 
°©us
 = 
	`WPX_FRMR_SONET_SDH_Cª©eFacûôy
(0, 
Êexmux_id
, &
löe_íd_poöt
);

1132 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_Cª©eFacûôy (VC2/4)", 
°©us
, 
__LINE__
);

1135 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_C2
);

1136 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_C2_SëTX", 
°©us
, 
__LINE__
);

1138 #i‡
WTI_FLEXMUX_DBG_MODE


1139 
U8
 
pTX_C2
;

1140 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pTX_C2
 );

1141 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

1142 i‡(
pTX_C2
!=
TX_C2
)

1144 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_C2_GetTX != TX_C2\n", 0);

1147 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_C2
);

1148 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_C2_SëEX", 
°©us
, 
__LINE__
);

1149 #i‡
WTI_FLEXMUX_DBG_MODE


1150 
U8
 
pEX_C2
;

1151 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pEX_C2
 );

1152 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

1153 i‡(
pTX_C2
!=
TX_C2
)

1155 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_C2_GetTX != EX_C2\n", 0);

1158 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëMode
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
WPX_UFE_FRAMER_PATH_TRACE_MODE_16_BYTE
);

1159 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_J1
);

1160 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_SëTX", 
°©us
, 
__LINE__
);

1161 #i‡
WTI_FLEXMUX_DBG_MODE


1162 
WP_CHAR
 
pTX_J1
[65];

1163 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_GëTX
(
Êexmux_id
, &
löe_íd_poöt
, 
pTX_J1
);

1164 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

1165 i‡(
	`°∫cmp
(
pTX_J1
, 
TX_J1
, 11))

1167 
	`¥ötf
("pTX_J1 %s\nTX_J1 %s\n", 
pTX_J1
, 
TX_J1
);

1168 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GetTX != TX_J1\n", 0);

1171 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_J1
);

1172 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_SëEX", 
°©us
, 
__LINE__
);

1173 #i‡
WTI_FLEXMUX_DBG_MODE


1174 
WP_CHAR
 
pEX_J1
[65];

1175 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_GëEX
(
Êexmux_id
, &
löe_íd_poöt
, 
pEX_J1
);

1176 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

1177 i‡(
	`°∫cmp
(
pEX_J1
, 
EX_J1
, 11))

1179 
	`¥ötf
("pEX_J1 %s\nEX_J1 %s\n", 
pEX_J1
, 
EX_J1
);

1180 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GetEX != EX_J1\n", 0);

1186 if(
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SDH
)

1188 
WP_U32
 
°m4
, 
°m1
;

1191 i‡(
löe_p‹t_mode
 =
WT_FLEXMUX_LINE_PORT_STM1
)

1193 
°m4
 = 0;

1194 
löe_íd_poöt
.
u
.
SDH
.
°m4
 = stm4;

1195 
löe_íd_poöt
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC4
;

1196 
°m1
=0; stm1<
max_löe_p‹ts
; stm1+=
löe_ö¸emít
)

1198 
löe_íd_poöt
.
u
.
SDH
.
°m1
 = stm1;

1199 
	`WTI_FÀxmuxLöeP‹tC⁄fig
(0,
°m1
,
löe_p‹t_mode
);

1200 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëMode
(0, 
Êexmux_id
, 
°m1
, 
WPX_UFE_FRAMER_PATH_TRACE_MODE_16_BYTE
);

1201 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëTX
(0, 
Êexmux_id
, 
°m1
, 
pTX_Tø˚Såög
);

1202 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_SOH_J0_SëTX", 
°©us
, 
__LINE__
);

1204 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëEX
(0, 
Êexmux_id
, 
°m1
, 
pEX_Tø˚Såög
);

1205 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_SOH_J0_SëEX", 
°©us
, 
__LINE__
);

1207 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_B1_SëEx˚ssiveTh
(510 + 
°m1
, 0, stm1,

1208 
WPX_UFE_FRAMER_THRESHOLD_10E4
);

1209 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_SEC_B1_SëEx˚ssiveTh", 
°©us
, 
__LINE__
);

1211 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_B1_SëSig«lDegødeTh
(410 + 
°m1
, 0, stm1,

1212 
WPX_UFE_FRAMER_THRESHOLD_10E5
);

1213 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_SEC_B1_SëSig«lDegødeTh", 
°©us
, 
__LINE__
);

1215 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_LINE_B2_SëEx˚ssiveTh
(540 + 
°m1
, 0, stm1,

1216 
WPX_UFE_FRAMER_THRESHOLD_10E5
);

1217 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_LINE_B2_SëEx˚ssiveTh", 
°©us
, 
__LINE__
);

1219 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_LINE_B2_SëSigDegødeTh
(440 + 
°m1
, 0, stm1,

1220 
WPX_UFE_FRAMER_THRESHOLD_10E6
);

1221 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_LINE_B2_SëSigDegødeTh", 
°©us
, 
__LINE__
);

1223 
löe_íd_poöt
.
u
.
SDH
.
°m0
 = 0;

1224 
°©us
 = 
	`WPX_FRMR_SONET_SDH_Cª©eFacûôy
(0, 
Êexmux_id
, &
löe_íd_poöt
);

1225 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_Cª©eFacûôy (VC3/4)", 
°©us
, 
__LINE__
);

1228 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_C2
);

1229 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_C2_SëTX", 
°©us
, 
__LINE__
);

1230 #i‡
WTI_FLEXMUX_DBG_MODE


1231 
U8
 
pTX_C2
;

1232 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pTX_C2
 );

1233 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

1234 if(
pTX_C2
!=
TX_C2
)

1236 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_C2_GetTX != TX_C2\n", 0);

1239 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_C2
);

1240 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_C2_SëEX", 
°©us
, 
__LINE__
);

1241 #i‡
WTI_FLEXMUX_DBG_MODE


1242 
U8
 
pEX_C2
;

1243 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pEX_C2
 );

1244 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

1245 if(
pTX_C2
!=
TX_C2
)

1247 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_C2_GetTX != EX_C2\n", 0);

1250 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëMode
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
WPX_UFE_FRAMER_PATH_TRACE_MODE_16_BYTE
);

1251 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_J1
);

1252 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_SëTX", 
°©us
, 
__LINE__
);

1253 #i‡
WTI_FLEXMUX_DBG_MODE


1254 
WP_CHAR
 
pTX_J1
[65];

1255 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_GëTX
(
Êexmux_id
, &
löe_íd_poöt
, 
pTX_J1
);

1256 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GëTX", 
°©us
, 
__LINE__
);

1257 i‡(
	`°∫cmp
(
pTX_J1
, 
TX_J1
, 11))

1259 
	`¥ötf
("pTX_J1 %s\nTX_J1 %s\n", 
pTX_J1
, 
TX_J1
);

1260 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GetTX != TX_J1\n", 0);

1263 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_J1
);

1264 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_SëEX", 
°©us
, 
__LINE__
);

1265 #i‡
WTI_FLEXMUX_DBG_MODE


1266 
WP_CHAR
 
pEX_J1
[65];

1267 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_GëEX
(
Êexmux_id
, &
löe_íd_poöt
, 
pEX_J1
);

1268 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

1269 i‡(
	`°∫cmp
(
pTX_J1
, 
TX_J1
, 11))

1271 
	`¥ötf
("pEX_J1 %s\nEX_J1 %s\n", 
pEX_J1
, 
EX_J1
);

1272 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GetEX != EX_J1\n", 0);

1275 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_B3_SëEx˚ssiveTh
(0,
Êexmux_id
, &
löe_íd_poöt
,

1276 
WPX_UFE_FRAMER_THRESHOLD_10E4
);

1277 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_B3_SëEx˚ssiveTh", 
°©us
, 
__LINE__
);

1279 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_B3_SëSigDegødeTh
(0, 
Êexmux_id
, &
löe_íd_poöt
,

1280 
WPX_UFE_FRAMER_THRESHOLD_10E6
);

1281 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_B3_SëSigDegødeTh", 
°©us
, 
__LINE__
);

1284 i‡(
löe_p‹t_mode
 =
WT_FLEXMUX_LINE_PORT_STM4
)

1286 
°m4
=0; stm4<
max_löe_p‹ts
; stm4+=
löe_ö¸emít
)

1288 
°m1
=0;

1289 
löe_íd_poöt
.
u
.
SDH
.
°m4
 = stm4;

1290 
löe_íd_poöt
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC4_4C
;

1291 
	`WTI_FÀxmuxLöeP‹tC⁄fig
(0,

1292 
°m4
,

1293 
löe_p‹t_mode
);

1294 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëMode
(0, 
Êexmux_id
, 
°m4
, 
WPX_UFE_FRAMER_PATH_TRACE_MODE_16_BYTE
);

1295 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëTX
(0, 
Êexmux_id
, 
°m4
, 
pTX_Tø˚Såög
);

1296 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_SOH_J0_SëTX", 
°©us
, 
__LINE__
);

1298 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_J0_SëEX
(0, 
Êexmux_id
, 
°m4
, 
pEX_Tø˚Såög
);

1299 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_SOH_J0_SëEX", 
°©us
, 
__LINE__
);

1301 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_B1_SëEx˚ssiveTh
(510 + 
°m1
, 
Êexmux_id
, 
°m4
,

1302 
WPX_UFE_FRAMER_THRESHOLD_10E4
);

1303 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_SEC_B1_SëEx˚ssiveTh", 
°©us
, 
__LINE__
);

1305 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SEC_B1_SëSig«lDegødeTh
(410 + 
°m1
, 
Êexmux_id
, 
°m4
,

1306 
WPX_UFE_FRAMER_THRESHOLD_10E5
);

1307 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_SEC_B1_SëSig«lDegødeTh", 
°©us
, 
__LINE__
);

1309 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_LINE_B2_SëEx˚ssiveTh
(540 + 
°m1
, 
Êexmux_id
, 
°m4
,

1310 
WPX_UFE_FRAMER_THRESHOLD_10E5
);

1311 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_LINE_B2_SëEx˚ssiveTh", 
°©us
, 
__LINE__
);

1313 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_LINE_B2_SëSigDegødeTh
(440 + 
°m1
, 
Êexmux_id
, 
°m4
,

1314 
WPX_UFE_FRAMER_THRESHOLD_10E6
);

1315 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_LINE_B2_SëSigDegødeTh", 
°©us
, 
__LINE__
);

1316 
löe_íd_poöt
.
u
.
SDH
.
°m1
 = 0;

1317 
löe_íd_poöt
.
u
.
SDH
.
°m0
 = 0;

1318 
°©us
 = 
	`WPX_FRMR_SONET_SDH_Cª©eFacûôy
(0, 
Êexmux_id
, &
löe_íd_poöt
);

1319 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_Cª©eFacûôy (VC3/4)", 
°©us
, 
__LINE__
);

1322 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_C2
);

1323 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_C2_SëTX", 
°©us
, 
__LINE__
);

1324 #i‡
WTI_FLEXMUX_DBG_MODE


1325 
U8
 
pTX_C2
;

1326 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pTX_C2
 );

1327 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

1328 if(
pTX_C2
!=
TX_C2
)

1330 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_C2_GetTX != TX_C2\n", 0);

1333 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_C2
);

1334 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_C2_SëEX", 
°©us
, 
__LINE__
);

1335 #i‡
WTI_FLEXMUX_DBG_MODE


1336 
U8
 
pEX_C2
;

1337 
°©us
 =
	`WPX_FRMR_SONET_SDH_HO_PATH_C2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pEX_C2
 );

1338 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

1339 if(
pTX_C2
!=
TX_C2
)

1341 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_C2_GetTX != EX_C2\n", 0);

1344 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëMode
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
WPX_UFE_FRAMER_PATH_TRACE_MODE_16_BYTE
);

1345 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_J1
);

1346 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_SëTX", 
°©us
, 
__LINE__
);

1347 #i‡
WTI_FLEXMUX_DBG_MODE


1348 
WP_CHAR
 
pTX_J1
[65];

1349 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_GëTX
(
Êexmux_id
, &
löe_íd_poöt
, 
pTX_J1
);

1350 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

1351 i‡(
	`°∫cmp
(
pTX_J1
, 
TX_J1
, 11))

1353 
	`¥ötf
("pTX_J1 %s\nTX_J1 %s\n", 
pTX_J1
, 
TX_J1
);

1354 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GetTX != TX_J1\n", 0);

1358 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_J1
);

1359 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_J1_SëEX", 
°©us
, 
__LINE__
);

1360 #i‡
WTI_FLEXMUX_DBG_MODE


1361 
WP_CHAR
 
pEX_J1
[65];

1362 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_J1_GëEX
(
Êexmux_id
, &
löe_íd_poöt
, 
pEX_J1
);

1363 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëMode", 
°©us
, 
__LINE__
);

1364 i‡(
	`°∫cmp
(
pEX_J1
, 
EX_J1
, 11))

1366 
	`¥ötf
("pEX_J1 %s\nEX_J1 %s\n", 
pEX_J1
, 
EX_J1
);

1367 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_HO_PATH_J1_GetEX != EX_J1\n", 0);

1370 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_B3_SëEx˚ssiveTh
(700, 0, &
löe_íd_poöt
,

1371 
WPX_UFE_FRAMER_THRESHOLD_10E4
);

1372 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_B3_SëEx˚ssiveTh", 
°©us
, 
__LINE__
);

1374 
°©us
 = 
	`WPX_FRMR_SONET_SDH_HO_PATH_B3_SëSigDegødeTh
(701, 0, &
löe_íd_poöt
,

1375 
WPX_UFE_FRAMER_THRESHOLD_10E6
);

1376 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_HO_PATH_B3_SëSigDegødeTh", 
°©us
, 
__LINE__
);

1381 
	}
}

1390 
WP_S32
 
	$WTI_FÀxmuxLöeP‹tC⁄fig
(
WP_U8
 
Êexmux_id
,

1391 
WP_U8
 
löe_p‹t_id
,

1392 
WTI_Êexmux_löe_p‹t_mode
 
löe_p‹t_cfg
)

1394 
WP_U8
 
°©us
 =0;

1396 i‡(
Êexmux_id
 > 
WPX_UFE_FRAMER_BUILD_OPTION_MAX_DEVICES
)

1397 
	`WTI_FÀxmuxTîmö©eOnEº‹
("flexmux_id is out of bounds !", 0);

1399 i‡(
Êexmux_ªg
[
Êexmux_id
].
is_öôülized
 !
WP_TRUE
)

1400 
	`WTI_FÀxmuxTîmö©eOnEº‹
("Flexmux device isÇot initialized!", 0);

1402 i‡(
löe_p‹t_id
 >
WTI_MAX_LINE_PORTS_PER_FLEXMUX_DEVICE
)

1403 
	`WTI_FÀxmuxTîmö©eOnEº‹
("InvalidÜine_port_id!", 0);

1405 i‡((
Êexmux_ªg
[
Êexmux_id
].
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SONET
) &&

1406 (
löe_p‹t_cfg
 !
WT_FLEXMUX_LINE_PORT_OC3
 &&Üöe_p‹t_cfg !
WT_FLEXMUX_LINE_PORT_OC12
))

1407 
	`WTI_FÀxmuxTîmö©eOnEº‹
("InvalidÜine_port_cfg!", 0);

1409 i‡((
Êexmux_ªg
[
Êexmux_id
].
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SDH
) &&

1410 (
löe_p‹t_cfg
 !
WT_FLEXMUX_LINE_PORT_STM1
 &&Üöe_p‹t_cfg !
WT_FLEXMUX_LINE_PORT_STM4
))

1411 
	`WTI_FÀxmuxTîmö©eOnEº‹
("InvalidÜine_port_cfg!", 0);

1413 #unde‡
WTI_FLEXMUX_DBG_MODE


1414 
	#WTI_FLEXMUX_DBG_MODE
 1

	)

1415 i‡(
löe_p‹t_cfg
 =
WT_FLEXMUX_LINE_PORT_OC3
)

1417 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SëR©e
(0, 
Êexmux_id
, 
löe_p‹t_id
, 
WPX_UFE_FRAMER_LINE_PORT_RATE_OC3
);

1418 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_SëR©e", 
°©us
, 
__LINE__
);

1419 #i‡
WTI_FLEXMUX_DBG_MODE


1421 
U8
 
pP‹tR©e
;

1422 
°©us
 =
	`WPX_FRMR_SONET_SDH_PORT_GëR©e
(
Êexmux_id
,
löe_p‹t_id
,&
pP‹tR©e
 );

1423 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_GëR©e", 
°©us
, 
__LINE__
);

1424 if(
pP‹tR©e
!=
WPX_UFE_FRAMER_LINE_PORT_RATE_OC3
)

1426 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_PORT_GetRate != WPX_UFE_FRAMER_LINE_PORT_RATE_STS3C\n", 0);

1431 i‡(
löe_p‹t_cfg
 =
WT_FLEXMUX_LINE_PORT_OC12
)

1433 
U8
 
pP‹tR©e
;

1434 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SëR©e
(0, 
Êexmux_id
, 
löe_p‹t_id
, 
WPX_UFE_FRAMER_LINE_PORT_RATE_OC12
);

1435 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_SëR©e", 
°©us
, 
__LINE__
);

1436 #i‡
WTI_FLEXMUX_DBG_MODE


1437 
°©us
 =
	`WPX_FRMR_SONET_SDH_PORT_GëR©e
(
Êexmux_id
,
löe_p‹t_id
,&
pP‹tR©e
 );

1438 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_GëR©e", 
°©us
, 
__LINE__
);

1439 if(
pP‹tR©e
!=
WPX_UFE_FRAMER_LINE_PORT_RATE_OC12
)

1441 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_PORT_GetRate != WPX_UFE_FRAMER_LINE_PORT_RATE_STS12C\n", 0);

1446 i‡(
löe_p‹t_cfg
 =
WT_FLEXMUX_LINE_PORT_STM1
)

1448 
U8
 
pP‹tR©e
;

1449 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SëR©e
(0, 
Êexmux_id
, 
löe_p‹t_id
, 
WPX_UFE_FRAMER_LINE_PORT_RATE_STM1
);

1450 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_SëR©e", 
°©us
, 
__LINE__
);

1451 #i‡
WTI_FLEXMUX_DBG_MODE


1452 
°©us
 =
	`WPX_FRMR_SONET_SDH_PORT_GëR©e
(
Êexmux_id
,
löe_p‹t_id
,&
pP‹tR©e
 );

1453 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_GëR©e", 
°©us
, 
__LINE__
);

1454 if(
pP‹tR©e
!=
WPX_UFE_FRAMER_LINE_PORT_RATE_STM1
)

1456 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_PORT_GetRate != WPX_UFE_FRAMER_LINE_PORT_RATE_STM1\n", 0);

1460 i‡(
löe_p‹t_cfg
 =
WT_FLEXMUX_LINE_PORT_STM4
)

1462 
U8
 
pP‹tR©e
;

1463 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_SëR©e
(0, 
Êexmux_id
, 
löe_p‹t_id
, 
WPX_UFE_FRAMER_LINE_PORT_RATE_STM4
);

1464 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_SëR©e", 
°©us
, 
__LINE__
);

1465 #i‡
WTI_FLEXMUX_DBG_MODE


1466 
°©us
 =
	`WPX_FRMR_SONET_SDH_PORT_GëR©e
(
Êexmux_id
,
löe_p‹t_id
,&
pP‹tR©e
 );

1467 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_GëR©e", 
°©us
, 
__LINE__
);

1468 if(
pP‹tR©e
!=
WPX_UFE_FRAMER_LINE_PORT_RATE_STM4
)

1470 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_PORT_GetRate != WPX_UFE_FRAMER_LINE_PORT_RATE_STM4\n", 0);

1474 #unde‡
WTI_FLEXMUX_DBG_MODE


1475 
	#WTI_FLEXMUX_DBG_MODE
 0

	)

1478 
Êexmux_ªg
[
Êexmux_id
].
löe_p‹ts_ªg
[
löe_p‹t_id
].
löe_p‹t_mode
 = 
löe_p‹t_cfg
;

1481 
	}
}

1483 
WP_S32
 
	$WTI_FÀxmuxDccE«bÀ
(
WP_U8
 
Êexmux_id
,

1484 
WP_U8
 
löe_p‹t_id
,

1485 
WP_U32
 
dcc_mode
)

1487 
WP_U8
 
°©us
 =0;

1490 i‡(
Êexmux_id
 > 
WPX_UFE_FRAMER_BUILD_OPTION_MAX_DEVICES
)

1491 
	`WTI_FÀxmuxTîmö©eOnEº‹
("flexmux_id is out of bounds !", 0);

1494 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_DCC_E«bÀ
(0 ,
Êexmux_id
, 
löe_p‹t_id
, 
dcc_mode
);

1495 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_DCC_E«bÀ", 
°©us
, 
__LINE__
);

1498 
	}
}

1500 
WP_S32
 
	$WTI_FÀxmuxDccDißbÀ
(
WP_U8
 
Êexmux_id
,

1501 
WP_U8
 
löe_p‹t_id
,

1502 
WP_U32
 
dcc_mode
)

1504 
WP_U8
 
°©us
 =0;

1507 i‡(
Êexmux_id
 > 
WPX_UFE_FRAMER_BUILD_OPTION_MAX_DEVICES
)

1508 
	`WTI_FÀxmuxTîmö©eOnEº‹
("flexmux_id is out of bounds !", 0);

1511 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_DCC_DißbÀ
(0 ,
Êexmux_id
, 
löe_p‹t_id
, 
dcc_mode
);

1512 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_DCC_DißbÀ", 
°©us
, 
__LINE__
);

1515 
	}
}

1517 
WP_S32
 
	$WTI_FÀxmuxC⁄√˘i⁄Cª©e
(
WP_U8
 
Êexmux_id
,

1518 
WP_U8
 
löe_p‹t_id
,

1519 
WP_U32
 
˛õ¡_p‹t_id
,

1520 
WTI_Êexmux_c⁄√˘i⁄_ty≥
 
ty≥
,

1521 *
u„_löe_∑øms
)

1524 
WP_U8
 
°©us
 =0,
tx_˛k_ªc_íabÀ
=0;

1525 
WP_U32
 
löe_timög
=0;

1526 
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
 
löe_íd_poöt
;

1528 i‡(
Êexmux_id
 > 
WPX_UFE_FRAMER_BUILD_OPTION_MAX_DEVICES
)

1529 
	`WTI_FÀxmuxTîmö©eOnEº‹
("flexmux_id is out of bounds !", 0);

1532 i‡(
ty≥
 =
WT_FLEXMUX_CONNECTION_TYPE_E1_UNFRAMED
)

1534 
	`¥ötf
 ("setÉ1 frme unframed\n");

1535 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_Cª©eFacûôy
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_E1
);

1536 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_Cª©eFacûôy", 
°©us
, 
__LINE__
);

1538 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_SëFømög
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_UNFRAMED
);

1539 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_SëFømög", 
°©us
, 
__LINE__
);

1540 #i‡
WTI_FLEXMUX_DBG_MODE


1541 
U8
 
pFømög
;

1542 
°©us
 =
	`WPX_FRMR_SOCKET_PDH_GëFømög
(
Êexmux_id
,
˛õ¡_p‹t_id
,&
pFømög
 );

1543 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_GëFømög", 
°©us
, 
__LINE__
);

1544 if(
pFømög
!=
WPX_UFE_FRAMER_CLIENT_UNFRAMED
)

1546 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SOCKET_PDH_GetFraming != WPX_UFE_FRAMER_CLIENT_UNFRAMED\n", 0);

1549 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_SëM≠pög
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC
);

1550 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_SëM≠pög", 
°©us
, 
__LINE__
);

1551 #i‡
WTI_FLEXMUX_DBG_MODE


1552 
U8
 
pM≠pög
;

1553 
°©us
 =
	`WPX_FRMR_SOCKET_PDH_GëM≠pög
(
Êexmux_id
,
˛õ¡_p‹t_id
,&
pM≠pög
 );

1554 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_GëM≠pög", 
°©us
, 
__LINE__
);

1555 if(
pM≠pög
!=
WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC
)

1557 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SOCKET_PDH_GetMapping != WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC\n", 0);

1562 i‡(
ty≥
 =
WT_FLEXMUX_CONNECTION_TYPE_E1_FRAMED
)

1564 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_Cª©eFacûôy
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_E1
);

1565 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_Cª©eFacûôy", 
°©us
, 
__LINE__
);

1567 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_SëFømög
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_PCM31CRC
);

1568 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_SëFømög", 
°©us
, 
__LINE__
);

1570 #i‡
WTI_FLEXMUX_DBG_MODE


1571 
U8
 
pFømög
;

1572 
°©us
 =
	`WPX_FRMR_SOCKET_PDH_GëFømög
(
Êexmux_id
,
˛õ¡_p‹t_id
,&
pFømög
 );

1573 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_GëFømög", 
°©us
, 
__LINE__
);

1574 if(
pFømög
!=
WPX_UFE_FRAMER_CLIENT_PCM31CRC
)

1576 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SOCKET_PDH_GetFraming != WPX_UFE_FRAMER_CLIENT_PCM31CRC\n", 0);

1580 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_SëM≠pög
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC
);

1581 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_SëM≠pög", 
°©us
, 
__LINE__
);

1583 #i‡
WTI_FLEXMUX_DBG_MODE


1584 
U8
 
pM≠pög
;

1585 
°©us
 =
	`WPX_FRMR_SOCKET_PDH_GëM≠pög
(
Êexmux_id
,
˛õ¡_p‹t_id
,&
pM≠pög
 );

1586 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_GëM≠pög", 
°©us
, 
__LINE__
);

1587 if(
pM≠pög
!=
WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC
)

1589 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SOCKET_PDH_GetMapping != WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC\n", 0);

1593 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_DißbÀCAS
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
);

1594 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_DißbÀCAS", 
°©us
, 
__LINE__
);

1596 #i‡
WTI_FLEXMUX_DBG_MODE


1597 
U8
 
pCAS_IsE«bÀd
;

1598 
°©us
 =
	`WPX_FRMR_SOCKET_PDH_Gë_CAS_Sèã
(
Êexmux_id
,
˛õ¡_p‹t_id
,&
pCAS_IsE«bÀd
 );

1599 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_Gë_CAS_Sèã", 
°©us
, 
__LINE__
);

1600 if(
pCAS_IsE«bÀd
!=0)

1602 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SOCKET_PDH_Get_CAS_State != 0\n", 0);

1607 i‡(
ty≥
 =
WT_FLEXMUX_CONNECTION_TYPE_E1_FRAMED_CAS
)

1609 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_Cª©eFacûôy
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_E1
);

1610 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_Cª©eFacûôy", 
°©us
, 
__LINE__
);

1612 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_SëFømög
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_PCM31CRC
);

1613 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_SëFømög", 
°©us
, 
__LINE__
);

1615 #i‡
WTI_FLEXMUX_DBG_MODE


1616 
U8
 
pFømög
;

1617 
°©us
 =
	`WPX_FRMR_SOCKET_PDH_GëFømög
(
Êexmux_id
,
˛õ¡_p‹t_id
,&
pFømög
 );

1618 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_GëFømög", 
°©us
, 
__LINE__
);

1619 if(
pFømög
!=
WPX_UFE_FRAMER_CLIENT_PCM31CRC
)

1621 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SOCKET_PDH_GetFraming != WPX_UFE_FRAMER_CLIENT_PCM31CRC\n", 0);

1625 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_SëM≠pög
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC
);

1626 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_SëM≠pög", 
°©us
, 
__LINE__
);

1628 #i‡
WTI_FLEXMUX_DBG_MODE


1629 
U8
 
pM≠pög
;

1630 
°©us
 =
	`WPX_FRMR_SOCKET_PDH_GëM≠pög
(
Êexmux_id
,
˛õ¡_p‹t_id
,&
pM≠pög
 );

1631 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_GëM≠pög", 
°©us
, 
__LINE__
);

1632 if(
pM≠pög
!=
WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC
)

1634 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SOCKET_PDH_GetMapping != WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC\n", 0);

1639 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_E«bÀCAS
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
);

1640 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_DißbÀCAS", 
°©us
, 
__LINE__
);

1642 #i‡
WTI_FLEXMUX_DBG_MODE


1643 
U8
 
pCAS_IsE«bÀd
;

1644 
°©us
 =
	`WPX_FRMR_SOCKET_PDH_Gë_CAS_Sèã
(
Êexmux_id
,
˛õ¡_p‹t_id
,&
pCAS_IsE«bÀd
 );

1645 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_Gë_CAS_Sèã", 
°©us
, 
__LINE__
);

1646 if(
pCAS_IsE«bÀd
!=1)

1648 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SOCKET_PDH_Get_CAS_State != 1\n", 0);

1653 i‡(
ty≥
 =
WT_FLEXMUX_CONNECTION_TYPE_T1_UNFRAMED
)

1655 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_Cª©eFacûôy
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_T1
);

1656 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_Cª©eFacûôy", 
°©us
, 
__LINE__
);

1658 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_SëFømög
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_UNFRAMED
);

1659 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_SëFømög", 
°©us
, 
__LINE__
);

1661 #i‡
WTI_FLEXMUX_DBG_MODE


1662 
U8
 
pFømög
;

1663 
°©us
 =
	`WPX_FRMR_SOCKET_PDH_GëFømög
(
Êexmux_id
,
˛õ¡_p‹t_id
,&
pFømög
 );

1664 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_GëFømög", 
°©us
, 
__LINE__
);

1665 if(
pFømög
!=
WPX_UFE_FRAMER_CLIENT_UNFRAMED
)

1667 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SOCKET_PDH_GetFraming != WPX_UFE_FRAMER_CLIENT_UNFRAMED\n", 0);

1671 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_SëM≠pög
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC
);

1672 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_SëM≠pög", 
°©us
, 
__LINE__
);

1674 #i‡
WTI_FLEXMUX_DBG_MODE


1675 
U8
 
pM≠pög
;

1676 
°©us
 =
	`WPX_FRMR_SOCKET_PDH_GëM≠pög
(
Êexmux_id
,
˛õ¡_p‹t_id
,&
pM≠pög
 );

1677 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_GëM≠pög", 
°©us
, 
__LINE__
);

1678 if(
pM≠pög
!=
WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC
)

1680 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SOCKET_PDH_GetMapping != WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC\n", 0);

1685 i‡(
ty≥
 =
WT_FLEXMUX_CONNECTION_TYPE_T1_FRAMED
)

1687 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_Cª©eFacûôy
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_T1
);

1688 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_Cª©eFacûôy", 
°©us
, 
__LINE__
);

1690 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_SëFømög
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
,
WPX_UFE_FRAMER_CLIENT_FRAMING_ESF
 );

1691 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_SëFømög", 
°©us
, 
__LINE__
);

1693 #i‡
WTI_FLEXMUX_DBG_MODE


1694 
U8
 
pFømög
;

1695 
°©us
 =
	`WPX_FRMR_SOCKET_PDH_GëFømög
(
Êexmux_id
,
˛õ¡_p‹t_id
,&
pFømög
 );

1696 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_GëFømög", 
°©us
, 
__LINE__
);

1697 if(
pFømög
!=
WPX_UFE_FRAMER_CLIENT_FRAMING_ESF
)

1699 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SOCKET_PDH_GetFraming != WPX_UFE_FRAMER_CLIENT_FRAMING_ESF\n", 0);

1703 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_SëM≠pög
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC
);

1704 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_SëM≠pög", 
°©us
, 
__LINE__
);

1706 #i‡
WTI_FLEXMUX_DBG_MODE


1707 
U8
 
pM≠pög
;

1708 
°©us
 =
	`WPX_FRMR_SOCKET_PDH_GëM≠pög
(
Êexmux_id
,
˛õ¡_p‹t_id
,&
pM≠pög
 );

1709 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_GëM≠pög", 
°©us
, 
__LINE__
);

1710 if(
pM≠pög
!=
WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC
)

1712 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SOCKET_PDH_GetMapping != WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC\n", 0);

1716 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_DißbÀCAS
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
);

1717 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_DißbÀCAS", 
°©us
, 
__LINE__
);

1719 #i‡
WTI_FLEXMUX_DBG_MODE


1720 
U8
 
pCAS_IsE«bÀd
;

1721 
°©us
 =
	`WPX_FRMR_SOCKET_PDH_Gë_CAS_Sèã
(
Êexmux_id
,
˛õ¡_p‹t_id
,&
pCAS_IsE«bÀd
 );

1722 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_Gë_CAS_Sèã", 
°©us
, 
__LINE__
);

1723 if(
pCAS_IsE«bÀd
!=0)

1725 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SOCKET_PDH_Get_CAS_State != 0\n", 0);

1729 i‡(
ty≥
 =
WT_FLEXMUX_CONNECTION_TYPE_T1_FRAMED_CAS
)

1731 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_Cª©eFacûôy
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_T1
);

1732 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_Cª©eFacûôy", 
°©us
, 
__LINE__
);

1734 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_SëFømög
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_FRAMING_ESF
);

1735 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_SëFømög", 
°©us
, 
__LINE__
);

1737 #i‡
WTI_FLEXMUX_DBG_MODE


1738 
U8
 
pFømög
;

1739 
°©us
 =
	`WPX_FRMR_SOCKET_PDH_GëFømög
(
Êexmux_id
,
˛õ¡_p‹t_id
,&
pFømög
 );

1740 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_GëFømög", 
°©us
, 
__LINE__
);

1741 if(
pFømög
!=
WPX_UFE_FRAMER_CLIENT_FRAMING_ESF
)

1743 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SOCKET_PDH_GetFraming != WPX_UFE_FRAMER_CLIENT_FRAMING_ESF\n", 0);

1747 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_SëM≠pög
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC
);

1748 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_SëM≠pög", 
°©us
, 
__LINE__
);

1750 #i‡
WTI_FLEXMUX_DBG_MODE


1751 
U8
 
pM≠pög
;

1752 
°©us
 =
	`WPX_FRMR_SOCKET_PDH_GëM≠pög
(
Êexmux_id
,
˛õ¡_p‹t_id
,&
pM≠pög
 );

1753 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_GëM≠pög", 
°©us
, 
__LINE__
);

1754 if(
pM≠pög
!=
WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC
)

1756 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SOCKET_PDH_GetMapping != WPX_UFE_FRAMER_CLIENT_MAPPING_BIT_ASYNC\n", 0);

1760 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_E«bÀCAS
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
);

1761 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_E«bÀCAS", 
°©us
, 
__LINE__
);

1763 #i‡
WTI_FLEXMUX_DBG_MODE


1764 
U8
 
pCAS_IsE«bÀd
;

1765 
°©us
 =
	`WPX_FRMR_SOCKET_PDH_Gë_CAS_Sèã
(
Êexmux_id
,
˛õ¡_p‹t_id
,&
pCAS_IsE«bÀd
 );

1766 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_Gë_CAS_Sèã", 
°©us
, 
__LINE__
);

1767 if(
pCAS_IsE«bÀd
!=1)

1769 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SOCKET_PDH_Get_CAS_State != 1\n", 0);

1773 if(
ty≥
 =
WT_FLEXMUX_CONNECTION_TYPE_STS3
)

1775 
WT_u„_löe_s⁄ë_∑øms
 *
s⁄ë_löe_∑øms
 = (WT_u„_löe_s⁄ë_∑øms*Ë
u„_löe_∑øms
;

1776 
löe_íd_poöt
.
u
.
SONET
.
°s12
 = 
s⁄ë_löe_∑øms
->sts12;

1777 
löe_íd_poöt
.
u
.
SONET
.
°s3
 = 
s⁄ë_löe_∑øms
->sts3;

1778 
löe_íd_poöt
.
u
.
SONET
.
°s1
 = 
s⁄ë_löe_∑øms
->sts1;

1779 
löe_íd_poöt
.
u
.
SONET
.
vt_group
 = 
s⁄ë_löe_∑øms
->vt_group;

1780 
löe_íd_poöt
.
u
.
SONET
.
vt
 = 
s⁄ë_löe_∑øms
->vt;

1781 
löe_íd_poöt
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SONET_TYPE_STS3
;

1782 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_Cª©eFacûôy
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_C4
);

1783 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_Cª©eFacûôy", 
°©us
, 
__LINE__
);

1784 
°©us
 = 
	`WPX_FRMR_CONNECTIONS_AddDr›LöeToSockëCª©e
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
˛õ¡_p‹t_id
);

1785 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_CONNECTIONS_AddDr›LöeToSockëCª©e", 
°©us
, 
__LINE__
);

1810 if(
ty≥
 =
WT_FLEXMUX_CONNECTION_TYPE_STS12
)

1812 
WT_u„_löe_s⁄ë_∑øms
 *
s⁄ë_löe_∑øms
 = (WT_u„_löe_s⁄ë_∑øms*Ë
u„_löe_∑øms
;

1813 
löe_íd_poöt
.
u
.
SONET
.
°s12
 = 
s⁄ë_löe_∑øms
->sts12;

1814 
löe_íd_poöt
.
u
.
SONET
.
°s3
 = 
s⁄ë_löe_∑øms
->sts3;

1815 
löe_íd_poöt
.
u
.
SONET
.
°s1
 = 
s⁄ë_löe_∑øms
->sts1;

1816 
löe_íd_poöt
.
u
.
SONET
.
vt_group
 = 
s⁄ë_löe_∑øms
->vt_group;

1817 
löe_íd_poöt
.
u
.
SONET
.
vt
 = 
s⁄ë_löe_∑øms
->vt;

1818 
löe_íd_poöt
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SONET_TYPE_STS12
;

1819 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_Cª©eFacûôy
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_C4_4C
);

1820 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_Cª©eFacûôy", 
°©us
, 
__LINE__
);

1821 
°©us
 = 
	`WPX_FRMR_CONNECTIONS_AddDr›LöeToSockëCª©e
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
˛õ¡_p‹t_id
);

1822 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_CONNECTIONS_AddDr›LöeToSockëCª©e", 
°©us
, 
__LINE__
);

1825 if(
ty≥
 =
WT_FLEXMUX_CONNECTION_TYPE_VC4
)

1827 
WT_u„_löe_sdh_∑øms
 *
sdh_löe_∑øms
 = (WT_u„_löe_sdh_∑øms*Ë
u„_löe_∑øms
;

1828 
löe_íd_poöt
.
u
.
SDH
.
°m4
 = 
sdh_löe_∑øms
->stm4;

1829 
löe_íd_poöt
.
u
.
SDH
.
°m1
 = 
sdh_löe_∑øms
->stm1;

1830 
löe_íd_poöt
.
u
.
SDH
.
°m0
 = 
sdh_löe_∑øms
->stm0;

1831 
löe_íd_poöt
.
u
.
SDH
.
tug2
 = 
sdh_löe_∑øms
->tug2;

1832 
löe_íd_poöt
.
u
.
SDH
.
tu
 = 
sdh_löe_∑øms
->tu;

1833 
löe_íd_poöt
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC4
;

1834 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_Cª©eFacûôy
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_C4
);

1835 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_Cª©eFacûôy", 
°©us
, 
__LINE__
);

1836 
°©us
 = 
	`WPX_FRMR_CONNECTIONS_AddDr›LöeToSockëCª©e
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
˛õ¡_p‹t_id
);

1837 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_CONNECTIONS_AddDr›LöeToSockëCª©e", 
°©us
, 
__LINE__
);

1840 if(
ty≥
 =
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC4_4C
)

1842 
WT_u„_löe_sdh_∑øms
 *
sdh_löe_∑øms
 = (WT_u„_löe_sdh_∑øms*Ë
u„_löe_∑øms
;

1843 
löe_íd_poöt
.
u
.
SDH
.
°m4
 = 
sdh_löe_∑øms
->stm4;

1844 
löe_íd_poöt
.
u
.
SDH
.
°m1
 = 
sdh_löe_∑øms
->stm1;

1845 
löe_íd_poöt
.
u
.
SDH
.
°m0
 = 
sdh_löe_∑øms
->stm0;

1846 
löe_íd_poöt
.
u
.
SDH
.
tug2
 = 
sdh_löe_∑øms
->tug2;

1847 
löe_íd_poöt
.
u
.
SDH
.
tu
 = 
sdh_löe_∑øms
->tu;

1848 
löe_íd_poöt
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC4_4C
;

1849 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_Cª©eFacûôy
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_CLIENT_C4_4C
);

1850 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_Cª©eFacûôy", 
°©us
, 
__LINE__
);

1851 
°©us
 = 
	`WPX_FRMR_CONNECTIONS_AddDr›LöeToSockëCª©e
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
˛õ¡_p‹t_id
);

1852 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_CONNECTIONS_AddDr›LöeToSockëCª©e", 
°©us
, 
__LINE__
);

1857 
	`WTI_FÀxmuxTîmö©eOnEº‹
("ConnectionÅype isÇot supported !", 0);

1861 i‡(
Êexmux_ªg
[
Êexmux_id
].
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SONET
)

1863 
WT_u„_löe_s⁄ë_∑øms
 *
s⁄ë_löe_∑øms
 = (WT_u„_löe_s⁄ë_∑øms*Ë
u„_löe_∑øms
;

1864 
U8
 
TX_V5_Sig«lLabñ
=0x2, 
EX_V5_Sig«lLabñ
=0x2;

1865 
WP_CHAR
 *
TX_J2_Tø˚Såög
 = "WG LP-TRACE",*
EX_J2_Tø˚Såög
 = "WG LP-TRACE";

1867 
löe_íd_poöt
.
u
.
SONET
.
°s12
 = 
s⁄ë_löe_∑øms
->sts12;

1868 
löe_íd_poöt
.
u
.
SONET
.
°s3
 = 
s⁄ë_löe_∑øms
->sts3;

1869 
löe_íd_poöt
.
u
.
SONET
.
°s1
 = 
s⁄ë_löe_∑øms
->sts1;

1870 
löe_íd_poöt
.
u
.
SONET
.
vt_group
 = 
s⁄ë_löe_∑øms
->vt_group;

1871 
löe_íd_poöt
.
u
.
SONET
.
vt
 = 
s⁄ë_löe_∑øms
->vt;

1873 #i‡
WTI_FLEXMUX_DBG_MODE


1874 
	`¥ötf
("c⁄√˘ög clõ¡_p‹t_id %dÅÿlöe_p‹t_id %d\n",
˛õ¡_p‹t_id
,
löe_p‹t_id
);

1875 
	`¥ötf
("°s12 %d sts3 %d sts1 %d vt_grou∞%d và%d\n", 
s⁄ë_löe_∑øms
->
°s12
,

1876 
s⁄ë_löe_∑øms
->
°s3
,

1877 
s⁄ë_löe_∑øms
->
°s1
,

1878 
s⁄ë_löe_∑øms
->
vt_group
,

1879 
s⁄ë_löe_∑øms
->
vt
);

1882 i‡(
s⁄ë_löe_∑øms
->
å™s„r_ty≥
 =
WUFE_SONET_TYPE_E1
)

1883 
löe_íd_poöt
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SONET_TYPE_VT2
;

1884 i‡(
s⁄ë_löe_∑øms
->
å™s„r_ty≥
 =
WUFE_SONET_TYPE_T1
)

1885 
löe_íd_poöt
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SONET_TYPE_VT1_5
;

1887 
	`WTI_FÀxmuxTîmö©eOnEº‹
("InvalidÜineÅransferÅype", 0);

1890 
°©us
 = 
	`WPX_FRMR_SONET_SDH_Cª©eFacûôy
(0, 
Êexmux_id
, &
löe_íd_poöt
);

1891 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_Cª©eFacûôy (Vt1.5 o∏Vt2)", 
°©us
, 
__LINE__
);

1894 
°©us
 = 
	`WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabñ_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_V5_Sig«lLabñ
);

1895 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabñ_SëTX", 
°©us
, 
__LINE__
);

1897 #i‡
WTI_FLEXMUX_DBG_MODE


1898 
U8
 
pTX_V5_Sig«lLabñ
;

1899 
°©us
 =
	`WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabñ_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pTX_V5_Sig«lLabñ
 );

1900 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabñ_GëTX", 
°©us
, 
__LINE__
);

1901 if(
pTX_V5_Sig«lLabñ
!=
TX_V5_Sig«lLabñ
)

1903 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabel_GetTX != TX_V5_SignalLabel\n", 0);

1907 
°©us
 = 
	`WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabñ_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_V5_Sig«lLabñ
);

1908 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabñ_SëEX", 
°©us
, 
__LINE__
);

1910 #i‡
WTI_FLEXMUX_DBG_MODE


1911 
U8
 
pEX_V5_Sig«lLabñ
;

1912 
°©us
 =
	`WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabñ_GëEX
(
Êexmux_id
,&
löe_íd_poöt
,&
pEX_V5_Sig«lLabñ
 );

1913 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabñ_GëEX", 
°©us
, 
__LINE__
);

1914 if(
pEX_V5_Sig«lLabñ
!=
EX_V5_Sig«lLabñ
)

1916 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabel_GetEX != EX_V5_SignalLabel\n", 0);

1921 
°©us
 = 
	`WPX_FRMR_SONET_SDH_LO_PATH_J2_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_J2_Tø˚Såög
);

1922 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_LO_PATH_J2_SëTX", 
°©us
, 
__LINE__
);

1924 #i‡
WTI_FLEXMUX_DBG_MODE


1925 
WP_CHAR
 *
pTX_J2_Tø˚Såög
;

1926 
°©us
 =
	`WPX_FRMR_SONET_SDH_LO_PATH_J2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,
pTX_J2_Tø˚Såög
 );

1927 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_LO_PATH_J2_SëTX", 
°©us
, 
__LINE__
);

1928 if(*
pTX_J2_Tø˚Såög
!=*
TX_J2_Tø˚Såög
)

1930 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_LO_PATH_J2_GetTX != TX_J2_TraceString\n", 0);

1934 
°©us
 = 
	`WPX_FRMR_SONET_SDH_LO_PATH_J2_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_J2_Tø˚Såög
);

1935 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_LO_PATH_J2_SëEX", 
°©us
, 
__LINE__
);

1937 #i‡
WTI_FLEXMUX_DBG_MODE


1938 
WP_CHAR
 *
pEX_J2_Tø˚Såög
;

1939 
°©us
 =
	`WPX_FRMR_SONET_SDH_LO_PATH_J2_GëEX
(
Êexmux_id
,&
löe_íd_poöt
,
pEX_J2_Tø˚Såög
 );

1940 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_LO_PATH_J2_GëEX", 
°©us
, 
__LINE__
);

1941 if(*
pEX_J2_Tø˚Såög
!=*
EX_J2_Tø˚Såög
)

1943 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_LO_PATH_J2_GetEX != EX_J2_TraceString\n", 0);

1947 i‡(
s⁄ë_löe_∑øms
->
˛ock_ªc_löe_∑øms
 !
NULL
)

1949 
tx_˛k_ªc_íabÀ
 = 
s⁄ë_löe_∑øms
->
˛ock_ªc_löe_∑øms
->tx_clk_rec_enable;

1952 i‡(
Êexmux_ªg
[
Êexmux_id
].
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SDH
)

1954 
WT_u„_löe_sdh_∑øms
 *
sdh_löe_∑øms
 = (WT_u„_löe_sdh_∑øms*Ë
u„_löe_∑øms
;

1955 
U8
 
TX_V5_Sig«lLabñ
=0x2, 
EX_V5_Sig«lLabñ
=0x2;

1956 
WP_CHAR
 *
TX_J2_Tø˚Såög
 = "WG LP-TRACE",*
EX_J2_Tø˚Såög
 = "WG LP-TRACE";

1959 
löe_íd_poöt
.
u
.
SDH
.
°m4
 = 
sdh_löe_∑øms
->stm4;

1960 
löe_íd_poöt
.
u
.
SDH
.
°m1
 = 
sdh_löe_∑øms
->stm1;

1961 
löe_íd_poöt
.
u
.
SDH
.
°m0
 = 
sdh_löe_∑øms
->stm0;

1962 
löe_íd_poöt
.
u
.
SDH
.
tug2
 = 
sdh_löe_∑øms
->tug2;

1963 
löe_íd_poöt
.
u
.
SDH
.
tu
 = 
sdh_löe_∑øms
->tu;

1965 #i‡
WTI_FLEXMUX_DBG_MODE


1966 
	`¥ötf
("c⁄√˘ög clõ¡_p‹t_id %dÅÿlöe_p‹t_id %d\n",
˛õ¡_p‹t_id
,
löe_p‹t_id
);

1967 
	`¥ötf
("°m4 %d stm1 %d stm0 %dÅug2 %dÅu %d\n", 
sdh_löe_∑øms
->
°m4
,sdh_löe_∑øms->
°m1
,sdh_löe_∑øms->
°m0
,sdh_löe_∑øms->
tug2
,sdh_löe_∑øms->
tu
);

1969 i‡(
sdh_löe_∑øms
->
å™s„r_ty≥
 =
WUFE_SDH_TYPE_E1
)

1971 
löe_íd_poöt
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC12
;

1974 i‡(
sdh_löe_∑øms
->
å™s„r_ty≥
 =
WUFE_SDH_TYPE_T1
)

1976 
löe_íd_poöt
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC11
;

1980 
	`WTI_FÀxmuxTîmö©eOnEº‹
("InvalidÜineÅransferÅype", 0);

1983 #i‡
WTI_FLEXMUX_ENABLE_PERFORMANCE_MONITORING


1984 
lo_å™s„r_ty≥_ö_u£
 = 
löe_íd_poöt
.
Tøns„rTy≥
;

1987 i‡(
sdh_löe_∑øms
->
˛ock_ªc_löe_∑øms
 !
NULL
)

1989 
tx_˛k_ªc_íabÀ
 = 
sdh_löe_∑øms
->
˛ock_ªc_löe_∑øms
->tx_clk_rec_enable;

1993 
°©us
 = 
	`WPX_FRMR_SONET_SDH_Cª©eFacûôy
(0, 
Êexmux_id
, &
löe_íd_poöt
);

1994 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_Cª©eFacûôy (VC11 o∏VC12)", 
°©us
, 
__LINE__
);

1997 
°©us
 = 
	`WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabñ_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_V5_Sig«lLabñ
);

1998 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabñ_SëTX", 
°©us
, 
__LINE__
);

2000 #i‡
WTI_FLEXMUX_DBG_MODE


2001 
U8
 
pTX_V5_Sig«lLabñ
;

2002 
°©us
 =
	`WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabñ_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,&
pTX_V5_Sig«lLabñ
 );

2003 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabñ_GëTX", 
°©us
, 
__LINE__
);

2004 if(
pTX_V5_Sig«lLabñ
!=
TX_V5_Sig«lLabñ
)

2006 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabel_GetTX != TX_V5_SignalLabel\n", 0);

2010 
°©us
 = 
	`WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabñ_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_V5_Sig«lLabñ
);

2011 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabñ_SëEX", 
°©us
, 
__LINE__
);

2013 #i‡
WTI_FLEXMUX_DBG_MODE


2014 
U8
 
pEX_V5_Sig«lLabñ
;

2015 
°©us
 =
	`WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabñ_GëEX
(
Êexmux_id
,&
löe_íd_poöt
,&
pEX_V5_Sig«lLabñ
 );

2016 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabñ_GëEX", 
°©us
, 
__LINE__
);

2017 if(
pEX_V5_Sig«lLabñ
!=
EX_V5_Sig«lLabñ
)

2019 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_LO_PATH_V5_SigLabel_GetEX != EX_V5_SignalLabel\n", 0);

2022 
°©us
 = 
	`WPX_FRMR_SONET_SDH_LO_PATH_J2_SëTX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
TX_J2_Tø˚Såög
);

2023 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_LO_PATH_J2_SëTX", 
°©us
, 
__LINE__
);

2025 #i‡
WTI_FLEXMUX_DBG_MODE


2026 
WP_CHAR
 *
pTX_J2_Tø˚Såög
;

2027 
°©us
 =
	`WPX_FRMR_SONET_SDH_LO_PATH_J2_GëTX
(
Êexmux_id
,&
löe_íd_poöt
,
pTX_J2_Tø˚Såög
 );

2028 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_LO_PATH_J2_SëTX", 
°©us
, 
__LINE__
);

2029 if(*
pTX_J2_Tø˚Såög
!=*
TX_J2_Tø˚Såög
)

2031 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_LO_PATH_J2_GetTX != TX_J2_TraceString\n", 0);

2035 
°©us
 = 
	`WPX_FRMR_SONET_SDH_LO_PATH_J2_SëEX
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
EX_J2_Tø˚Såög
);

2036 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_LO_PATH_J2_SëEX", 
°©us
, 
__LINE__
);

2038 #i‡
WTI_FLEXMUX_DBG_MODE


2039 
WP_CHAR
 *
pEX_J2_Tø˚Såög
;

2040 
°©us
 =
	`WPX_FRMR_SONET_SDH_LO_PATH_J2_GëEX
(
Êexmux_id
,&
löe_íd_poöt
,
pEX_J2_Tø˚Såög
 );

2041 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_LO_PATH_J2_GëEX", 
°©us
, 
__LINE__
);

2042 if(*
pEX_J2_Tø˚Såög
!=*
EX_J2_Tø˚Såög
)

2044 
	`WTI_FÀxmuxTîmö©eOnEº‹
("WPX_FRMR_SONET_SDH_LO_PATH_J2_GetEX != EX_J2_TraceString\n", 0);

2050 
°©us
 = 
	`WPX_FRMR_CONNECTIONS_AddDr›LöeToSockëCª©e
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
˛õ¡_p‹t_id
);

2051 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_CONNECTIONS_AddDr›LöeToSockëCª©e", 
°©us
, 
__LINE__
);

2060 i‡(
tx_˛k_ªc_íabÀ
)

2063 #if(
WTI_CESOP_REGRESSION_TEST
)

2066 
löe_timög
 = 
WPX_UFE_FRAMER_TRANSMIT_TIMING_SONET_TIMING
;

2067 #i‡
WTI_FLEXMUX_DBG_MODE


2068 
	`¥ötf
("WPX_UFE_FRAMER_TRANSMIT_TIMING_SONET_TIMING\n");

2072 
löe_timög
 = 
WPX_UFE_FRAMER_TRANSMIT_TIMING_WINPATH
;

2075 #i‡
WTI_FLEXMUX_DBG_MODE


2076 
	`¥ötf
("WPX_UFE_FRAMER_TRANSMIT_TIMING_WINPATH\n");

2082 #if(
WTI_CESOP_REGRESSION_TEST
)

2084 
löe_timög
 = 
WPX_UFE_FRAMER_TRANSMIT_TIMING_SONET_TIMING
;

2085 #i‡
WTI_FLEXMUX_DBG_MODE


2086 
	`¥ötf
("WPX_UFE_FRAMER_TRANSMIT_TIMING_SONET_TIMING\n");

2091 #i‡
WTI_FLEXMUX_LINE_TIMING_CT_MODE_ENABLE


2093 
löe_timög
 = 
WPX_UFE_FRAMER_TRANSMIT_TIMING_INPUT_REFERENCE_CLOCK
;

2096 
löe_timög
 = 
WPX_UFE_FRAMER_TRANSMIT_TIMING_RX_PATH
;

2099 #i‡
WTI_FLEXMUX_DBG_MODE


2100 
	`¥ötf
("WPX_UFE_FRAMER_TRANSMIT_TIMING_RX_PATH\n");

2109 i‡(
tx_˛k_ªc_íabÀ
)

2111 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_E«bÀTimeSèmp
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
,
WTI_FLEXMUX_CLOCK_REC_GAIN_SLOW
);

2112 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_E«bÀTimeSèmp", 
°©us
, 
__LINE__
);

2116 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_SëClkRec
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 0);

2117 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_SëClkRec", 
°©us
, 
__LINE__
);

2121 
°©us
 = 
	`WTI_FÀxmuxE«bÀLo›back
(
Êexmux_id
, 
löe_p‹t_id
, 
˛õ¡_p‹t_id
, 
WT_FLEXMUX_NONE_LOOPBACK
);

2122 
	`WTI_FÀxmuxCheckSètus
("WTI_FÀxmuxE«bÀLo›back", 
°©us
, 
__LINE__
);

2123 #i‡
WTI_FLEXMUX_DBG_MODE


2124 
°©us
 = 
	`WTI_FÀxmuxGëLo›backSèã
(
Êexmux_id
, 
löe_p‹t_id
, 
˛õ¡_p‹t_id
, 
WT_FLEXMUX_NONE_LOOPBACK
);

2125 
	`WTI_FÀxmuxCheckSètus
("WTI_FÀxmuxGëLo›backSèã", 
°©us
, 
__LINE__
);

2129 
	}
}

2133 
WP_S32
 
	$WTI_FÀxmuxPDHTxTimögSë
(
WP_U8
 
Êexmux_id
,

2134 
WP_U32
 
˛õ¡_p‹t_id
,

2135 
WP_U32
 
löe_timög
)

2139 
WP_U8
 
°©us
 =0;

2140 if(!((
löe_timög
 =
WPX_UFE_FRAMER_TRANSMIT_TIMING_RX_PATH
) ||

2141 (
löe_timög
 =
WPX_UFE_FRAMER_TRANSMIT_TIMING_INPUT_REFERENCE_CLOCK
)||

2142 (
löe_timög
 =
WPX_UFE_FRAMER_TRANSMIT_TIMING_SONET_TIMING
)||

2143 (
löe_timög
 =
WPX_UFE_FRAMER_TRANSMIT_TIMING_WINPATH
)))

2146 
	`WTI_FÀxmuxTîmö©eOnEº‹
("InvalidÜineÅiming ", 0);

2151 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_SëClkRec
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
löe_timög
);

2152 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_SëClkRec", 
°©us
, 
__LINE__
);

2155 
	}
}

2159 
WP_S32
 
	$WTI_FÀxmuxC⁄√˘i⁄Dñëe
(
WP_U8
 
Êexmux_id
,

2160 
WP_U32
 
˛õ¡_p‹t_id
,

2161 *
u„_löe_∑øms
)

2164 
WP_U8
 
°©us
 =0;

2165 
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
 
löe_íd_poöt
 = {0};

2167 i‡(
Êexmux_id
 > 
WPX_UFE_FRAMER_BUILD_OPTION_MAX_DEVICES
)

2168 
	`WTI_FÀxmuxTîmö©eOnEº‹
("flexmux_id is out of bounds !", 0);

2171 i‡(
Êexmux_ªg
[
Êexmux_id
].
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SONET
)

2173 
WT_u„_löe_s⁄ë_∑øms
 *
s⁄ë_löe_∑øms
 = (WT_u„_löe_s⁄ë_∑øms*Ë
u„_löe_∑øms
;

2175 i‡(
s⁄ë_löe_∑øms
->
å™s„r_ty≥
 =
WUFE_SONET_TYPE_E1
)

2176 
löe_íd_poöt
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SONET_TYPE_VT2
;

2177 i‡(
s⁄ë_löe_∑øms
->
å™s„r_ty≥
 =
WUFE_SONET_TYPE_T1
)

2178 
löe_íd_poöt
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SONET_TYPE_VT1_5
;

2180 
	`WTI_FÀxmuxTîmö©eOnEº‹
("InvalidÜineÅransferÅype", 0);

2182 
löe_íd_poöt
.
u
.
SONET
.
°s12
 = 
s⁄ë_löe_∑øms
->sts12;

2183 
löe_íd_poöt
.
u
.
SONET
.
°s3
 = 
s⁄ë_löe_∑øms
->sts3;

2184 
löe_íd_poöt
.
u
.
SONET
.
°s1
 = 
s⁄ë_löe_∑øms
->sts1;

2185 
löe_íd_poöt
.
u
.
SONET
.
vt_group
 = 
s⁄ë_löe_∑øms
->vt_group;

2186 
löe_íd_poöt
.
u
.
SONET
.
vt
 = 
s⁄ë_löe_∑øms
->vt;

2188 i‡(
Êexmux_ªg
[
Êexmux_id
].
Êexmux_mode
 =
WPX_UFE_FRAMER_DEVICE_MODE_SDH
)

2190 
WT_u„_löe_sdh_∑øms
 *
sdh_löe_∑øms
 = (WT_u„_löe_sdh_∑øms*Ë
u„_löe_∑øms
;

2192 i‡(
sdh_löe_∑øms
->
å™s„r_ty≥
 =
WUFE_SDH_TYPE_E1
)

2193 
löe_íd_poöt
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC12
;

2194 i‡(
sdh_löe_∑øms
->
å™s„r_ty≥
 =
WUFE_SDH_TYPE_T1
)

2195 
löe_íd_poöt
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC11
;

2198 
	`WTI_FÀxmuxTîmö©eOnEº‹
("InvalidÜineÅransferÅype", 0);

2201 
löe_íd_poöt
.
u
.
SDH
.
°m4
 = 
sdh_löe_∑øms
->stm4;

2202 
löe_íd_poöt
.
u
.
SDH
.
°m1
 = 
sdh_löe_∑øms
->stm1;

2203 
löe_íd_poöt
.
u
.
SDH
.
°m0
 = 
sdh_löe_∑øms
->stm0;

2204 
löe_íd_poöt
.
u
.
SDH
.
tug2
 = 
sdh_löe_∑øms
->tug2;

2205 
löe_íd_poöt
.
u
.
SDH
.
tu
 = 
sdh_löe_∑øms
->tu;

2209 
°©us
 = 
	`WPX_FRMR_CONNECTIONS_AddDr›LöeToSockëDñëe
(0, 
Êexmux_id
, &
löe_íd_poöt
, 
˛õ¡_p‹t_id
);

2210 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_CONNECTIONS_AddDr›LöeToSockëDñëe", 
°©us
, 
__LINE__
);

2213 
°©us
 = 
	`WPX_FRMR_SONET_SDH_DñëeFacûôy
(0, 
Êexmux_id
, &
löe_íd_poöt
);

2214 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_DñëeFacûôy", 
°©us
, 
__LINE__
);

2217 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_DñëeFacûôy
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
);

2218 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_DñëeFacûôy", 
°©us
, 
__LINE__
);

2221 
	}
}

2223 
WP_S32
 
	$WTI_FÀxmuxClõ¡P‹tIndexGë
(
WP_U32
 
u„_löe_ödex
, 
WUFE_löe_å™sf_ty≥
 
å™s„r_ty≥
)

2225 
å™s„r_ty≥
)

2227 (
WUFE_SONET_TYPE_E1
):

2228 (
WUFE_SDH_TYPE_E1
):

2230 
WP_U32
 
•e_num
 = (
u„_löe_ödex
 / 28);

2231 
WP_U32
 
tug2_num
 = ((
u„_löe_ödex
 % 28) / 3);

2232 
WP_U32
 
off£t_wôhö_tug2
 = ((
u„_löe_ödex
 % 28) % 3);

2235  ((
•e_num
*28Ë+ (
tug2_num
*4Ë+ 
off£t_wôhö_tug2
);

2237 (
WUFE_SONET_TYPE_T1
):

2238 (
WUFE_SDH_TYPE_T1
):

2239 (
WUFE_SONET_TYPE_STS3
):

2240 (
WUFE_SONET_TYPE_STS12
):

2241 (
WUFE_SDH_TYPE_VC4
):

2242 (
WUFE_SDH_TYPE_VC44C
):

2244  
u„_löe_ödex
;

2247 
	`¥ötf
("Unsuµ‹ãdÅøns„r_ty≥ %d\n", 
å™s„r_ty≥
);

2248 
	`exô
(-1);

2251 
	}
}

2253 
WP_S32
 
	$WTI_FÀxmuxLöeP‹tIndexGë
(
WP_U32
 
u„_löe_ödex
, WP_U32 
Êexmux_id
)

2255 
WP_U32
 
ªsu…
 = -1;

2256 i‡(
Êexmux_ªg
[
Êexmux_id
].
Êexmux_buûd_≥rs⁄Æôy
 !
WPX_UFE_FRAMER_BUILD_PERSONALITY_4_PLUS_4_OC3_OC12
 &&

2257 
Êexmux_ªg
[
Êexmux_id
].
Êexmux_buûd_≥rs⁄Æôy
 !
WPX_UFE_FRAMER_BUILD_PERSONALITY_8_PLUS_8_OC3
 &&

2258 
Êexmux_ªg
[
Êexmux_id
].
Êexmux_buûd_≥rs⁄Æôy
 !
WPX_UFE_FRAMER_BUILD_PERSONALITY_1_PLUS_1_OC3_OC12
 &&

2259 
Êexmux_ªg
[
Êexmux_id
].
Êexmux_buûd_≥rs⁄Æôy
 !
WPX_UFE_FRAMER_BUILD_PERSONALITY_2_PLUS_2_OC3
 &&

2260 
Êexmux_ªg
[
Êexmux_id
].
Êexmux_buûd_≥rs⁄Æôy
 !
WPX_UFE_FRAMER_BUILD_PERSONALITY_4_PLUS_4_OC3
)

2261 
	`WTI_FÀxmuxTîmö©eOnEº‹
("Invalid flexmux_build_personality !", 0);

2263 i‡(
Êexmux_ªg
[
Êexmux_id
].
Êexmux_buûd_≥rs⁄Æôy
 =
WPX_UFE_FRAMER_BUILD_PERSONALITY_4_PLUS_4_OC3_OC12
)

2265 
ªsu…
 = (
u„_löe_ödex
 / 336);

2266 i‡(
ªsu…
 > 3)

2268 
ªsu…
 = -1;

2272 
ªsu…
 =Ñesult * 2;

2275 i‡(
Êexmux_ªg
[
Êexmux_id
].
Êexmux_buûd_≥rs⁄Æôy
 =
WPX_UFE_FRAMER_BUILD_PERSONALITY_8_PLUS_8_OC3
)

2277 
ªsu…
 = (
u„_löe_ödex
 / 84);

2279 i‡(!(((
ªsu…
 <= 3 ) && (result >=0 )) || ((result >= 8)&& (result <= 11))))

2281 
ªsu…
 = -1;

2285 i‡(
ªsu…
 >= 8)

2286 
ªsu…
 =Ñesult - 4;

2290 i‡((
Êexmux_ªg
[
Êexmux_id
].
Êexmux_buûd_≥rs⁄Æôy
 =
WPX_UFE_FRAMER_BUILD_PERSONALITY_1_PLUS_1_OC3_OC12
) ||

2291 (
Êexmux_ªg
[
Êexmux_id
].
Êexmux_buûd_≥rs⁄Æôy
 =
WPX_UFE_FRAMER_BUILD_PERSONALITY_2_PLUS_2_OC3
) ||

2292 (
Êexmux_ªg
[
Êexmux_id
].
Êexmux_buûd_≥rs⁄Æôy
 =
WPX_UFE_FRAMER_BUILD_PERSONALITY_4_PLUS_4_OC3
))

2295 i‡(
Êexmux_ªg
[
Êexmux_id
].
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_1_PORT_OC12
 ||

2296 
Êexmux_ªg
[
Êexmux_id
].
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_1_PORT_OC12_CLEAR_CHANNEL
)

2298 
ªsu…
 = 0;

2301 i‡((
Êexmux_ªg
[
Êexmux_id
].
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_4_PORTS_OC3
) ||

2302 (
Êexmux_ªg
[
Êexmux_id
].
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_2_PORTS_OC3
)||

2303 
Êexmux_ªg
[
Êexmux_id
].
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CARD_PROTECTION_MASTER
 ||

2304 
Êexmux_ªg
[
Êexmux_id
].
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CARD_PROTECTION_SLAVE
 ||

2305 
Êexmux_ªg
[
Êexmux_id
].
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CLEAR_CHANNEL


2306 #i‡
WTI_DUAL_EMPHY


2308 
Êexmux_ªg
[
Êexmux_id
].
Êexmux_hw_c⁄fig
 =
WT_FLEXMUX_UFE_412_4_PORTS_OC3_CARD_PROTECTION_UPI1_MASTER_UPI3_SLAVE


2312 
ªsu…
 = (
u„_löe_ödex
 / 84);

2313 i‡(
ªsu…
 > 3)

2315 
ªsu…
 = -1;

2320  
ªsu…
;

2321 
	}
}

2323 
	$WTI_FÀxmuxDi•œyVîsi⁄AndC⁄fig
(
WP_U32
 
Êexmux_id
)

2325 
WP_U8
 
°©us
;

2326 
WP_U8
 
buûd
[128];

2328 
°©us
 = 
	`WPX_FRMR_DEV_GëBuûdPîs⁄Æôy
(
Êexmux_id
, 
buûd
);

2329 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_DEV_GëBuûdPîs⁄Æôy", 
°©us
, 
__LINE__
);

2330 
	`¥ötf
("FÀxmux Buûd Pîs⁄Æôy: %d\n", (
WP_U32
Ë
buûd
);

2331 
	}
}

2333 
WP_U8
 
	$WTI_FÀxmuxE«bÀLo›back
(
U8
 
Êexmux_id
, 
WP_U32
 
löe_p‹t_id
, WP_U32 
˛õ¡_p‹t_id
, 
WTI_Êexmux_lo›back_mode
 
lo›back_ty≥
)

2335 
WP_U8
 
°©us
 = 
WPX_UFE_FRAMER_OK
;

2337 
lo›back_ty≥
)

2339 
WT_FLEXMUX_NONE_LOOPBACK
:

2341 
WT_FLEXMUX_SHALLOW_LINE_LOOPBACK
:

2343 
°©us
 = (
WP_U8
Ë
	`WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkE«bÀShÆlowLöe
(0, 
Êexmux_id
, 
löe_p‹t_id
);

2344 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkE«bÀShÆlowLöe", 
°©us
, 
__LINE__
);

2348 
WT_FLEXMUX_DEEP_LINE_LOOPBACK
:

2350 
°©us
 = (
WP_U8
Ë
	`WPX_FRMR_SOCKET_PDH_DIAG_LpbkE«bÀDìpLöe
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
);

2351 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_DIAG_LpbkE«bÀDìpLöe", 
°©us
, 
__LINE__
);

2355 
WT_FLEXMUX_SHALLOW_SYSTEM_LOOPBACK
:

2357 
°©us
 = (
WP_U8
Ë
	`WPX_FRMR_SOCKET_PDH_DIAG_LpbkE«bÀShÆlowSy°em
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
);

2358 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_DIAG_LpbkE«bÀShÆlowSy°em", 
°©us
, 
__LINE__
);

2362 
WT_FLEXMUX_DEEP_SYSTEM_LOOPBACK
:

2364 
°©us
 = (
WP_U8
Ë
	`WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkE«bÀDìpSy°em
(0, 
Êexmux_id
, 
löe_p‹t_id
);

2365 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkE«bÀDìpSy°em", 
°©us
, 
__LINE__
);

2371 
	`¥ötf
("Unsuµ‹ãdÜo›back_ty≥ %d\n", 
lo›back_ty≥
);

2372 
	`exô
(-1);

2376  
°©us
;

2377 
	}
}

2379 
WP_U8
 
	$WTI_FÀxmuxDißbÀLo›back
(
U8
 
Êexmux_id
, 
WP_U32
 
löe_p‹t_id
, WP_U32 
˛õ¡_p‹t_id
, 
WTI_Êexmux_lo›back_mode
 
lo›back_ty≥
)

2381 
WP_U8
 
°©us
 = 
WPX_UFE_FRAMER_OK
;

2383 
lo›back_ty≥
)

2385 
WT_FLEXMUX_NONE_LOOPBACK
:

2387 
WT_FLEXMUX_SHALLOW_LINE_LOOPBACK
:

2389 
°©us
 = (
WP_U8
Ë
	`WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkDißbÀShÆlowLöe
(0, 
Êexmux_id
, 
löe_p‹t_id
);

2390 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkDißbÀShÆlowLöe", 
°©us
, 
__LINE__
);

2394 
WT_FLEXMUX_DEEP_LINE_LOOPBACK
:

2396 
°©us
 = (
WP_U8
Ë
	`WPX_FRMR_SOCKET_PDH_DIAG_LpbkDißbÀDìpLöe
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
);

2397 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_DIAG_LpbkDißbÀDìpLöe", 
°©us
, 
__LINE__
);

2401 
WT_FLEXMUX_SHALLOW_SYSTEM_LOOPBACK
:

2403 
°©us
 = (
WP_U8
Ë
	`WPX_FRMR_SOCKET_PDH_DIAG_LpbkDißbÀShÆlowSy°em
(0,
Êexmux_id
, 
˛õ¡_p‹t_id
);

2404 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_DIAG_LpbkDißbÀShÆlowSy°em", 
°©us
, 
__LINE__
);

2408 
WT_FLEXMUX_DEEP_SYSTEM_LOOPBACK
:

2410 
°©us
 = (
WP_U8
Ë
	`WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkDißbÀDìpSy°em
(0, 
Êexmux_id
, 
löe_p‹t_id
);

2411 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkDißbÀDìpSy°em", 
°©us
, 
__LINE__
);

2417 
	`¥ötf
("Unsuµ‹ãdÜo›back_ty≥ %d\n", 
lo›back_ty≥
);

2418 
	`exô
(-1);

2421  
°©us
;

2422 
	}
}

2424 
WP_U8
 
	$WTI_FÀxmuxGëLo›backSèã
(
U8
 
Êexmux_id
, 
WP_U32
 
löe_p‹t_id
, WP_U32 
˛õ¡_p‹t_id
, 
WTI_Êexmux_lo›back_mode
 
lo›back_ty≥
)

2426 
WP_U8
 
°©us
 = 
WPX_UFE_FRAMER_OK
, 
lo›back_íabÀd
 = 0;

2428 
lo›back_ty≥
)

2430 
WT_FLEXMUX_NONE_LOOPBACK
:

2432 
WT_FLEXMUX_SHALLOW_LINE_LOOPBACK
:

2434 
°©us
 = (
WP_U8
Ë
	`WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkGëShÆlowLöeSèã
(0, 
löe_p‹t_id
, &
lo›back_íabÀd
 );

2435 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkGëShÆlowLöeSèã", 
°©us
, 
__LINE__
);

2436 i‡(
lo›back_íabÀd
)

2438 
	`¥ötf
("SHALLOW_LINE");

2443 
WT_FLEXMUX_DEEP_LINE_LOOPBACK
:

2445 
°©us
 = (
WP_U8
Ë
	`WPX_FRMR_SOCKET_PDH_DIAG_LpbkGëDìpLöeSèã
(0,
˛õ¡_p‹t_id
, &
lo›back_íabÀd
);

2446 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_DIAG_LpbkGëDìpLöeSèã", 
°©us
, 
__LINE__
);

2447 i‡(
lo›back_íabÀd
)

2449 
	`¥ötf
("DEEP_LINE");

2454 
WT_FLEXMUX_SHALLOW_SYSTEM_LOOPBACK
:

2456 
°©us
 = (
WP_U8
Ë
	`WPX_FRMR_SOCKET_PDH_DIAG_LpbkGëShÆlowSy°emSèã
(0,
˛õ¡_p‹t_id
,&
lo›back_íabÀd
);

2457 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_DIAG_LpbkGëShÆlowSy°emSèã", 
°©us
, 
__LINE__
);

2458 i‡(
lo›back_íabÀd
)

2460 
	`¥ötf
("SHALLOW_SYSTEM");

2465 
WT_FLEXMUX_DEEP_SYSTEM_LOOPBACK
:

2467 
°©us
 = (
WP_U8
Ë
	`WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkGëDìpSy°emSèã
(0, 
löe_p‹t_id
, &
lo›back_íabÀd
);

2468 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_DIAG_LpbkGëDìpSy°emSèã", 
°©us
, 
__LINE__
);

2469 i‡(
lo›back_íabÀd
)

2471 
	`¥ötf
("DEEP_SYSTEM");

2478 
	`¥ötf
("Unsuµ‹ãdÜo›back_ty≥ %d\n", 
lo›back_ty≥
);

2479 
	`exô
(-1);

2482 i‡(
lo›back_íabÀd
)

2484 
	`¥ötf
(" Loopback isÉnabled\n");

2488 
	`¥ötf
(" Loopback isÇotÉnabled\n");

2491  
°©us
;

2492 
	}
}

2494 
WP_U8
 
	$WTI_FÀxmuxCheckPrbsResu…
(
U8
 
Êexmux_id
, 
WP_U32
 
˛õ¡_p‹t_id
, 
WUFE_un_‰amed
 
‰amög_mode
)

2496 
WP_U8
 
¥bs_°©e
 = 
WPX_UFE_FRAMER_PRBS_STATE_IDLE
;

2497 
WP_U8
 
u„_‰amî_°©us
;

2498 
WP_U8
 
°©us
 = 
WPX_UFE_FRAMER_OK
;

2501 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_DIAG_EgªssGíPrbs_Së
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_PRBS_23
);

2502 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_DIAG_EgªssGíPrbs_Së", 
°©us
, 
__LINE__
);

2505 if(
‰amög_mode
 =
WUFE_UNFRAMED
)

2508 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_DIAG_EgªssTîmPrbsSë
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_PRBS_23
);

2509 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_DIAG_EgªssTîmPrbsSë", 
°©us
, 
__LINE__
);

2514 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_DIAG_IngªssTîmPrbsSë
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_PRBS_23
);

2515 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_DIAG_IngªssTîmPrbsSë", 
°©us
, 
__LINE__
);

2518 
	`WPL_Dñay
(1000000);

2520 if(
‰amög_mode
 =
WUFE_UNFRAMED
)

2522 
u„_‰amî_°©us
 = 
	`WPX_FRMR_STATUS_SOCKET_PDH_DIAG_EgªssPrbsGëSèã
(0, 
˛õ¡_p‹t_id
 , &
¥bs_°©e
);

2523 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_STATUS_SOCKET_PDH_DIAG_EgªssPrbsGëSèã", 
u„_‰amî_°©us
, 
__LINE__
);

2524 
¥bs_ªsu…
[
˛õ¡_p‹t_id
] = 
¥bs_°©e
;

2528 
u„_‰amî_°©us
 = 
	`WPX_FRMR_STATUS_SOCKET_PDH_DIAG_IngªssPrbsGëSèã
(0, 
˛õ¡_p‹t_id
 , &
¥bs_°©e
);

2529 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_STATUS_SOCKET_PDH_DIAG_IngªssPrbsGëSèã", 
u„_‰amî_°©us
, 
__LINE__
);

2530 
¥bs_ªsu…
[
˛õ¡_p‹t_id
] = 
¥bs_°©e
;

2535 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_DIAG_EgªssGíPrbs_Së
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_PRBS_DISABLED
);

2536 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_DIAG_EgªssGíPrbs_Së", 
°©us
, 
__LINE__
);

2538 if(
‰amög_mode
 =
WUFE_UNFRAMED
)

2541 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_DIAG_EgªssTîmPrbsSë
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_PRBS_DISABLED
);

2542 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_DIAG_EgªssTîmPrbsSë", 
°©us
, 
__LINE__
);

2547 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_DIAG_IngªssTîmPrbsSë
(0, 
Êexmux_id
, 
˛õ¡_p‹t_id
, 
WPX_UFE_FRAMER_PRBS_DISABLED
);

2548 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_DIAG_IngªssTîmPrbsSë", 
°©us
, 
__LINE__
);

2552 i‡(
¥bs_ªsu…
[
˛õ¡_p‹t_id
] =
WPX_UFE_FRAMER_PRBS_STATE_CLEAR
)

2558 
¥bs_ªsu…
[
˛õ¡_p‹t_id
])

2560 
WPX_UFE_FRAMER_PRBS_STATE_IDLE
: 
	`¥ötf
("PRBS i†dißbÀd f‹ clõ¡_p‹t_id %d o‡Êexmux_id %d\n",
˛õ¡_p‹t_id
, 
Êexmux_id
);

2562 
WPX_UFE_FRAMER_PRBS_STATE_ERRORS
: 
	`¥ötf
("PRBS d©®check faûed f‹ clõ¡_p‹t_id %d o‡Êexmux_id %d\n",
˛õ¡_p‹t_id
, 
Êexmux_id
);

2564 
WPX_UFE_FRAMER_PRBS_STATE_INACTIVE
: 
	`¥ötf
("PRBS i†öa˘ivêf‹ clõ¡_p‹t_id %d o‡Êexmux_id %d\n",
˛õ¡_p‹t_id
, 
Êexmux_id
);

2569 
	}
}

2571 
	$WTI_FÀxmuxF‹˚A
(
WP_U32
 
Êexmux_id
, WP_U32 
löe_p‹t_id
)

2573 
WP_U8
 
°©us
 = 
WPX_UFE_FRAMER_OK
;

2574 #i‡
DEBUG


2575 
WP_U8
 
f‹˚_side
 = 2;

2576 
WP_time
 
bef‹e
 ,
a·î
;

2577 
WP_U32
 
£c
, 
u£c
;

2579 
	`WPL_Time°ampGë
(&
bef‹e
);

2581 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_F‹˚A
(0, 
Êexmux_id
, 
löe_p‹t_id
);

2582 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_F‹˚A", 
°©us
, 
__LINE__
);

2583 #i‡
DEBUG


2584 
°©us
 =
	`WPX_FRMR_SONET_SDH_PORT_GëF‹˚Sèã
(0, 
löe_p‹t_id
, &
f‹˚_side
);

2585 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_GëF‹˚Sèã", 
°©us
, 
__LINE__
);

2586 
	`WPL_Time°ampGë
(&
a·î
);

2587 
£c
 = (
a·î
.£c)-(
bef‹e
.sec);

2588 
u£c
 = (
a·î
.u£c)-(
bef‹e
.usec);

2589 i‡(
u£c
<0)

2591 
£c
 = sec - 1;

2592 
u£c
 = usec + 1000000;

2594 
	`¥ötf
("I¿löê%d f‹cögÖ‹àAÅook %d.%06d sec⁄ds\n",
löe_p‹t_id
,
£c
,
u£c
);

2595 i‡(
°©us
 =
WPX_UFE_FRAMER_OK
)

2597 i‡(
f‹˚_side
 =
WPX_UFE_FRAMER_PROTECTION_FORCE_A
)

2599 
	`¥ötf
("From F‹˚A: I¿löê%dÅøffi¯i†ª˚ived fromÖ‹àA\n",
löe_p‹t_id
);

2601 i‡(
f‹˚_side
 =
WPX_UFE_FRAMER_PROTECTION_FORCE_B
)

2603 
	`¥ötf
("From F‹˚A: I¿löê%dÅøffi¯i†ª˚ived fromÖ‹àB\n",
löe_p‹t_id
);

2607 
	}
}

2609 
	$WTI_FÀxmuxF‹˚B
(
WP_U32
 
Êexmux_id
, WP_U32 
löe_p‹t_id
)

2611 
WP_U8
 
°©us
 = 
WPX_UFE_FRAMER_OK
;

2612 #i‡
DEBUG


2613 
WP_U8
 
f‹˚_side
 = 2;

2614 
WP_time
 
bef‹e
 ,
a·î
;

2615 
WP_U32
 
£c
, 
u£c
;

2617 
	`WPL_Time°ampGë
(&
bef‹e
);

2619 
°©us
 = 
	`WPX_FRMR_SONET_SDH_PORT_F‹˚B
(0, 
Êexmux_id
, 
löe_p‹t_id
);

2620 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_F‹˚B", 
°©us
, 
__LINE__
);

2621 #i‡
DEBUG


2622 
°©us
 =
	`WPX_FRMR_SONET_SDH_PORT_GëF‹˚Sèã
(0, 
löe_p‹t_id
, &
f‹˚_side
);

2623 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_GëF‹˚Sèã", 
°©us
, 
__LINE__
);

2624 
	`WPL_Time°ampGë
(&
a·î
);

2625 
£c
 = (
a·î
.£c)-(
bef‹e
.sec);

2626 
u£c
 = (
a·î
.u£c)-(
bef‹e
.usec);

2627 i‡(
u£c
<0)

2629 
£c
 = sec - 1;

2630 
u£c
 = usec + 1000000;

2632 
	`¥ötf
("I¿löê%d f‹cögÖ‹àBÅook %d.%06d sec⁄ds\n",
löe_p‹t_id
,
£c
,
u£c
);

2633 i‡(
°©us
 =
WPX_UFE_FRAMER_OK
)

2635 i‡(
f‹˚_side
 =
WPX_UFE_FRAMER_PROTECTION_FORCE_A
)

2637 
	`¥ötf
("From F‹˚B: I¿löê%dÅøffi¯i†ª˚ived fromÖ‹àA\n",
löe_p‹t_id
);

2639 i‡(
f‹˚_side
 =
WPX_UFE_FRAMER_PROTECTION_FORCE_B
)

2641 
	`¥ötf
("From F‹˚B: I¿löê%dÅøffi¯i†ª˚ived fromÖ‹àB\n",
löe_p‹t_id
);

2645 
	}
}

2647 
	$WTI_FÀxmux_Poke
(
U8
 
Êexmux_id
, 
U32
 
Addªss
, U32 
VÆue
)

2649 
WP_U8
 
Resu…
;

2651 
Resu…
 = 
	`WPX_FRMR_DEV_DIAG_Poke
(0, 
Êexmux_id
, 
Addªss
, 
VÆue
);

2652 i‡(
WPX_UFE_FRAMER_OK
 !=
Resu…
)

2654 
	`¥ötf
("Poke wasÇotáccopmlished successfully\n");

2658 
	`¥ötf
("wrôêd©®%#xÅÿaddªs†%#x\n",
VÆue
,
Addªss
);

2665 
	}
}

2667 
	$WTI_FÀxmux_Pìk
(
U8
 
Êexmux_id
, 
U32
 
Addªss
)

2669 
WP_U8
 
Resu…
;

2670 
WP_U32
 
iii
=0;

2674 
	`mem£t
(&
DIAG_PEEK_INFO
,0,(
WTI_DIAG_PEEK_INFO
));

2676 
Resu…
 = 
	`WPX_FRMR_DEV_DIAG_Pìk
(
Êexmux_id
, 
Addªss
);

2677 i‡(
WPX_UFE_FRAMER_OK
 !=
Resu…
)

2679 
	`¥ötf
("Peek wasÇotáccopmlished successfully - can'tÑeadÅheÑelevantáddress\n");

2685 
DIAG_PEEK_INFO
.
VÆid
!=1)

2687 
iii
++;

2689 
	`WPL_Dñay
(1);

2690 if(
iii
>3000000)

2692 
	`¥ötf
("Error: Peek functionÅimeout\n");

2699 i‡(1 !
DIAG_PEEK_INFO
.
VÆid
)

2701 
	`¥ötf
("ˇn'àªadáddªs†%#x\n",
Addªss
);

2706 
	`¥ötf
("%#x : %08x\n",
DIAG_PEEK_INFO
.
Addªss
,DIAG_PEEK_INFO.
VÆue
);

2710 
	}
}

2713 
	$WTI_FÀxmux_AddªssBa£Pìk
(
U8
 
Êexmux_id
, 
U32
 
SèπAddªss
)

2715 
WP_U8
 
Resu…
;

2716 
WP_U32
 
iii
=0;

2717 
WP_U32
 
addr
;

2720 
addr
=
SèπAddªss
;addr<SèπAddªss+(
WTI_NUM_OF_WORDS_TO_READ
*4);addr=addr+4)

2724 
	`mem£t
(&
DIAG_PEEK_INFO
,0,(
WTI_DIAG_PEEK_INFO
));

2727 
Resu…
 = 
	`WPX_FRMR_DEV_DIAG_Pìk
(
Êexmux_id
, 
addr
);

2728 i‡(
WPX_UFE_FRAMER_OK
 !=
Resu…
)

2730 
	`¥ötf
("Peek wasÇotáccopmlished successfully - can'tÑeadÅheÑelevantáddress\n");

2736 1!=
DIAG_PEEK_INFO
.
VÆid
)

2738 
iii
++;

2740 
	`WPL_Dñay
(1);

2741 if(
iii
>2000000)

2743 
	`¥ötf
("Error: Peek functionÅimeout\n");

2752 i‡(1 !
DIAG_PEEK_INFO
.
VÆid
)

2754 
	`¥ötf
("ˇn'àªadáddªs†%#x\n",
addr
);

2759 i‡(
addr
%0x10 ==0)

2760 
	`¥ötf
("\n%#x: ",
addr
);

2762 
	`¥ötf
("%08x ",
DIAG_PEEK_INFO
.
VÆue
);

2764 
	`¥ötf
("\n");

2767 
	}
}

2771 
	$WTI_FÀxmuxPDHOuçutClockSë
(
WP_U8
 
ouçut_£À˘
, 
WP_U32
 
löe_ödex
,
WUFE_löe_å™sf_ty≥
 
å™s„r_ty≥
,WP_U32 
˛ock_øã
)

2773 
WP_U32
 
˛õ¡_p‹t_id
=0;

2774 
WP_U8
 
°©us
 = 
WPX_UFE_FRAMER_OK
;

2776 
˛õ¡_p‹t_id
 = 
	`WTI_FÀxmuxClõ¡P‹tIndexGë
(
löe_ödex
,
å™s„r_ty≥
);

2779 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_DIAG_DRV_RecClkSë
(0,0,
ouçut_£À˘
,
˛õ¡_p‹t_id
,
˛ock_øã
);

2780 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SOCKET_PDH_DIAG_DRV_RecClkSë", 
°©us
, 
__LINE__
);

2782 #i‡
WTI_FLEXMUX_DBG_MODE


2783 
	`¥ötf
("Sëtög PDH Rx clock %dÅÿlöê%dáà%dKhz\n",
ouçut_£À˘
,
˛õ¡_p‹t_id
,
˛ock_øã
);

2785 
	}
}

2787 #i‡
WTI_COLLECT_TRACKING_DATA


2790 
WP_U32
 
	mty≥
;

2791 
WP_U32
 
	mtime°amp
;

2792 } 
	tPATS_RECORD
;

2794 #i‡
deföed
(
__löux__
)

2795 
PATS_RECORD
 *
	gßve_¨ó
 = (PATS_RECORD *) 0x1c249000;

2797 
PATS_RECORD
 *
	gßve_¨ó
 = (PATS_RECORD *) 0xbc249000;

2800 
	g„n˚
 = 0;

2801 
	gmax_ôems
 = 0x10000/(
PATS_RECORD
);

2803 
	$ªc‹d_a˘i⁄
(
WP_U32
 
ty≥
, WP_U32 
time°amp
)

2805 
PATS_RECORD
 *
ôem
;

2807 i‡(
„n˚
 >
max_ôems
 - 1)

2810 
ôem
 = &
ßve_¨ó
[
„n˚
++];

2811 
ôem
->
ty≥
 =Åype;

2812 
ôem
->
time°amp
 =Åimestamp;

2813 
	}
}

2816 
WP_CHAR
 *
	gty≥_«me
[] = {

2872 
WP_U32
 
	gœ°_ªc‹d_ödex
 = (
ty≥_«me
) / (type_name[0]);

2874 
	$WTI_Di•œyRec‹ds
()

2876 
WP_U32
 
j
;

2877 
PATS_RECORD
 *
ôem
;

2879 
ôem
 = 
ßve_¨ó
, 
j
 = 0; j < 
„n˚
; ++j, ++item)

2880 i‡(
ôem
->
ty≥
 < 
œ°_ªc‹d_ödex
)

2881 
	`¥ötf
("%†0x%x\n", 
ty≥_«me
[
ôem
->
ty≥
], iãm->
time°amp
);

2883 
	`¥ötf
("UNRECOGNIZED: %d, 0x%x\n", 
ôem
->
ty≥
, iãm->
time°amp
);

2885 
	`¥ötf
("%d iãms\n", 
„n˚
);

2886 
„n˚
 = 0;

2887 
	}
}

2889 
	$WTI_InôülizeDi•œyRec‹ds
()

2891 
„n˚
 = 0;

2892 
	}
}

	@flexmux_util.h

17 #i‚de‡
WTI_FLEXMUX_UTIL_H


18 
	#WTI_FLEXMUX_UTIL_H


	)

20 #i‚de‡
_WPX_UFE_FRAMER_API_PUBLIC_


21 
	~"WO_FRMR_API_public.h
"

24 
	#USE_POLLING
 0

	)

27 
	#NO_APS_ON_LOS
 1

	)

29 
	#WTI_MAX_LINE_PORTS_PER_FLEXMUX_DEVICE
 16

	)

30 
	#WTI_FLEXMUX_DBG_MODE
 0

	)

32 
	#WTI_FLEXMUX_ENABLE_ALARMS
 0

	)

33 
	#WTI_PRINT_ALARM_DATA
 0

	)

34 
	#WTI_FLEXMUX_ENABLE_PERFORMANCE_MONITORING
 0

	)

36 
	#WTI_COLLECT_TIMING_INFORMATION
 0

37 
	#WTI_COLLECT_TRACE_INFORMATION
 0

38 

	)

39 
	#WTI_FLEXMUX_ALARM_AND_PM_THREAD
 (
WTI_FLEXMUX_ENABLE_ALARMS
 + 
WTI_FLEXMUX_ENABLE_PERFORMANCE_MONITORING
)

	)

40 
	#WTI_COLLECT_TRACKING_DATA
 (
WTI_COLLECT_TIMING_INFORMATION
 + 
WTI_COLLECT_TRACE_INFORMATION
)

	)

42 
	#WT_RUN_PRBS_CHECK
 0

	)

44 
	#CHECK_CORE_HW_INTERRUPT_ASSERTED
 0

	)

46 #i‡
WTI_CESOP_CLOCK_RECOVERY_ENABLE


47 
	#WTI_FLEXMUX_UFE_FRAMER_WUFE_SDH_TYPE_VC
 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC3


	)

49 
	#WTI_FLEXMUX_UFE_FRAMER_WUFE_SDH_TYPE_VC
 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC4


	)

51 #ifde‡
__WT_UFE412__


52 
	#WTI_FLEXMUX_PHYSICAL_CONF
 
WT_FLEXMUX_UFE_412_1_PORT_OC12


	)

54 
	#WTI_FLEXMUX_PHYSICAL_CONF
 
WT_FLEXMUX_UFE_448_4_PORTS_OC12


	)

57 
	#WTI_FLEXMUX_CLOCK_REC_GAIN_FAST
 
MAX_TIMESTAMP_GAIN


	)

58 
	#WTI_FLEXMUX_CLOCK_REC_GAIN_SLOW
 0x000001FF

	)

60 
	#WTI_FLEXMUX_RECV_PDH_LINE_CLK_0
 0

	)

61 
	#WTI_FLEXMUX_RECV_PDH_LINE_CLK_1
 1

	)

63 
	#WTI_FLEXMUX_LINE_TIMING_CT_MODE_ENABLE
 0

	)

68 
	#WTI_FLEXMUX_PRIMARY_UPI_INDEX
 
WTI_EMPHY_PORT


	)

69 
	#WTI_FLEXMUX_PRIMARY_FLEXMUX_ID
 0

	)

70 
	#WTI_FLEXMUX_PRIMARY_DEVICE_ID
 0

	)

72 #i‡
WTI_DUAL_EMPHY


73 
	#WTI_FLEXMUX_SECOND_UPI_INDEX
 
WTI_SECOND_EMPHY_PORT


	)

74 
	#WTI_FLEXMUX_SECOND_FLEXMUX_ID
 1

	)

75 
	#WTI_FLEXMUX_SECOND_DEVICE_ID
 1

	)

80 
	mWT_FLEXMUX_DEVICE_MODE_SDH
 = 
WPX_UFE_FRAMER_DEVICE_MODE_SDH
,

81 
	mWT_FLEXMUX_DEVICE_MODE_SONET
 = 
WPX_UFE_FRAMER_DEVICE_MODE_SONET


82 }
	tWTI_Êexmux_mode
;

86 
	mWT_FLEXMUX_UFE_412_1_PORT_OC12
,

87 
	mWT_FLEXMUX_UFE_412_2_PORTS_OC3
,

88 
	mWT_FLEXMUX_UFE_412_4_PORTS_OC3
,

89 
	mWT_FLEXMUX_UFE_412_1_PORT_OC12_PLUS_1_PROTECTION
,

90 
	mWT_FLEXMUX_UFE_412_4_PORTS_OC3_PLUS_4_PROTECTION
,

91 
	mWT_FLEXMUX_UFE_448_4_PORTS_OC12
,

92 
	mWT_FLEXMUX_UFE_448_8_PORTS_OC3_PLUS_8_PROTECTION
,

93 
	mWT_FLEXMUX_UFE_448_4_PORTS_OC12_CARD_PROTECTION_MASTER
,

94 
	mWT_FLEXMUX_UFE_448_4_PORTS_OC12_CARD_PROTECTION_SLAVE
,

95 
	mWT_FLEXMUX_UFE_412_4_PORTS_OC3_CARD_PROTECTION_MASTER
,

96 
	mWT_FLEXMUX_UFE_412_4_PORTS_OC3_CARD_PROTECTION_SLAVE
,

97 
	mWT_FLEXMUX_UFE_412_4_PORTS_OC3_CLEAR_CHANNEL
,

98 
	mWT_FLEXMUX_UFE_412_1_PORT_OC12_CLEAR_CHANNEL
,

99 #i‡
WTI_DUAL_EMPHY


100 
	mWT_FLEXMUX_UFE_412_4_PORTS_OC3_CARD_PROTECTION_UPI1_MASTER_UPI3_SLAVE


102 }
	tWTI_Êexmux_physiˇl_c⁄f
;

106 
	mWT_FLEXMUX_NONE_LOOPBACK
,

107 
	mWT_FLEXMUX_SHALLOW_LINE_LOOPBACK
,

108 
	mWT_FLEXMUX_DEEP_LINE_LOOPBACK
,

109 
	mWT_FLEXMUX_SHALLOW_SYSTEM_LOOPBACK
,

110 
	mWT_FLEXMUX_DEEP_SYSTEM_LOOPBACK
,

111 
	mWT_FLEXMUX_DIAGSONTIC_LOOPBACK
,

112 }
	tWTI_Êexmux_lo›back_mode
;

116 
	mWT_FLEXMUX_LINE_PORT_OC3
,

117 
	mWT_FLEXMUX_LINE_PORT_OC12
,

118 
	mWT_FLEXMUX_LINE_PORT_STM1
,

119 
	mWT_FLEXMUX_LINE_PORT_STM4


120 }
	tWTI_Êexmux_löe_p‹t_mode
;

124 
	mWT_FLEXMUX_CONNECTION_TYPE_E1_UNFRAMED
,

125 
	mWT_FLEXMUX_CONNECTION_TYPE_E1_FRAMED
,

126 
	mWT_FLEXMUX_CONNECTION_TYPE_E1_FRAMED_CAS
,

127 
	mWT_FLEXMUX_CONNECTION_TYPE_T1_UNFRAMED
,

128 
	mWT_FLEXMUX_CONNECTION_TYPE_T1_FRAMED
,

129 
	mWT_FLEXMUX_CONNECTION_TYPE_T1_FRAMED_CAS
,

130 
	mWT_FLEXMUX_CONNECTION_TYPE_E3
,

131 
	mWT_FLEXMUX_CONNECTION_TYPE_DS3
,

132 
	mWT_FLEXMUX_CONNECTION_TYPE_VC11
,

133 
	mWT_FLEXMUX_CONNECTION_TYPE_VC12
,

134 
	mWT_FLEXMUX_CONNECTION_TYPE_VC3
,

135 
	mWT_FLEXMUX_CONNECTION_TYPE_VC4
,

136 
	mWT_FLEXMUX_CONNECTION_TYPE_VC4_4C
,

137 
	mWT_FLEXMUX_CONNECTION_TYPE_VT1_5
,

138 
	mWT_FLEXMUX_CONNECTION_TYPE_VT2
,

139 
	mWT_FLEXMUX_CONNECTION_TYPE_STS1_SPE
,

140 
	mWT_FLEXMUX_CONNECTION_TYPE_STS3
,

141 
	mWT_FLEXMUX_CONNECTION_TYPE_STS12
,

142 
	mWT_FLEXMUX_CONNECTION_TYPE_VCAT


143 }
	tWTI_Êexmux_c⁄√˘i⁄_ty≥
;

147 
WP_U8
 
	mÊexmux_id
;

148 #i‡
WTI_DUAL_EMPHY


149 
WP_U8
 
	m£c⁄d_Êexmux_id
;

151 
WTI_Êexmux_physiˇl_c⁄f
 
	mÊexmux_hw_c⁄fig
;

152 
WP_U8
 
	mÊexmux_buûd_≥rs⁄Æôy
;

153 
WP_U8
 
	mÊexmux_mode
;

154 
WTI_Êexmux_lo›back_mode
 
	mÊexmux_lo›back_mode
;

155 } 
	tWTI_FÀxmux_globÆ_£tup
;

159 
WP_boﬁón
 
	mis_öôülized
;

160 } 
	tWTI_FÀxmux_c⁄√˘i⁄_ªgi°ry
;

164 
WP_boﬁón
 
	mis_öôülized
;

165 
WP_U8
 
	mlöe_p‹t_mode
;

166 } 
	tWTI_FÀxmux_löe_p‹t_ªgi°ry
;

170 
WP_boﬁón
 
	mis_öôülized
;

171 
WTI_Êexmux_physiˇl_c⁄f
 
	mÊexmux_hw_c⁄fig
;

172 
WP_U8
 
	mÊexmux_buûd_≥rs⁄Æôy
;

173 
WP_U8
 
	mÊexmux_mode
;

174 
WP_U8
 
	mmax_löe_p‹ts
;

175 
WTI_FÀxmux_löe_p‹t_ªgi°ry
 
	mlöe_p‹ts_ªg
[
WTI_MAX_LINE_PORTS_PER_FLEXMUX_DEVICE
];

176 } 
	tWTI_FÀxmux_devi˚_ªgi°ry
;

178 
WTI_FÀxmux_devi˚_ªgi°ry
 
	gÊexmux_ªg
[
WPX_UFE_FRAMER_BUILD_OPTION_MAX_DEVICES
];

180 
WP_S32
 
WTI_FÀxmuxInô
(
WP_U32
 
upi_ödex
,

181 
WP_U8
 
Êexmux_id
,

182 
WTI_Êexmux_physiˇl_c⁄f
 
Êexmux_hw_c⁄fig
,

183 
WP_U8
 
Êexmux_mode
,

184 
WPX_UFE_FRAMER_WUFE_löe_å™sf_ty≥
 
vc_3_4
,

185 
WTI_FÀxmux_globÆ_£tup
 *
Êexmux_cfg
);

187 
WP_S32
 
WTI_FÀxmuxLöeP‹tC⁄fig
(
WP_U8
 
Êexmux_id
,

188 
WP_U8
 
löe_p‹t_id
,

189 
WTI_Êexmux_löe_p‹t_mode
 
löe_p‹t_cfg
);

191 
WP_S32
 
WTI_FÀxmuxC⁄√˘i⁄Cª©e
(
WP_U8
 
Êexmux_id
,

192 
WP_U8
 
löe_p‹t_id
,

193 
WP_U32
 
˛õ¡_p‹t_id
,

194 
WTI_Êexmux_c⁄√˘i⁄_ty≥
 
ty≥
,

195 *
u„_löe_∑øms
);

197 
WP_S32
 
WTI_FÀxmuxC⁄√˘i⁄Dñëe
(
WP_U8
 
Êexmux_id
,

198 
WP_U32
 
˛õ¡_p‹t_id
,

199 *
u„_löe_∑øms
);

201 
WP_S32
 
WTI_FÀxmuxClõ¡P‹tIndexGë
(
WP_U32
 
u„_löe_ödex
, 
WUFE_löe_å™sf_ty≥
 
å™s„r_ty≥
);

203 
WP_S32
 
WTI_FÀxmuxLöeP‹tIndexGë
(
WP_U32
 
u„_löe_ödex
,WP_U32 
Êexmux_id
);

205 
WTI_FÀxmuxDi•œyVîsi⁄AndC⁄fig
(
WP_U32
 
Êexmux_id
);

207 
WP_U8
 
WTI_FÀxmuxE«bÀLo›back
(
U8
 
Êexmux_id
, 
WP_U32
 
löe_p‹t_id
, WP_U32 
˛õ¡_p‹t_id
, 
WTI_Êexmux_lo›back_mode
 
lo›back_ty≥
);

208 
WP_U8
 
WTI_FÀxmuxDißbÀLo›back
(
U8
 
Êexmux_id
, 
WP_U32
 
löe_p‹t_id
, WP_U32 
˛õ¡_p‹t_id
, 
WTI_Êexmux_lo›back_mode
 
lo›back_ty≥
);

209 
WP_U8
 
WTI_FÀxmuxGëLo›backSèã
(
U8
 
Êexmux_id
, 
WP_U32
 
löe_p‹t_id
, WP_U32 
˛õ¡_p‹t_id
, 
WTI_Êexmux_lo›back_mode
 
lo›back_ty≥
);

210 
WP_U8
 
WTI_FÀxmuxCheckPrbsResu…
(
U8
 
Êexmux_id
, 
WP_U32
 
˛õ¡_p‹t_id
, 
WUFE_un_‰amed
 
‰amög_mode
);

211 
WTI_FÀxmux_Poke
(
U8
 
Êexmux_id
, 
U32
 
Addªss
, U32 
VÆue
);

212 
WTI_FÀxmux_Pìk
(
U8
 
Êexmux_id
, 
U32
 
Addªss
);

213 
WTI_FÀxmux_AddªssBa£Pìk
(
U8
 
Êexmux_id
, 
U32
 
SèπAddªss
);

214 
WTI_FÀxmuxPDHOuçutClockSë
(
WP_U8
 
ouçut_£À˘
, 
WP_U32
 
löe_ödex
,
WUFE_löe_å™sf_ty≥
 
å™s„r_ty≥
,WP_U32 
˛ock_øã
);

216 
WUFE_°©us
 
WPX_FRMR_PM_S⁄ëSdhP‹tSt‹age
(
U32
 
Êexmux_id
, *
•a˚
, 
WP_U32
 
ñemít_ty≥
);

217 
WUFE_°©us
 
WPX_FRMR_PM_S⁄ëSdhHOP©hSt‹age
(
U32
 
Êexmux_id
, *
•a˚
, 
WP_U32
 
ñemít_ty≥
);

218 
WUFE_°©us
 
WPX_FRMR_PM_S⁄ëSdhLOP©hSt‹age
(
U32
 
Êexmux_id
, *
•a˚
, 
WP_U32
 
ñemít_ty≥
);

219 
WUFE_°©us
 
WPX_FRMR_PM_PdhSt‹age
(
U32
 
Êexmux_id
, *
•a˚
, 
WP_U32
 
ñemít_ty≥
);

221 
WP_S32
 
WTI_FÀxmuxPDHTxTimögSë
(
WP_U8
 
Êexmux_id
,
WP_U32
 
˛õ¡_p‹t_id
,WP_U32 
löe_timög
);

223 
WTI_FÀxmuxF‹˚A
(
WP_U32
 
Êexmux_id
, WP_U32 
löe_p‹t_id
);

224 
WTI_FÀxmuxF‹˚B
(
WP_U32
 
Êexmux_id
, WP_U32 
löe_p‹t_id
);

	@os_timer.c

1 #ifde‡
__löux__


3 
	~<°dio.h
>

4 
	~<°rög.h
>

5 
	~<time.h
>

6 
	~<sys/times.h
>

7 
	~<sig«l.h
>

8 
	~<î∫o.h
>

11 
	~"˚.h
"

13 
	#SIG
 (
SIGRTMIN
 + 3)

	)

14 
	#CLOCKID
 
CLOCK_REALTIME


	)

16 
timî_t
 
	gtimîid
;

18 
agög_£m
;

19 
agög_≥riod
;

22 
	$h™dÀr
(
sig
, 
sigöfo_t
 *
si
, *
uc
)

24 
ôimî•ec
 
ôs
;

26 
	`WPL_SemIn¸emít
(&
agög_£m
, 1);

28 
ôs
.
ô_vÆue
.
tv_£c
 = 
agög_≥riod
;

29 
ôs
.
ô_vÆue
.
tv_n£c
 = 0;

30 
ôs
.
ô_öãrvÆ
.
tv_£c
 = its.
ô_vÆue
.tv_sec;

31 
ôs
.
ô_öãrvÆ
.
tv_n£c
 = its.
ô_vÆue
.tv_nsec;

32 i‡(
	`timî_£âime
(
timîid
, 0, &
ôs
, 
NULL
) == -1)

34 
	}
}

38 
	$OS_AgögTimîCª©e
()

40 
siga˘i⁄
 
ß
;

41 
sigevít
 
£v
;

43 
ß
.
ß_Êags
 = 
SA_SIGINFO
;

44 
ß
.
ß_siga˘i⁄
 = 
h™dÀr
;

45 
	`sigem±y£t
(&
ß
.
ß_mask
);

46 i‡(
	`siga˘i⁄
(
SIG
, &
ß
, 
NULL
) == -1)

49 
£v
.
sigev_nŸify
 = 
SIGEV_SIGNAL
;

50 
£v
.
sigev_signo
 = 
SIG
;

51 
£v
.
sigev_vÆue
.
sivÆ_±r
 = &
timîid
;

52 i‡(
	`timî_¸óã
(
CLOCKID
, &
£v
, &
timîid
) == -1)

56 
	}
}

59 
	$OS_AgögTimîSèπ
()

61 
ôimî•ec
 
ôs
;

63 
ôs
.
ô_vÆue
.
tv_£c
 = 
agög_≥riod
;

64 
ôs
.
ô_vÆue
.
tv_n£c
 = 0;

65 
ôs
.
ô_öãrvÆ
.
tv_£c
 = its.
ô_vÆue
.tv_sec;

66 
ôs
.
ô_öãrvÆ
.
tv_n£c
 = its.
ô_vÆue
.tv_nsec;

68 
	`WPL_SemIn¸emít
(&
agög_£m
, 1);

70 i‡(
	`timî_£âime
(
timîid
, 0, &
ôs
, 
NULL
) == -1)

74 
	}
}

77 
	$OS_AgögTimîDñëe
()

79 i‡(
	`timî_dñëe
(
timîid
))

83 
	}
}

87 
WP_THREAD_ID
 
	gtimî_tid
;

88 
WP_SEM_ID
 
	gtimî_£m
;

89 
WP_U32
 
	gtimî_íabÀ
;

91 * 
Aµ_AgögFunc
(*
¨g
);

93 
	#s¢›
(Ë
__asm__
 
	`__vﬁ©ûe__
("¶» $0, $0, 1\n");

	)

94 
	#s¢›_4
(Ëdÿ{ 
	`s¢›
(); s¢›(); s¢›(); s¢›(); } 0)

	)

97 * 
	$OS_TimîThªad
(*
¨g
)

99 
WP_U32
 
°¨t
 = 0, 
cuºít
 = 0;

100 
WP_U32
 
dñè
 = 0;

101 
˙å
 = 0;

106 
	`WPL_SemDe¸emít
(&
timî_£m
, 1);

108 
°¨t
 = 
	`WT_TimeRód
();

109 
dñè
 = 0;

114 
˙å
 = 0; cntr < 100; cntr++)

115 
	`s¢›_4
();

117 i‡(!
timî_íabÀ
) ;

120 
cuºít
 = 
	`WT_TimeRód
();

121 
dñè
 +
	`WT_TimeDñè
(
cuºít
, 
°¨t
);

123 i‡(
agög_íabÀ
 && (
dñè
 >
agög_≥riod
 * 1000 * 1000))

125 
	`Aµ_AgögFunc
(
NULL
);

129 
°¨t
 = 
cuºít
;

133 i‡(
timî_íabÀ
)

135 
	`WPL_SemIn¸emít
(&
timî_£m
, 1);

138 
	}
}

140 
	$OS_AgögTimîCª©e
()

142 
Êag
 = 0;

144 i‡(!
Êag
)

146 
timî_íabÀ
 = 0;

148 
	`WPL_SemInô
(&
timî_£m
);

149 
	`WPL_ThªadInô
(&
timî_tid
, 
OS_TimîThªad
, 
NULL
);

151 
Êag
 = 1;

155 
	}
}

157 
	$OS_AgögTimîSèπ
()

159 
timî_íabÀ
 = 1;

160 
	`WPL_SemIn¸emít
(&
timî_£m
, 1);

161 
	`Aµ_AgögFunc
(
NULL
);

164 
	}
}

166 
	$OS_AgögTimîDñëe
()

168 
timî_íabÀ
 = 0;

171 
	}
}

	@ufe_utility.c

16 
	~<°rög.h
>

17 #i‡
deföed
(
__löux__
)

18 
	~<uni°d.h
>

20 
	~"wp_wddi.h
"

22 #i‚de‡
WTI_FLEXMUX_UTIL_H


23 
	~"wti_Êexmux_utû.h
"

25 #i‚de‡
_WPL_PLATFORM_H__


26 
	~<w∂_∂©f‹m.h
>

29 #ifde‡
WT_UFE_FRAMER


33 *
OMIINO_FRAMER_Eº‹CodeToTxt
(
WP_U32
 
Eº‹Code
);

37 
WP_U8
 
	mdevi˚
;

38 
WP_U8
 
	mlöe_p‹t_id
;

39 
WP_U8
 
	mÆ¨m_ˇãg‹y
;

40 
WP_U8
 
	mis_as£πed
;

41 } 
	tAPP_PORT_ALARM_TASK
;

44 
WP_U8
 
	mdevi˚
;

45 
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
 
	mídpoöt
;

46 
WP_U8
 
	mÆ¨m_ˇãg‹y
;

47 
WP_U8
 
	mis_as£πed
;

48 } 
	tAPP_PATH_ALARM_TASK
;

51 
WP_U8
 
	mdevi˚
;

52 
WP_U8
 
	mèbÀ_ödex
;

53 
WP_U16
 
	m∑d
;

54 
WP_U32
 
	mtime°amp
;

55 } 
	tAPP_PM_TASK
;

58 
WP_U8
 
	mdevi˚
;

59 
WP_U8
 
	mlöe_p‹t_id
;

60 
WP_U8
 
	mk1_vÆue
;

61 
WP_U8
 
	mk2_vÆue
;

62 } 
	tAPP_K1_K2_SIGNAL_TASK
;

65 
WP_U8
 
	mdevi˚
;

66 
WP_U8
 
	mlöe_p‹t_id
;

67 
WP_U8
 
	ms1_vÆue
;

68 } 
	tAPP_S1_SIGNAL_TASK
;

71 
WP_U8
 
	mdevi˚
;

72 
WP_U32
 
	msockë_˛õ¡_pdh
;

73 
WP_U8
 
	mÆ¨m_ˇãg‹y
;

74 
WP_U8
 
	mis_as£πed
;

75 } 
	tAPP_PDH_ALARM_TASK
;

77 
	#PORT_ALARM_TYPE
 1

	)

78 
	#PATH_ALARM_TYPE
 2

	)

79 
	#K1K2_SIGNAL_TYPE
 3

	)

80 
	#S1_SIGNAL_TYPE
 4

	)

81 
	#PDH_ALARM_TYPE
 5

	)

82 
	#PM_PORT_TYPE
 6

	)

83 
	#PM_HO_PATH_TYPE
 7

	)

84 
	#PM_LO_PATH_TYPE
 8

	)

85 
	#PM_PDH_TYPE
 9

	)

88 
WP_U32
 
	mèsk_ty≥
;

90 
APP_PORT_ALARM_TASK
 
	mp‹t_Æ¨m_èsk
;

91 
APP_PATH_ALARM_TASK
 
	m∑th_Æ¨m_èsk
;

92 
APP_PM_TASK
 
	mpm_èsk
;

93 
APP_K1_K2_SIGNAL_TASK
 
	mk1k2_sig«l_èsk
;

94 
APP_S1_SIGNAL_TASK
 
	ms1_sig«l_èsk
;

95 
APP_PDH_ALARM_TASK
 
	mpdh_Æ¨m_èsk
;

96 } 
	mu
;

97 } 
	t‰amî_èsk
;

100 
WP_U16
 
	mhód
;

101 
WP_U16
 
	mèû
;

102 
WP_U16
 
	mnum_ñemíts
;

103 
WP_U16
 
	m∑d
;

104 
‰amî_èsk
 *
	mèsk
;

105 } 
	t‰amî_èsk_li°
;

111 
	#ALARM_TASK_LIST_SIZE
 4096

	)

112 
‰amî_èsk
 
	gthe_Æ¨m_èsks
[
ALARM_TASK_LIST_SIZE
];

113 
‰amî_èsk_li°
 
	gthe_Æ¨m_èsk_li°
[1] = { { 0, 0, 
ALARM_TASK_LIST_SIZE
, 0, 
the_Æ¨m_èsks
} };

114 
	#PM_TASK_LIST_SIZE
 4096

	)

115 
‰amî_èsk
 
	gthe_pm_èsks
[
PM_TASK_LIST_SIZE
];

116 
‰amî_èsk_li°
 
	gthe_pm_èsk_li°
[1] = { { 0, 0, 
PM_TASK_LIST_SIZE
, 0, 
the_pm_èsks
} };

117 
	#SIGNAL_TASK_LIST_SIZE
 4096

	)

118 
‰amî_èsk
 
	gthe_sig«l_èsks
[
PM_TASK_LIST_SIZE
];

119 
‰amî_èsk_li°
 
	gthe_sig«l_èsk_li°
[1] = { { 0, 0, 
SIGNAL_TASK_LIST_SIZE
, 0, 
the_sig«l_èsks
} };

134 
WP_U32
 
	gnum_èsks
 = 0;

135 
WP_boﬁón
 
	g≥ndög_los
 = 
WP_FALSE
;

137 
	$add_‰amî_èsk
(
‰amî_èsk_li°
 *
èsk_li°
, 
‰amî_èsk
 *
èsk
)

139 
WP_U16
 
èû
 = 
èsk_li°
->tail;

140 
WP_U32
 
√xt
 = 
èû
 + 1;

142 i‡(
√xt
 =
èsk_li°
->
num_ñemíts
)

143 
√xt
 = 0;

145 i‡(
√xt
 !
èsk_li°
->
hód
)

147 
èsk_li°
->
èsk
[
èû
] = *task;

148 
èsk_li°
->
èû
 = 
√xt
;

150 ++
num_èsks
;

153 #i‡
WTI_COLLECT_TRACE_INFORMATION


154 
	`ªc‹d_a˘i⁄
(47, 
	`WP_TimeRód
());

157 
	`WTI_Êexmux_ªÀa£_£rvî_lock
();

158 
	}
}

176 
‰amî_èsk
 *
	$√xt_‰amî_èsk
(
‰amî_èsk_li°
 *
èsk_li°
, 
‰amî_èsk
 *
ªsu…
)

178 
WP_U32
 
hód
 = 
èsk_li°
->head;

179 
WP_U32
 
èû
 = 
èsk_li°
->tail;

181 i‡(
hód
 =
èû
)

182  
NULL
;

184 *
ªsu…
 = 
èsk_li°
->
èsk
[
hód
];

185 i‡(++
hód
 =
èsk_li°
->
num_ñemíts
)

186 
hód
 = 0;

187 
èsk_li°
->
hód
 = head;

189 --
num_èsks
;

191  
ªsu…
;

192 
	}
}

194 
	$WTI_Æloˇã_pm_°‹age_¨ós
()

196 #i‡
WTI_FLEXMUX_ENABLE_PERFORMANCE_MONITORING


200 
	#SONET_SDH_PORT_STORAGE_NUM_ELEMENTS
 120

	)

201 
	#SONET_SDH_HO_PATH_STORAGE_NUM_ELEMENTS
 120

	)

202 
	#SONET_SDH_LO_PATH_STORAGE_NUM_ELEMENTS
 120

	)

203 
	#PDH_STORAGE_NUM_ELEMENTS
 120

	)

205 *
•a˚
;

206 
ñemít_size
;

207 
WUFE_°©us
 
°©us
;

208 
WP_U32
 
i
;

210 
i
=0;i<
WPX_UFE_FRAMER_BUILD_OPTION_MAX_DEVICES
;++i)

212 
ñemít_size
 = (
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_PORT_ENDPOINT_TYPE
);

213 
•a˚
 = 
	`mÆloc
(
SONET_SDH_PORT_STORAGE_NUM_ELEMENTS
 * 
ñemít_size
);

214 i‡(
•a˚
 =
NULL
)

215 
	`WTI_FÀxmuxCheckSètus
("PM storageállocation",

216 
WPX_UFE_FRAMER_ERROR_PARAMETER_OUT_OF_RANGE
, 
__LINE__
);

217 
°©us
 = 
	`WPX_FRMR_PM_S⁄ëSdhP‹tSt‹age
(
i
, 
•a˚
, 
SONET_SDH_PORT_STORAGE_NUM_ELEMENTS
);

218 i‡(
°©us
 !
WUFE_OK
)

219 
	`WTI_FÀxmuxCheckSètus
("PM storageállocation",

220 
WPX_UFE_FRAMER_ERROR_PARAMETER_OUT_OF_RANGE
, 
__LINE__
);

221 
ñemít_size
 = (
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_HO_PATH_ENDPOINT_TYPE
);

222 
•a˚
 = 
	`mÆloc
(
SONET_SDH_HO_PATH_STORAGE_NUM_ELEMENTS
 * 
ñemít_size
);

223 i‡(
•a˚
 =
NULL
)

224 
	`WTI_FÀxmuxCheckSètus
("PM storageállocation",

225 
WPX_UFE_FRAMER_ERROR_PARAMETER_OUT_OF_RANGE
, 
__LINE__
);

226 
°©us
 = 
	`WPX_FRMR_PM_S⁄ëSdhHOP©hSt‹age
(
i
, 
•a˚
, 
SONET_SDH_HO_PATH_STORAGE_NUM_ELEMENTS
);

227 i‡(
°©us
 !
WUFE_OK
)

228 
	`WTI_FÀxmuxCheckSètus
("PM storageállocation",

229 
WPX_UFE_FRAMER_ERROR_PARAMETER_OUT_OF_RANGE
, 
__LINE__
);

231 
ñemít_size
 = (
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_LO_PATH_ENDPOINT_TYPE
);

232 
•a˚
 = 
	`mÆloc
(
SONET_SDH_LO_PATH_STORAGE_NUM_ELEMENTS
 * 
ñemít_size
);

233 i‡(
•a˚
 =
NULL
)

234 
	`WTI_FÀxmuxCheckSètus
("PM storageállocation",

235 
WPX_UFE_FRAMER_ERROR_PARAMETER_OUT_OF_RANGE
, 
__LINE__
);

236 
°©us
 = 
	`WPX_FRMR_PM_S⁄ëSdhLOP©hSt‹age
(
i
, 
•a˚
, 
SONET_SDH_LO_PATH_STORAGE_NUM_ELEMENTS
);

237 i‡(
°©us
 !
WUFE_OK
)

238 
	`WTI_FÀxmuxCheckSètus
("PM storageállocation",

239 
WPX_UFE_FRAMER_ERROR_PARAMETER_OUT_OF_RANGE
, 
__LINE__
);

241 
ñemít_size
 = (
WPX_UFE_FRAMER_PDH_PERFORMANCE_MONITORING_ENDPOINT_TYPE
);

242 
•a˚
 = 
	`mÆloc
(
PDH_STORAGE_NUM_ELEMENTS
 * 
ñemít_size
);

243 i‡(
•a˚
 =
NULL
)

244 
	`WTI_FÀxmuxCheckSètus
("PM storageállocation",

245 
WPX_UFE_FRAMER_ERROR_PARAMETER_OUT_OF_RANGE
, 
__LINE__
);

246 
°©us
 = 
	`WPX_FRMR_PM_PdhSt‹age
(
i
, 
•a˚
, 
PDH_STORAGE_NUM_ELEMENTS
);

247 i‡(
°©us
 !
WUFE_OK
)

248 
	`WTI_FÀxmuxCheckSètus
("PM storageállocation",

249 
WPX_UFE_FRAMER_ERROR_PARAMETER_OUT_OF_RANGE
, 
__LINE__
);

253 
	}
}

255 #i‡
WTI_PRINT_ALARM_DATA


256 *
	glöe_å™s„r_ty≥_«mes
[] =

301 #i‡
WTI_FLEXMUX_ENABLE_ALARMS


302 #ifde‡
VERBOSE


303 
	#WTI_LINE_SIDE_ALARM_DISPLAY
 1

	)

305 #i‡
WTI_PRINT_ALARM_DATA


306 
	#WTI_LINE_SIDE_ALARM_DISPLAY
 1

	)

308 
	#WTI_LINE_SIDE_ALARM_DISPLAY
 0

	)

312 #i‡
WTI_LINE_SIDE_ALARM_DISPLAY


314 *
	glöe_side_Æ¨m_«mes
[] =

372 *
	gsockë_˛õ¡_side_Æ¨m_«mes
[] =

382 
	$£rvi˚_∑th_Æ¨m
(
WP_U8
 
devi˚_id
,

383 
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
 *
p_SDH_S⁄ë_löe_ídpoöt_ty≥
,

384 
WP_U8
 
Æ¨m_ˇãg‹y
,

385 
WP_U8
 
is_as£πed
)

387 #i‡
WTI_COLLECT_TIMING_INFORMATION


388 
	`ªc‹d_a˘i⁄
(20, 
	`WP_TimeRód
());

390 #i‡
WTI_FLEXMUX_ENABLE_ALARMS


391 #i‡
PRINT_ALARM_DATA


392 
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
 *
öfo
 = 
p_SDH_S⁄ë_löe_ídpoöt_ty≥
;

393 
WP_U32
 
ty≥
 = 
öfo
->
Tøns„rTy≥
;

395 i‡(
ty≥
 >
WPX_UFE_FRAMER_WUFE_SDH_TYPE_T1
 &&Åy≥ <
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VCAT
)

396 
	`¥ötf
("PATH ALARM: <%d:%d:%d:%d:%d> %s %s\n",

397 
öfo
->
u
.
SDH
.
°m4
, info->u.SDH.
°m1
, info->u.SDH.
°m0
, info->u.SDH.
tug2
, info->u.SDH.
tu
,

398 
löe_side_Æ¨m_«mes
[
Æ¨m_ˇãg‹y
], 
is_as£πed
 ? "Asserted" : "Unasserted");

399 i‡(
ty≥
 >
WPX_UFE_FRAMER_WUFE_SONET_TYPE_T1
 &&Åy≥ <
WPX_UFE_FRAMER_WUFE_SONET_TYPE_VCAT
)

400 
	`¥ötf
("PATH ALARM: <%d:%d:%d:%d:%d> %s %s\n",

401 
öfo
->
u
.
SONET
.
°s12
, info->u.SONET.
°s3
, info->u.SONET.
°s1
, info->u.SONET.
vt_group
, info->u.SONET.
vt
,

402 
löe_side_Æ¨m_«mes
[
Æ¨m_ˇãg‹y
], 
is_as£πed
 ? "Asserted" : "Unasserted");

404 
	`¥ötf
("?????Åy≥ = %d\n", 
ty≥
);

405 
	`¥ötf
("álarm_category = %s %s\n",

406 
löe_side_Æ¨m_«mes
[
Æ¨m_ˇãg‹y
], 
is_as£πed
 ? "Asserted" : "Unasserted");

409 #ifde‡
VERBOSE


410 
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
 *
öfo
 = 
p_SDH_S⁄ë_löe_ídpoöt_ty≥
;

412 
	`¥ötf
("PATH ALARM: device %d <%d:%d:%d:%d>:álarm_category = %s %s\n",

413 
devi˚_id
, 
öfo
->
u
.
SDH
.
°m1
, info->u.SDH.
°m0
, info->u.SDH.
tug2
, info->u.SDH.
tu
,

414 
löe_side_Æ¨m_«mes
[
Æ¨m_ˇãg‹y
], 
is_as£πed
 ? "Asserted" : "Unasserted");

417 
	}
}

419 
	$£rvi˚_p‹t_Æ¨m
(
WP_U8
 
devi˚
, WP_U8 
löe_p‹t_id
, WP_U8 
Æ¨m_ˇãg‹y
, WP_U8 
is_as£πed
)

421 #i‡
WTI_COLLECT_TIMING_INFORMATION


422 
	`ªc‹d_a˘i⁄
(21, 
	`WP_TimeRód
());

424 #i‡
WTI_FLEXMUX_ENABLE_ALARMS


425 #ifde‡
VERBOSE


426 
	`¥ötf
("PORT ALARM: device %d,Üine_port_id = %d,álarm_category = %s %s\n",

427 
devi˚
, 
löe_p‹t_id
, 
löe_side_Æ¨m_«mes
[
Æ¨m_ˇãg‹y
], 
is_as£πed
 ? "Asserted" : "Unasserted");

430 
	}
}

432 
	$£rvi˚_los_Æ¨m
(
WP_U8
 
devi˚
, WP_U8 
löe_p‹t_id
, WP_U8 
Æ¨m_ˇãg‹y
, WP_U8 
is_as£πed
, 
‰amî_èsk
 *
èsk
)

434 #i‡
WTI_FLEXMUX_ENABLE_ALARMS


435 
WP_U8
 
f‹˚_°©e
;

436 
WP_U8
 
ªsu…
;

437 
WP_U32
 
å™ß˘i⁄
 = 700;

438 
WP_U8
 
	`WPX_FRMR_PL_SONET_SDH_PORT_F‹˚A
(
WP_U32
 
Tønß˘i⁄Idítifõr
, WP_U8 
iDevi˚
, WP_U8 
iLöeP‹t
);

439 
WP_U8
 
	`WPX_FRMR_PL_SONET_SDH_PORT_F‹˚B
(
WP_U32
 
Tønß˘i⁄Idítifõr
, WP_U8 
iDevi˚
, WP_U8 
iLöeP‹t
);

440 
WP_U8
 
	`WPX_FRMR_PL_SONET_SDH_PORT_GëF‹˚Sèã
(WP_U8 
iDevi˚
, WP_U8 
iLöeP‹t
, WP_U8 * 
pF‹˚Side
);

442 #i‡
WTI_COLLECT_TIMING_INFORMATION


443 
	`ªc‹d_a˘i⁄
(22, 
	`WP_TimeRód
());

446 #ifde‡
VERBOSE


447 
	`¥ötf
("PORT LOS ALARM: devi˚ id %d,Üöe_p‹t_id = %d, %†%s\n", 
löe_p‹t_id
,

448 
devi˚
, 
löe_side_Æ¨m_«mes
[
Æ¨m_ˇãg‹y
], 
is_as£πed
 ? " ON" : "OFF");

451 #i‡
NO_APS_ON_LOS


452 
	`¥ötf
("NO SWITCHING PERFORMED\n");

456 i‡((
ªsu…
 = 
	`WPX_FRMR_PL_SONET_SDH_PORT_GëF‹˚Sèã
(
devi˚
, 
löe_p‹t_id
, &
f‹˚_°©e
)Ë=
WPX_UFE_FRAMER_OK
)

458 #i‡
DEBUG


459 i‡(
f‹˚_°©e
 =
WPX_UFE_FRAMER_PROTECTION_FORCE_A
)

460 
	`¥ötf
("Current Force State is A\n");

461 i‡(
f‹˚_°©e
 =
WPX_UFE_FRAMER_PROTECTION_FORCE_B
)

462 
	`¥ötf
("Current Force State is B\n");

465 i‡(
f‹˚_°©e
 =
WPX_UFE_FRAMER_PROTECTION_FORCE_A
)

467 i‡(
is_as£πed
)

469 
ªsu…
 = 
	`WPX_FRMR_PL_SONET_SDH_PORT_F‹˚B
(
å™ß˘i⁄
++, 
devi˚
, 
löe_p‹t_id
);

470 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_F‹˚B", 
ªsu…
, 
__LINE__
);

473 
	`add_‰amî_èsk
(
the_Æ¨m_èsk_li°
, 
èsk
);

476 i‡(
f‹˚_°©e
 =
WPX_UFE_FRAMER_PROTECTION_FORCE_B
)

478 i‡(
is_as£πed
)

480 
ªsu…
 = 
	`WPX_FRMR_PL_SONET_SDH_PORT_F‹˚A
(
å™ß˘i⁄
++, 
devi˚
, 
löe_p‹t_id
);

481 
	`WTI_FÀxmuxCheckSètus
("WPX_FRMR_SONET_SDH_PORT_F‹˚A", 
ªsu…
, 
__LINE__
);

484 
	`add_‰amî_èsk
(
the_Æ¨m_èsk_li°
, 
èsk
);

487 
	`¥ötf
("O¿%d: f‹˚_°©êunknow¿%d\n", 
löe_p‹t_id
, 
f‹˚_°©e
);

489 i‡(
ªsu…
 =
WPX_UFE_FRAMER_ERROR_PORT_RATE_NOT_CONFIGURED
)

490 
	`¥ötf
("GetForceStateÑeturns WPX_UFE_FRAMER_ERROR_PORT_RATE_NOT_CONFIGURED\n");

492 
	`¥ötf
("GëF‹˚SèãÑëu∫†%d\n", 
ªsu…
);

494 #i‡
WTI_COLLECT_TIMING_INFORMATION


495 
	`ªc‹d_a˘i⁄
(23, 
	`WP_TimeRód
());

499 
	}
}

501 
	$£rvi˚_k1_k2_sig«l
(
WP_U8
 
devi˚
, WP_U8 
löe_p‹t_id
, WP_U8 
k1
, WP_U8 
k2
)

503 #i‡
WTI_COLLECT_TIMING_INFORMATION


504 
	`ªc‹d_a˘i⁄
(24, 
	`WP_TimeRód
());

506 #i‡
WTI_FLEXMUX_ENABLE_ALARMS


507 #ifde‡
VERBOSE


509 
	`¥ötf
("K1K2 SIGNAL: devi˚ = %d, iLöeP‹à%d K1 %d, K2 %d\n", 
devi˚
, 
löe_p‹t_id
, 
k1
, 
k2
);

513 
	}
}

515 
	$£rvi˚_s1_sig«l
(
WP_U8
 
devi˚
, WP_U8 
löe_p‹t_id
, WP_U8 
s1
)

517 #i‡
WTI_COLLECT_TIMING_INFORMATION


518 
	`ªc‹d_a˘i⁄
(25, 
	`WP_TimeRód
());

520 #i‡
WTI_FLEXMUX_ENABLE_ALARMS


521 #ifde‡
VERBOSE


523 
	`¥ötf
("S1 SIGNAL: devi˚ = %d, iLöeP‹à%d S1 %d\n", 
devi˚
, 
löe_p‹t_id
, 
s1
);

527 
	}
}

529 
	$£rvi˚_pdh_Æ¨m
(
WP_U8
 
devi˚
, 
WP_U32
 
sockë_˛õ¡_pdh_id
, WP_U8 
Æ¨m_ˇãg‹y
, WP_U8 
is_as£πed
)

531 #i‡
WTI_COLLECT_TIMING_INFORMATION


532 
	`ªc‹d_a˘i⁄
(41, 
	`WP_TimeRód
());

534 #i‡
WTI_FLEXMUX_ENABLE_ALARMS


535 #ifde‡
VERBOSE


536 
	`¥ötf
("PDH ALARM: iSocketClientPDH = %d,álarm_category = %s is %s\n",

537 
sockë_˛õ¡_pdh_id
, 
sockë_˛õ¡_side_Æ¨m_«mes
[
Æ¨m_ˇãg‹y
], 
is_as£πed
 ? "asserted" : "unasserted");

540 
	}
}

542 #i‡
WTI_FLEXMUX_ENABLE_ALARMS


544 
	$cb_Æ¨m_m≠_com∂ëe
(
WP_U8
 
devi˚
)

546 
	`cb_p‹t_Æ¨m
(
WP_U8
 
devi˚
, WP_U8 
löe_p‹t_id
, WP_U8 
Æ¨m_ˇãg‹y
, WP_U8 
is_as£πed
);

547 
	`cb_∑th_Æ¨m
(
WP_U8
 
devi˚_id
,

548 
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
 *
p_SDH_S⁄ë_löe_ídpoöt_ty≥
,

549 
WP_U8
 
Æ¨m_ˇãg‹y
, WP_U8 
is_as£πed
);

550 
	`cb_pdh_Æ¨m
(
WP_U8
 
devi˚_id
, 
WP_U32
 
iSockëClõ¡PDH
, 
U8
 
Æ¨m_ˇãg‹y
, U8 
is_as£πed
);

552 
	`WPX_FRMR_Regi°îS⁄ëSdhP‹tAœrmCÆlback
((*)()&
cb_p‹t_Æ¨m
);

553 
	`WPX_FRMR_Regi°îS⁄ëSdhP©hAœrmCÆlback
((*)()&
cb_∑th_Æ¨m
);

554 
	`WPX_FRMR_Regi°îSockëClõ¡PdhAœrmCÆlback
((*)()&
cb_pdh_Æ¨m
);

555 
	}
}

557 
	$cb_∑th_Æ¨m
(
WP_U8
 
devi˚_id
, 
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
 *
p_SDH_S⁄ë_löe_ídpoöt_ty≥
,

558 
WP_U8
 
Æ¨m_ˇãg‹y
, WP_U8 
is_as£πed
)

560 
‰amî_èsk
 
èsk
;

561 
APP_PATH_ALARM_TASK
 *
∑th_Æ¨m
 = &
èsk
.
u
.
∑th_Æ¨m_èsk
;

563 #i‡
WTI_PRINT_ALARM_DATA


565 
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
 *
öfo
 = 
p_SDH_S⁄ë_löe_ídpoöt_ty≥
;

566 
WP_U32
 
ty≥
 = 
öfo
->
Tøns„rTy≥
;

567 
fú°_time
 = 1;

569 i‡(
fú°_time
)

571 
fú°_time
 = 0;

572 
	`¥ötf
("PATH ALARM: LTT = %s\n", 
löe_å™s„r_ty≥_«mes
[
ty≥
]);

575 i‡(
ty≥
 >
WPX_UFE_FRAMER_WUFE_SDH_TYPE_T1
 &&Åy≥ <
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VCAT
)

576 
	`¥ötf
("PATH ALARM: <%d:%d:%d:%d:%d> %s %s\n",

577 
öfo
->
u
.
SDH
.
°m4
, info->u.SDH.
°m1
, info->u.SDH.
°m0
, info->u.SDH.
tug2
, info->u.SDH.
tu
,

578 
löe_side_Æ¨m_«mes
[
Æ¨m_ˇãg‹y
], 
is_as£πed
 ? "Asserted" : "Unasserted");

579 i‡(
ty≥
 >
WPX_UFE_FRAMER_WUFE_SONET_TYPE_T1
 &&Åy≥ <
WPX_UFE_FRAMER_WUFE_SONET_TYPE_VCAT
)

580 
	`¥ötf
("PATH ALARM: <%d:%d:%d:%d:%d> %s %s\n",

581 
öfo
->
u
.
SONET
.
°s12
, info->u.SONET.
°s3
, info->u.SONET.
°s1
, info->u.SONET.
vt_group
, info->u.SONET.
vt
,

582 
löe_side_Æ¨m_«mes
[
Æ¨m_ˇãg‹y
], 
is_as£πed
 ? "Asserted" : "Unasserted");

584 
	`¥ötf
("UNKNOWN PATH ALARM TYPE %d\n", 
ty≥
);

588 
èsk
.
èsk_ty≥
 = 
PATH_ALARM_TYPE
;

589 
∑th_Æ¨m
->
devi˚
 = 
devi˚_id
;

590 
∑th_Æ¨m
->
ídpoöt
 = *
p_SDH_S⁄ë_löe_ídpoöt_ty≥
;

591 
∑th_Æ¨m
->
Æ¨m_ˇãg‹y
 =álarm_category;

592 
∑th_Æ¨m
->
is_as£πed
 = is_asserted;

594 
	`add_‰amî_èsk
(
the_Æ¨m_èsk_li°
, &
èsk
);

595 #i‡
WTI_COLLECT_TIMING_INFORMATION


596 
	`ªc‹d_a˘i⁄
(26, 
	`WP_TimeRód
());

598 
	}
}

600 
	$cb_p‹t_Æ¨m
(
WP_U8
 
devi˚
, WP_U8 
löe_p‹t_id
, WP_U8 
Æ¨m_ˇãg‹y
, WP_U8 
is_as£πed
)

602 
‰amî_èsk
 
èsk
;

603 
APP_PORT_ALARM_TASK
 *
p‹t_Æ¨m
 = &
èsk
.
u
.
p‹t_Æ¨m_èsk
;

605 
èsk
.
èsk_ty≥
 = 
PORT_ALARM_TYPE
;

606 
p‹t_Æ¨m
->
devi˚
 = device;

607 
p‹t_Æ¨m
->
löe_p‹t_id
 =Üine_port_id;

608 
p‹t_Æ¨m
->
Æ¨m_ˇãg‹y
 =álarm_category;

609 
p‹t_Æ¨m
->
is_as£πed
 = is_asserted;

611 i‡((
Æ¨m_ˇãg‹y
 =
WPX_UFE_FRAMER_SDH_LOS
) ||

612 (
Æ¨m_ˇãg‹y
 =
WPX_UFE_FRAMER_SDH_LOF
) ||

613 (
Æ¨m_ˇãg‹y
 =
WPX_UFE_FRAMER_SDH_MS_AIS
) ||

614 (
Æ¨m_ˇãg‹y
 =
WPX_UFE_FRAMER_SONET_LOS
) ||

615 (
Æ¨m_ˇãg‹y
 =
WPX_UFE_FRAMER_SONET_LOF
))

617 i‡(
is_as£πed
)

619 #i‡
WTI_COLLECT_TIMING_INFORMATION


620 
	`ªc‹d_a˘i⁄
(27, 
	`WP_TimeRód
());

622 
	`£rvi˚_los_Æ¨m
(
devi˚
, 
löe_p‹t_id
, 
Æ¨m_ˇãg‹y
, 
is_as£πed
, &
èsk
);

625 
	`add_‰amî_èsk
(
the_Æ¨m_èsk_li°
, &
èsk
);

628 
	`add_‰amî_èsk
(
the_Æ¨m_èsk_li°
, &
èsk
);

630 #i‡
WTI_COLLECT_TIMING_INFORMATION


631 
	`ªc‹d_a˘i⁄
(28, 
	`WP_TimeRód
());

633 
	}
}

635 
	$cb_k1k2_sig«l
(
WP_U8
 
devi˚_id
, WP_U8 
iLöeP‹t
, 
WPX_UFE_FRAMER_SONET_SDH_PORT_LINE_K1K2_TYPE
 *
pRX_K1K2
)

637 
‰amî_èsk
 
èsk
;

638 
APP_K1_K2_SIGNAL_TASK
 *
k1k2
 = &
èsk
.
u
.
k1k2_sig«l_èsk
;

640 
èsk
.
èsk_ty≥
 = 
K1K2_SIGNAL_TYPE
;

641 
k1k2
->
devi˚
 = 
devi˚_id
;

642 
k1k2
->
löe_p‹t_id
 = 
iLöeP‹t
;

643 
k1k2
->
k1_vÆue
 = 
pRX_K1K2
->
K1
;

644 
k1k2
->
k2_vÆue
 = 
pRX_K1K2
->
K2
;

646 
	`add_‰amî_èsk
(
the_sig«l_èsk_li°
, &
èsk
);

647 #i‡
WTI_COLLECT_TIMING_INFORMATION


648 
	`ªc‹d_a˘i⁄
(29, 
	`WP_TimeRód
());

650 
	}
}

652 
	$cb_s1_sig«l
(
WP_U8
 
devi˚_id
, WP_U8 
iLöeP‹t
, 
U8
 
s1_vÆue
)

654 
‰amî_èsk
 
èsk
;

655 
APP_S1_SIGNAL_TASK
 *
s1
 = &
èsk
.
u
.
s1_sig«l_èsk
;

657 
èsk
.
èsk_ty≥
 = 
S1_SIGNAL_TYPE
;

658 
s1
->
devi˚
 = 
devi˚_id
;

659 
s1
->
löe_p‹t_id
 = 
iLöeP‹t
;

660 
s1
->
s1_vÆue
 = s1_value;

662 
	`add_‰amî_èsk
(
the_sig«l_èsk_li°
, &
èsk
);

663 #i‡
WTI_COLLECT_TIMING_INFORMATION


664 
	`ªc‹d_a˘i⁄
(30, 
	`WP_TimeRód
());

666 
	}
}

668 
	$cb_pdh_Æ¨m
(
WP_U8
 
devi˚_id
, 
WP_U32
 
iSockëClõ¡PDH
, 
U8
 
Æ¨m_ˇãg‹y
, U8 
is_as£πed
)

670 
‰amî_èsk
 
èsk
;

671 
APP_PDH_ALARM_TASK
 *
pdh
 = &
èsk
.
u
.
pdh_Æ¨m_èsk
;

673 
èsk
.
èsk_ty≥
 = 
PDH_ALARM_TYPE
;

674 
pdh
->
devi˚
 = 
devi˚_id
;

675 
pdh
->
sockë_˛õ¡_pdh
 = 
iSockëClõ¡PDH
;

676 
pdh
->
Æ¨m_ˇãg‹y
 =álarm_category;

677 
pdh
->
is_as£πed
 = is_asserted;

679 
	`add_‰amî_èsk
(
the_Æ¨m_èsk_li°
, &
èsk
);

680 #i‡
WTI_COLLECT_TIMING_INFORMATION


681 
	`ªc‹d_a˘i⁄
(31, 
	`WP_TimeRód
());

683 
	}
}

686 
	$cb_p‹t_Æ¨m_ªp‹t_⁄ly
(
WP_U8
 
devi˚
, WP_U8 
löe_p‹t_id
, WP_U8 
Æ¨m_ˇãg‹y
, WP_U8 
is_as£πed
)

688 #i‡
WTI_FLEXMUX_ENABLE_ALARMS


689 #ifde‡
VERBOSE


690 
	`¥ötf
("PORT ALARM REPORTING::Üine_port_id = %d,álarm_category = %s %s\n",

691 
löe_p‹t_id
, 
löe_side_Æ¨m_«mes
[
Æ¨m_ˇãg‹y
], 
is_as£πed
 ? "Asserted" : "Unasserted");

694 
	}
}

696 
	$cb_∑th_Æ¨m_ªp‹t_⁄ly
(
WP_U8
 
devi˚_id
,

697 
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
 *
p_SDH_S⁄ë_löe_ídpoöt_ty≥
,

698 
WP_U8
 
Æ¨m_ˇãg‹y
,

699 
WP_U8
 
is_as£πed
)

701 #i‡
WTI_FLEXMUX_ENABLE_ALARMS


702 #ifde‡
VERBOSE


703 
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
 *
öfo
 = 
p_SDH_S⁄ë_löe_ídpoöt_ty≥
;

705 
	`¥ötf
("PATH ALARM REPORTING:: device %d <%d:%d:%d:%d>:álarm_category = %s %s\n",

706 
devi˚_id
, 
öfo
->
u
.
SDH
.
°m1
, info->u.SDH.
°m0
, info->u.SDH.
tug2
, info->u.SDH.
tu
,

707 
löe_side_Æ¨m_«mes
[
Æ¨m_ˇãg‹y
], 
is_as£πed
 ? "Asserted" : "Unasserted");

710 
	}
}

712 
	$cb_pdh_Æ¨m_ªp‹t_⁄ly
(
WP_U8
 
devi˚_id
, 
WP_U32
 
iSockëClõ¡PDH
, 
U8
 
Æ¨m_ˇãg‹y
, U8 
is_as£πed
)

714 #i‡
WTI_FLEXMUX_ENABLE_ALARMS


715 #ifde‡
VERBOSE


716 
	`¥ötf
("PDH ALARM REPORTING: iSocketClientPDH = %d,álarm_category = %s is %s\n",

717 
iSockëClõ¡PDH
, 
sockë_˛õ¡_side_Æ¨m_«mes
[
Æ¨m_ˇãg‹y
], 
is_as£πed
 ? "asserted" : "unasserted");

720 
	}
}

724 #i‡
WTI_FLEXMUX_ENABLE_PERFORMANCE_MONITORING


726 
WP_U32
 
	gB1_cou¡
, 
	gB2_cou¡
, 
	gM1_cou¡
;

730 
	$£rvi˚_pm_p‹t_d©a
(
WP_U8
 
devi˚_id
, WP_U8 
èbÀ_ödex
, 
WP_U32
 
time°amp
)

732 #i‡
WTI_COLLECT_TIMING_INFORMATION


733 
	`ªc‹d_a˘i⁄
(32, 
	`WP_TimeRód
());

735 #i‡
WTI_FLEXMUX_ENABLE_PERFORMANCE_MONITORING


737 
WP_U32
 
cou¡
;

738 
WP_U8
 
ªsu…
;

740 #ifde‡
VERBOSE


741 
	`¥ötf
("PM PORT: device_id = %d,Åable_index = %d,Åimestamp = 0x%x\n",

742 
devi˚_id
, 
èbÀ_ödex
, 
time°amp
);

745 i‡((
ªsu…
 = 
	`WPX_FRMR_STATUS_PM_SONET_SDH_P‹t_RódD©a
(

746 
devi˚_id
, 
èbÀ_ödex
, 0,

747 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_B1
, &
cou¡
)) == 0)

749 #ifde‡
VERBOSE


750 i‡(
cou¡
 > 0)

751 
	`¥ötf
("p‹à%d: B1 cou¡ %d\n", 
devi˚_id
, 
cou¡
);

753 
B1_cou¡
 +
cou¡
;

756 
	`¥ötf
("P‹t_RódD©®Áûed o¿B1: 0x%x\n", 
ªsu…
);

758 i‡((
ªsu…
 = 
	`WPX_FRMR_STATUS_PM_SONET_SDH_P‹t_RódD©a
(

759 
devi˚_id
, 
èbÀ_ödex
, 0,

760 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_B2
, &
cou¡
)) == 0)

762 #ifde‡
VERBOSE


763 i‡(
cou¡
 > 0)

764 
	`¥ötf
("p‹à%d: B2 cou¡ %d\n", 
devi˚_id
, 
cou¡
);

766 
B2_cou¡
 +
cou¡
;

769 
	`¥ötf
("P‹t_RódD©®Áûed o¿B2: 0x%x\n", 
ªsu…
);

771 i‡((
ªsu…
 = 
	`WPX_FRMR_STATUS_PM_SONET_SDH_P‹t_RódD©a
(

772 
devi˚_id
, 
èbÀ_ödex
, 0,

773 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_M1
, &
cou¡
)) == 0)

775 #ifde‡
VERBOSE


776 i‡(
cou¡
 > 0)

777 
	`¥ötf
("p‹à%d: M1 cou¡ %d\n", 
devi˚_id
, 
cou¡
);

779 
M1_cou¡
 +
cou¡
;

782 
	`¥ötf
("P‹t_RódD©®Áûed o¿M1: 0x%x\n", 
ªsu…
);

785 
	}
}

787 
	$£rvi˚_pm_ho_∑th_d©a
(
WP_U8
 
devi˚_id
, WP_U8 
èbÀ_ödex
, 
WP_U32
 
time°amp
)

789 #i‡
WTI_COLLECT_TIMING_INFORMATION


790 
	`ªc‹d_a˘i⁄
(33, 
	`WP_TimeRód
());

792 #i‡
WTI_FLEXMUX_ENABLE_PERFORMANCE_MONITORING


794 
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
 
LöeEndpoötTy≥
;

795 
U32
 
cou¡
 = 0;

796 
U32
 
max_°m1
, 
max_°m0
, 
max_tug2
, 
max_tu
;

797 
U32
 
°m1
, 
°m0
, 
tug2
, 
tu
;

798 
U8
 
ªsu…
;

799 
U32
 
°m1_ö¸emít
;

801 
	`mem£t
(&
LöeEndpoötTy≥
, 0, (
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
));

803 #ifde‡
VERBOSE


804 
	`¥ötf
("HO PATH: devi˚ = %d,ÅabÀ_ödex = %dÅime°am∞0x%x\n", 
devi˚_id
, 
èbÀ_ödex
, 
time°amp
);

807 
LöeEndpoötTy≥
.
Tøns„rTy≥
 = 
ho_å™s„r_ty≥_ö_u£
;

808 
LöeEndpoötTy≥
.
u
.
SDH
.
°m4
 = 0;

810 i‡(
LöeEndpoötTy≥
.
Tøns„rTy≥
 =
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC3
)

811 
max_°m0
 = 3;

813 
max_°m0
 = 1;

815 
max_tug2
 = 
max_tu
 = 1;

817 i‡(
buûd_≥rs⁄Æôy_ö_u£
 =
WPX_UFE_FRAMER_BUILD_PERSONALITY_4_PLUS_4_OC3
)

819 
°m1_ö¸emít
 = 2;

820 
max_°m1
 = 4;

824 
°m1_ö¸emít
 = 1;

825 
max_°m1
 = 4;

828 
°m1
 = 0; stm1 < 
max_°m1
; stm1 +
°m1_ö¸emít
)

829 
°m0
 = 0; stm0 < 
max_°m0
; ++stm0)

830 
tug2
 = 0;Åug2 < 
max_tug2
; ++tug2)

831 
tu
 = 0;Åu < 
max_tu
; ++tu)

833 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
 = stm1;

834 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
 = stm0;

835 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
 =Åug2;

836 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
 =Åu;

838 
ªsu…
 = 
	`WPX_FRMR_STATUS_PM_SONET_SDH_HO_PATH_RódD©a
(
devi˚_id
, 
èbÀ_ödex
,

839 &
LöeEndpoötTy≥
, 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_B3
,

840 &
cou¡
);

842 i‡(
ªsu…
)

843 
	`¥ötf
(" ----> HO_Path_ReadData for B3 failed on %d:%d:%d:%d on device %d with %s\n",

844 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
,

845 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
,

846 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
,

847 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
,

848 
devi˚_id
,

849 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

850 #ifde‡
VERBOSE


851 i‡(
cou¡
 > 0)

852 
	`¥ötf
(" ----> B3 cou¡ o¿%d:%d:%d:%d i†%d\n", 
°m1
, 
°m0
, 
tug2
, 
tu
, 
cou¡
);

855 
ªsu…
 = 
	`WPX_FRMR_STATUS_PM_SONET_SDH_HO_PATH_RódD©a
(
devi˚_id
, 
èbÀ_ödex
,

856 &
LöeEndpoötTy≥
, 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_G1
,

857 &
cou¡
);

859 i‡(
ªsu…
)

860 
	`¥ötf
(" ----> HO_Path_ReadData for G1 failed on %d:%d:%d:%d on device %d with %s\n",

861 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
,

862 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
,

863 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
,

864 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
,

865 
devi˚_id
,

866 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

867 #ifde‡
VERBOSE


868 i‡(
cou¡
 > 0)

869 
	`¥ötf
(" ----> G1 cou¡ o¿%d:%d:%d:%d i†%d\n", 
°m1
, 
°m0
, 
tug2
, 
tu
, 
cou¡
);

874 
	}
}

876 
	$£rvi˚_pm_lo_∑th_d©a
(
WP_U8
 
devi˚_id
, WP_U8 
èbÀ_ödex
, 
WP_U32
 
time°amp
)

878 #i‡
WTI_COLLECT_TIMING_INFORMATION


879 
	`ªc‹d_a˘i⁄
(34, 
	`WP_TimeRód
());

881 #i‡
WTI_FLEXMUX_ENABLE_PERFORMANCE_MONITORING


883 
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
 
LöeEndpoötTy≥
;

884 
U32
 
cou¡
 = 0;

885 
U32
 
max_°m1
, 
max_°m0
, 
max_tug2
, 
max_tu
;

886 
U32
 
°m1
, 
°m0
, 
tug2
, 
tu
;

887 
U8
 
ªsu…
;

889 
	`mem£t
(&
LöeEndpoötTy≥
, 0, (
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
));

891 #ifde‡
VERBOSE


892 
	`¥ötf
("LO PATH: devi˚ = %d,ÅabÀ_ödex = %dÅime°am∞0x%x\n", 
devi˚_id
, 
èbÀ_ödex
, 
time°amp
);

895 
LöeEndpoötTy≥
.
Tøns„rTy≥
 = 
lo_å™s„r_ty≥_ö_u£
;

896 
LöeEndpoötTy≥
.
u
.
SDH
.
°m4
 = 0;

898 
max_°m1
 = 1;

899 
max_°m0
 = 1;

900 
max_tug2
 = 1;

901 
max_tu
 = 3;

903 
°m1
 = 0; stm1 < 
max_°m1
; ++stm1)

904 
°m0
 = 0; stm0 < 
max_°m0
; ++stm0)

905 
tug2
 = 0;Åug2 < 
max_tug2
; ++tug2)

906 
tu
 = 0;Åu < 
max_tu
; ++tu)

908 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
 = stm1;

909 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
 = stm0;

910 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
 =Åug2;

911 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
 =Åu;

913 
ªsu…
 = 
	`WPX_FRMR_STATUS_PM_SONET_SDH_LO_PATH_RódD©a
(
devi˚_id
, 
èbÀ_ödex
,

914 &
LöeEndpoötTy≥
, 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_V5_BIP
,

915 &
cou¡
);

917 i‡(
ªsu…
)

918 
	`¥ötf
(" ----> LO_Path_ReadData for V5_BIP failed on %d:%d:%d:%d on device %d with %s\n",

919 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
,

920 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
,

921 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
,

922 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
,

923 
devi˚_id
,

924 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

925 #ifde‡
VERBOSE


926 i‡(
cou¡
 > 0)

927 
	`¥ötf
(" ----> V5_BIP cou¡ o¿%d:%d:%d:%d i†%d\n", 
°m1
, 
°m0
, 
tug2
, 
tu
, 
cou¡
);

930 
ªsu…
 = 
	`WPX_FRMR_STATUS_PM_SONET_SDH_LO_PATH_RódD©a
(
devi˚_id
, 
èbÀ_ödex
,

931 &
LöeEndpoötTy≥
, 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_V5_REI
,

932 &
cou¡
);

934 i‡(
ªsu…
)

935 
	`¥ötf
(" ----> LO_Path_ReadData for V5_REI failed on %d:%d:%d:%d on device %d with %s\n",

936 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
,

937 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
,

938 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
,

939 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
,

940 
devi˚_id
,

941 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

942 #ifde‡
VERBOSE


943 i‡(
cou¡
 > 0)

944 
	`¥ötf
(" ----> V5_REI cou¡ o¿%d:%d:%d:%d i†%d\n", 
°m1
, 
°m0
, 
tug2
, 
tu
, 
cou¡
);

948 
	}
}

950 
	$£rvi˚_pm_pdh_d©a
(
WP_U8
 
devi˚_id
, WP_U8 
èbÀ_ödex
, 
WP_U32
 
time°amp
)

952 #i‡
WTI_COLLECT_TIMING_INFORMATION


953 
	`ªc‹d_a˘i⁄
(35, 
	`WP_TimeRód
());

955 #i‡
WTI_FLEXMUX_ENABLE_PERFORMANCE_MONITORING


956 #ifde‡
VERBOSE


957 
	`¥ötf
("PDH:ÅabÀ_ödex = %dÅime°am∞0x%x\n", 
èbÀ_ödex
, 
time°amp
);

960 
	}
}

962 #i‡
WTI_FLEXMUX_ENABLE_PERFORMANCE_MONITORING


964 
	$cb_pm_p‹t
(
WP_U8
 
devi˚_id
, WP_U8 
èbÀ_ödex
, 
WP_U32
 
time°amp
)

966 
‰amî_èsk
 
èsk
;

967 
APP_PM_TASK
 *
pm_èsk
 = &
èsk
.
u
.pm_task;

969 
èsk
.
èsk_ty≥
 = 
PM_PORT_TYPE
;

970 
pm_èsk
->
devi˚
 = 
devi˚_id
;

971 
pm_èsk
->
èbÀ_ödex
 =Åable_index;

972 
pm_èsk
->
time°amp
 =Åimestamp;

974 
	`add_‰amî_èsk
(
the_pm_èsk_li°
, &
èsk
);

975 #i‡
WTI_COLLECT_TIMING_INFORMATION


976 
	`ªc‹d_a˘i⁄
(36, 
	`WP_TimeRód
());

978 
	}
}

980 
	$cb_pm_ho_∑th
(
WP_U8
 
devi˚_id
, WP_U8 
èbÀ_ödex
, 
WP_U32
 
time°amp
)

982 
‰amî_èsk
 
èsk
;

983 
APP_PM_TASK
 *
pm_èsk
 = &
èsk
.
u
.pm_task;

985 
èsk
.
èsk_ty≥
 = 
PM_HO_PATH_TYPE
;

986 
pm_èsk
->
devi˚
 = 
devi˚_id
;

987 
pm_èsk
->
èbÀ_ödex
 =Åable_index;

988 
pm_èsk
->
time°amp
 =Åimestamp;

990 
	`add_‰amî_èsk
(
the_pm_èsk_li°
, &
èsk
);

991 #i‡
WTI_COLLECT_TIMING_INFORMATION


992 
	`ªc‹d_a˘i⁄
(37, 
	`WP_TimeRód
());

994 
	}
}

996 
	$cb_pm_lo_∑th
(
WP_U8
 
devi˚_id
, WP_U8 
èbÀ_ödex
, 
WP_U32
 
time°amp
)

998 
‰amî_èsk
 
èsk
;

999 
APP_PM_TASK
 *
pm_èsk
 = &
èsk
.
u
.pm_task;

1001 
èsk
.
èsk_ty≥
 = 
PM_LO_PATH_TYPE
;

1002 
pm_èsk
->
devi˚
 = 
devi˚_id
;

1003 
pm_èsk
->
èbÀ_ödex
 =Åable_index;

1004 
pm_èsk
->
time°amp
 =Åimestamp;

1006 
	`add_‰amî_èsk
(
the_pm_èsk_li°
, &
èsk
);

1007 #i‡
WTI_COLLECT_TIMING_INFORMATION


1008 
	`ªc‹d_a˘i⁄
(38, 
	`WP_TimeRód
());

1010 
	}
}

1012 
	$cb_pm_pdh
(
WP_U8
 
devi˚_id
, WP_U8 
èbÀ_ödex
, 
WP_U32
 
time°amp
)

1014 
‰amî_èsk
 
èsk
;

1015 
APP_PM_TASK
 *
pm_èsk
 = &
èsk
.
u
.pm_task;

1017 
èsk
.
èsk_ty≥
 = 
PM_PDH_TYPE
;

1018 
pm_èsk
->
devi˚
 = 
devi˚_id
;

1019 
pm_èsk
->
èbÀ_ödex
 =Åable_index;

1020 
pm_èsk
->
time°amp
 =Åimestamp;

1022 
	`add_‰amî_èsk
(
the_pm_èsk_li°
, &
èsk
);

1023 #i‡
WTI_COLLECT_TIMING_INFORMATION


1024 
	`ªc‹d_a˘i⁄
(39, 
	`WP_TimeRód
());

1026 
	}
}

1030 
	$¥o˚ss_‰amî_èsk_li°
()

1032 
‰amî_èsk
 
a_èsk
;

1033 
APP_PORT_ALARM_TASK
 *
p‹t_Æ¨m
;

1034 
APP_PATH_ALARM_TASK
 *
∑th_Æ¨m
;

1035 
APP_PDH_ALARM_TASK
 *
pdh_Æ¨m
;

1036 
APP_PM_TASK
 *
pm_èsk
;

1037 
APP_K1_K2_SIGNAL_TASK
 *
k1k2_sig«l
;

1038 
APP_S1_SIGNAL_TASK
 *
s1_sig«l
;

1042 #i‡
WTI_COLLECT_TRACE_INFORMATION


1043 
	`ªc‹d_a˘i⁄
(48, 
	`WP_TimeRód
());

1046 
	`WTI_Êexmux_èke_£rvî_lock
();

1048 #i‡
WTI_COLLECT_TIMING_INFORMATION


1049 
	`ªc‹d_a˘i⁄
(49, 
	`WP_TimeRód
());

1052 
WP_TRUE
)

1054 i‡(
	`√xt_‰amî_èsk
(
the_Æ¨m_èsk_li°
, &
a_èsk
Ë!
NULL
)

1056 
a_èsk
.
èsk_ty≥
)

1058 
PORT_ALARM_TYPE
:

1060 
p‹t_Æ¨m
 = &
a_èsk
.
u
.
p‹t_Æ¨m_èsk
;

1062 
	`£rvi˚_p‹t_Æ¨m
(
p‹t_Æ¨m
->
devi˚
,Ö‹t_Æ¨m->
löe_p‹t_id
,

1063 
p‹t_Æ¨m
->
Æ¨m_ˇãg‹y
,Ö‹t_Æ¨m->
is_as£πed
);

1067 
PATH_ALARM_TYPE
:

1069 
∑th_Æ¨m
 = &
a_èsk
.
u
.
∑th_Æ¨m_èsk
;

1071 
	`£rvi˚_∑th_Æ¨m
(
∑th_Æ¨m
->
devi˚
, &∑th_Æ¨m->
ídpoöt
,

1072 
∑th_Æ¨m
->
Æ¨m_ˇãg‹y
,Ö©h_Æ¨m->
is_as£πed
);

1076 
PDH_ALARM_TYPE
:

1078 
pdh_Æ¨m
 = &
a_èsk
.
u
.
pdh_Æ¨m_èsk
;

1080 
	`£rvi˚_pdh_Æ¨m
(
pdh_Æ¨m
->
devi˚
,Ödh_Æ¨m->
sockë_˛õ¡_pdh
,

1081 
pdh_Æ¨m
->
Æ¨m_ˇãg‹y
,Ödh_Æ¨m->
is_as£πed
);

1091 i‡(
	`√xt_‰amî_èsk
(
the_sig«l_èsk_li°
, &
a_èsk
Ë!
NULL
)

1093 
a_èsk
.
èsk_ty≥
)

1095 
K1K2_SIGNAL_TYPE
:

1097 
k1k2_sig«l
 = &
a_èsk
.
u
.
k1k2_sig«l_èsk
;

1099 
	`£rvi˚_k1_k2_sig«l
(
k1k2_sig«l
->
devi˚
, k1k2_sig«l->
löe_p‹t_id
,

1100 
k1k2_sig«l
->
k1_vÆue
, k1k2_sig«l->
k2_vÆue
);

1104 
S1_SIGNAL_TYPE
:

1106 
s1_sig«l
 = &
a_èsk
.
u
.
s1_sig«l_èsk
;

1108 
	`£rvi˚_s1_sig«l
(
s1_sig«l
->
devi˚
, s1_sig«l->
löe_p‹t_id
, s1_sig«l->
s1_vÆue
);

1118 i‡(
	`√xt_‰amî_èsk
(
the_pm_èsk_li°
, &
a_èsk
Ë!
NULL
)

1120 
a_èsk
.
èsk_ty≥
)

1122 
PM_PORT_TYPE
:

1124 
pm_èsk
 = &
a_èsk
.
u
.pm_task;

1126 
	`£rvi˚_pm_p‹t_d©a
(
pm_èsk
->
devi˚
,Öm_èsk->
èbÀ_ödex
,Öm_èsk->
time°amp
);

1130 
PM_HO_PATH_TYPE
:

1132 
pm_èsk
 = &
a_èsk
.
u
.pm_task;

1134 
	`£rvi˚_pm_ho_∑th_d©a
(
pm_èsk
->
devi˚
,Öm_èsk->
èbÀ_ödex
,Öm_èsk->
time°amp
);

1138 
PM_LO_PATH_TYPE
:

1140 
pm_èsk
 = &
a_èsk
.
u
.pm_task;

1142 
	`£rvi˚_pm_lo_∑th_d©a
(
pm_èsk
->
devi˚
,Öm_èsk->
èbÀ_ödex
,Öm_èsk->
time°amp
);

1146 
PM_PDH_TYPE
:

1148 
pm_èsk
 = &
a_èsk
.
u
.pm_task;

1150 
	`£rvi˚_pm_pdh_d©a
(
pm_èsk
->
devi˚
,Öm_èsk->
èbÀ_ödex
,Öm_èsk->
time°amp
);

1164 
	}
}

1166 
	$WTI_íabÀ_Æ¨ms
(
ty≥
)

1168 #i‡
WTI_FLEXMUX_ENABLE_ALARMS


1169 
WP_boﬁón
 
is_sdh
 = (
ty≥
 == 0);

1170 
j
;

1171 
WP_U8
 
°©us
;

1172 
°¨t_Æ¨m
, 
œ°_Æ¨m
;

1174 
	`WPX_FRMR_Regi°îS⁄ëSdhP©hAœrmCÆlback
((*)()&
cb_∑th_Æ¨m
);

1175 
	`WPX_FRMR_Regi°îS⁄ëSdhP‹tAœrmCÆlback
((*)()&
cb_p‹t_Æ¨m
);

1176 
	`WPX_FRMR_Regi°îSockëClõ¡PdhAœrmCÆlback
((*)()&
cb_pdh_Æ¨m
);

1177 
	`WPX_FRMR_Regi°îS⁄ëSdhSe˘i⁄K1K2A¬oun˚CÆlback
((*)()&
cb_k1k2_sig«l
);

1178 
	`WPX_FRMR_Regi°îAœrmM≠CÆlback
((*)()&
cb_Æ¨m_m≠_com∂ëe
);

1180 i‡(
is_sdh
)

1182 
°¨t_Æ¨m
 = 
WPX_UFE_FRAMER_SDH_LOS
;

1183 
œ°_Æ¨m
 = 
WPX_UFE_FRAMER_SDH_TU_LOP
;

1187 
°¨t_Æ¨m
 = 
WPX_UFE_FRAMER_SONET_LOS
;

1188 
œ°_Æ¨m
 = 
WPX_UFE_FRAMER_SONET_LOP_P
;

1191 
j
 = 
°¨t_Æ¨m
; j <
œ°_Æ¨m
; ++j)

1193 
°©us
 = 
	`WPX_FRMR_DEV_DRV_SONET_SDH_E«bÀAœrm
(
j
, j);

1194 i‡(
°©us
 !
WPX_UFE_FRAMER_OK
)

1196 
	`¥ötf
("********************************************************************\n"

1199 
__LINE__
, 
j
, 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
°©us
));

1200 
	`WTI_FÀxmuxCheckSètus
("WTI_íabÀ_Æ¨ms_™d_≥rf‹m™˚_m⁄ô‹ög", 
°©us
, 
__LINE__
);

1205 i‡(
is_sdh
)

1210 
j
 = 
WPX_UFE_FRAMER_SDH_LP_TIM
; j <
WPX_UFE_FRAMER_SDH_LP_PLM
; ++j)

1212 
°©us
 = 
	`WPX_FRMR_DEV_DRV_SONET_SDH_DißbÀAœrm
(
j
, j);

1213 i‡(
°©us
 !
WPX_UFE_FRAMER_OK
)

1215 
	`¥ötf
("********************************************************************\n"

1218 
__LINE__
, 
j
, 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
°©us
));

1219 
	`WTI_FÀxmuxCheckSètus
("WTI_íabÀ_Æ¨ms_™d_≥rf‹m™˚_m⁄ô‹ög", 
°©us
, 
__LINE__
);

1225 i‡(
is_sdh
)

1227 
°¨t_Æ¨m
 = 
WPX_UFE_FRAMER_SDH_RS_EXC
;

1228 
œ°_Æ¨m
 = 
WPX_UFE_FRAMER_SDH_RS_DEG
;

1232 
°¨t_Æ¨m
 = 
WPX_UFE_FRAMER_SONET_EXC_S
;

1233 
œ°_Æ¨m
 = 
WPX_UFE_FRAMER_SONET_DEG_S
;

1236 
j
 = 
°¨t_Æ¨m
; j <
œ°_Æ¨m
; ++j)

1238 
°©us
 = 
	`WPX_FRMR_DEV_DRV_SONET_SDH_E«bÀAœrm
(
j
, j);

1239 i‡(
°©us
 !
WPX_UFE_FRAMER_OK
)

1241 
	`¥ötf
("********************************************************************\n"

1244 
__LINE__
, 
j
, 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
°©us
));

1245 
	`WTI_FÀxmuxCheckSètus
("WTI_íabÀ_Æ¨ms_™d_≥rf‹m™˚_m⁄ô‹ög", 
°©us
, 
__LINE__
);

1249 
j
 = 
WPX_UFE_FRAMER_SOCKET_CLIENT_E_RFI
; j < 
WPX_UFE_FRAMER_SOCKET_CLIENT_MAX_ALARM_CATEGORIES
; ++j)

1251 
°©us
 = 
	`WPX_FRMR_DEV_DRV_SOCKET_E«bÀAœrm
(
j
, j);

1252 i‡(
°©us
 !
WPX_UFE_FRAMER_OK
)

1254 
	`¥ötf
("********************************************************************\n"

1256 "********************************************************************\n", 
j
);

1257 
	`WTI_FÀxmuxCheckSètus
("WTI_íabÀ_Æ¨ms_™d_≥rf‹m™˚_m⁄ô‹ög", 
°©us
, 
__LINE__
);

1259 #i‡
DEBUG


1261 
	`¥ötf
("%†íabÀd\n", 
sockë_˛õ¡_side_Æ¨m_«mes
[
j
]);

1265 
	`¥ötf
("***************** ALARMS ENABLED ************************************\n");

1268 
	}
}

1270 
	$WTI_íabÀ_≥rf‹m™˚_m⁄ô‹ög
(
ty≥
)

1272 #i‡
WTI_FLEXMUX_ENABLE_PERFORMANCE_MONITORING


1274 
	`WPX_FRMR_PM_Regi°îS⁄ëSdhP‹tA¬oun˚CÆlback
(&
cb_pm_p‹t
);

1275 
	`WPX_FRMR_PM_Regi°îS⁄ëSdhHOP©hA¬oun˚CÆlback
(&
cb_pm_ho_∑th
);

1276 
	`WPX_FRMR_PM_Regi°îS⁄ëSdhLOP©hA¬oun˚CÆlback
(&
cb_pm_lo_∑th
);

1277 
	`WPX_FRMR_PM_Regi°îSockëClõ¡PdhA¬oun˚CÆlback
(&
cb_pm_pdh
);

1280 
	}
}

1282 
	$WTI_íabÀ_≥rf‹m™˚_m⁄ô‹ög_poöts
(
ty≥
, 
is_e1
, 
vc_ty≥
, 
WUFE_un_‰amed
 
‰amög_mode
)

1284 #i‡
WTI_FLEXMUX_ENABLE_PERFORMANCE_MONITORING


1286 
WP_boﬁón
 
is_sdh
 = (
ty≥
 == 0);

1287 
WP_U32
 
å™ß˘i⁄_numbî
;

1288 
U8
 
ªsu…
;

1290 
WP_U32
 
numbî_lo_poöts
 = 0;

1291 
WP_U32
 
numbî_hi_poöts
 = 0;

1294 
WP_U32
 
°m1
, 
°m0
, 
tug2
, 
tu
;

1295 
WP_U32
 
max_°m1
, 
max_°m0
;

1298 
WP_U32
 
°s3
, 
°s1
, 
vt_group
, 
vt
;

1300 
WPX_UFE_FRAMER_COMMON_SDH_SONET_ENDPOINT_TYPE
 
LöeEndpoötTy≥
;

1302 
WP_U32
 
devi˚_id
;

1305 
WP_U32
 
löe_p‹t
 = 0;

1307 
devi˚_id
 = 0; devi˚_id < 
WPX_UFE_FRAMER_BUILD_OPTION_MAX_DEVICES
; ++device_id)

1309 
	`WPX_FRMR_PM_SONET_SDH_P‹t_E«bÀM⁄ô‹ög
(101, 
devi˚_id
, 
löe_p‹t
,

1310 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_B1
);

1311 
	`WPX_FRMR_PM_SONET_SDH_P‹t_E«bÀM⁄ô‹ög
(102, 
devi˚_id
, 
löe_p‹t
,

1312 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_B2
);

1313 
	`WPX_FRMR_PM_SONET_SDH_P‹t_E«bÀM⁄ô‹ög
(103, 
devi˚_id
, 
löe_p‹t
,

1314 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_M1
);

1316 i‡(
is_e1
)

1319 
LöeEndpoötTy≥
.
u
.
SDH
.
°m4
 = 0;

1320 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
 = 0;

1321 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
 = 0;

1323 
å™ß˘i⁄_numbî
 = 200;

1325 i‡(
is_sdh
)

1327 i‡(
vc_ty≥
 == 0)

1328 
LöeEndpoötTy≥
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC3
;

1330 
LöeEndpoötTy≥
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC4
;

1332 
ho_å™s„r_ty≥_ö_u£
 = 
LöeEndpoötTy≥
.
Tøns„rTy≥
;

1334 i‡(
LöeEndpoötTy≥
.
Tøns„rTy≥
 =
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC3
)

1335 
max_°m0
 = 3;

1337 
max_°m0
 = 1;

1339 
max_°m1
 = 4;

1341 
°m1
 = 0; stm1 < 
max_°m1
; ++stm1)

1342 
°m0
 = 0; stm0 < 
max_°m0
; ++stm0)

1344 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
 = stm1;

1345 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
 = stm0;

1347 
ªsu…
 = 
	`WPX_FRMR_PM_SONET_SDH_HO_P©h_E«bÀM⁄ô‹ög
(

1348 
å™ß˘i⁄_numbî
++, 
devi˚_id
, &
LöeEndpoötTy≥
,

1349 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_B3
);

1350 i‡(
ªsu…
)

1351 
	`¥ötf
("B3 failure on %d:%d:%d:%d on device %d --> %s\n",

1352 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
,

1353 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
,

1354 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
,

1355 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
,

1356 
devi˚_id
,

1357 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

1358 #i‡
DEBUG


1360 
	`¥ötf
("B3É«bÀd o¿%d:%d:%d:%d --> %d\n", 
°m1
, 
°m0
, 0, 0, 
ªsu…
);

1363 
ªsu…
 = 
	`WPX_FRMR_PM_SONET_SDH_HO_P©h_E«bÀM⁄ô‹ög
(

1364 
å™ß˘i⁄_numbî
++, 
devi˚_id
, &
LöeEndpoötTy≥
,

1365 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_G1
);

1366 i‡(
ªsu…
)

1367 
	`¥ötf
("G1 failure on %d:%d:%d:%d on device %d --> %s\n",

1368 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
,

1369 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
,

1370 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
,

1371 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
,

1372 
devi˚_id
,

1373 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

1374 #i‡
DEBUG


1376 
	`¥ötf
("G1É«bÀd o¿%d:%d:%d:%d --> %d\n", 
°m1
, 
°m0
, 0, 0, 
ªsu…
);

1380 
LöeEndpoötTy≥
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC12
;

1382 
°m1
 = 0; stm1 < 1; ++stm1)

1383 
°m0
 = 0; stm0 < 1; ++stm0)

1384 
tug2
 = 0;Åug2 < 1; ++tug2)

1385 
tu
 = 0;Åu < 3; ++tu)

1387 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
 = stm1;

1388 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
 = stm0;

1389 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
 =Åug2;

1390 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
 =Åu;

1392 
ªsu…
 = 
	`WPX_FRMR_PM_SONET_SDH_LO_P©h_E«bÀM⁄ô‹ög
(

1393 
å™ß˘i⁄_numbî
++, 
devi˚_id
, &
LöeEndpoötTy≥
,

1394 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_V5_BIP
);

1395 i‡(
ªsu…
)

1396 
	`¥ötf
("V5 BIP failure on %d:%d:%d:%d on device %d --> %s\n",

1397 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
,

1398 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
,

1399 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
,

1400 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
,

1401 
devi˚_id
,

1402 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

1404 ++
numbî_lo_poöts
;

1406 
ªsu…
 = 
	`WPX_FRMR_PM_SONET_SDH_LO_P©h_E«bÀM⁄ô‹ög
(

1407 
å™ß˘i⁄_numbî
++, 
devi˚_id
, &
LöeEndpoötTy≥
,

1408 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_V5_REI
);

1409 i‡(
ªsu…
)

1410 
	`¥ötf
("V5 REI failure on %d:%d:%d:%d on device %d --> %s\n",

1411 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
,

1412 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
,

1413 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
,

1414 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
,

1415 
devi˚_id
,

1416 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

1418 ++
numbî_lo_poöts
;

1420 
ªsu…
 = 
	`WPX_FRMR_SONET_SDH_LO_PATH_V5_BIP2_SëEx˚ssiveTh
(800,

1421 
devi˚_id
, &
LöeEndpoötTy≥
, 
WPX_UFE_FRAMER_THRESHOLD_10E4
);

1422 i‡(
ªsu…
)

1423 
	`¥ötf
("V5 BIPS2 SetExcTh failure on %d:%d:%d:%d on device %d --> %s\n",

1424 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
,

1425 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
,

1426 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
,

1427 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
,

1428 
devi˚_id
,

1429 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

1431 
ªsu…
 = 
	`WPX_FRMR_SONET_SDH_LO_PATH_V5_BIP2_SëSigDegødeTh
(801,

1432 
devi˚_id
, &
LöeEndpoötTy≥
, 
WPX_UFE_FRAMER_THRESHOLD_10E6
);

1433 i‡(
ªsu…
)

1434 
	`¥ötf
("V5 BIPS2 SetSigDeg failure on %d:%d:%d:%d on device %d --> %s\n",

1435 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
,

1436 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
,

1437 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
,

1438 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
,

1439 
devi˚_id
,

1440 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

1442 #ifde‡
VERBOSE


1443 
	`¥ötf
("******************Çumbî_lo_poöt†%d\n", 
numbî_lo_poöts
);

1448 
LöeEndpoötTy≥
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SONET_TYPE_VT2
;

1450 
°s3
 = 0; sts3 < 4; ++sts3)

1451 
°s1
 = 0; sts1 < 3; ++sts1)

1452 
vt_group
 = 0; vt_group < 1; ++vt_group)

1453 
vt
 = 0; vt < 1; ++vt)

1455 
LöeEndpoötTy≥
.
u
.
SONET
.
°s3
 = sts3;

1456 
LöeEndpoötTy≥
.
u
.
SONET
.
°s1
 = sts1;

1457 
LöeEndpoötTy≥
.
u
.
SONET
.
vt_group
 = vt_group;

1458 
LöeEndpoötTy≥
.
u
.
SONET
.
vt
 = vt;

1460 
ªsu…
 = 
	`WPX_FRMR_PM_SONET_SDH_HO_P©h_E«bÀM⁄ô‹ög
(

1461 
å™ß˘i⁄_numbî
++, 
devi˚_id
, &
LöeEndpoötTy≥
,

1462 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_B3
);

1463 i‡(
ªsu…
)

1464 
	`¥ötf
("B3 faûuª o¿%d:%d:%d:%d --> %d\n", 
°s3
, 
°s1
, 
vt_group
, 
vt
, 
ªsu…
);

1466 
	`¥ötf
("B3É«bÀd o¿%d:%d:%d:%d --> %d\n", 
°s3
, 
°s1
, 
vt_group
, 
vt
, 
ªsu…
);

1468 
ªsu…
 = 
	`WPX_FRMR_PM_SONET_SDH_HO_P©h_E«bÀM⁄ô‹ög
(

1469 
å™ß˘i⁄_numbî
++, 
devi˚_id
, &
LöeEndpoötTy≥
,

1470 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_G1
);

1471 i‡(
ªsu…
)

1472 
	`¥ötf
("G1 faûuª o¿%d:%d:%d:%d --> %d\n", 
°s3
, 
°s1
, 
vt_group
, 
vt
, 
ªsu…
);

1478 i‡(
‰amög_mode
 =
WUFE_FRAMED
)

1480 
j
, 
k
;

1481 
WP_U8
 
ªsu…
;

1483 
j
 = 
k
 = 0; k < 70 ; ++j)

1485 i‡((
j
 % 4) < 3)

1487 i‡((
ªsu…
 = 
	`WPX_FRMR_PM_E1_E«bÀM⁄ô‹ögCrc
(

1488 
å™ß˘i⁄_numbî
++, 
devi˚_id
, 
j
)Ë!
WPX_UFE_FRAMER_OK
)

1490 
	`¥ötf
("E1 CRC M⁄ô‹ög faûed o¿%d wôh %s\n", 
j
, 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

1494 ++
k
;

1502 
LöeEndpoötTy≥
.
u
.
SDH
.
°m4
 = 0;

1503 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
 = 0;

1504 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
 = 0;

1506 
å™ß˘i⁄_numbî
 = 200;

1508 i‡(
is_sdh
)

1510 i‡(
vc_ty≥
 == 0)

1511 
LöeEndpoötTy≥
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC3
;

1513 
LöeEndpoötTy≥
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC4
;

1515 
ho_å™s„r_ty≥_ö_u£
 = 
LöeEndpoötTy≥
.
Tøns„rTy≥
;

1517 i‡(
LöeEndpoötTy≥
.
Tøns„rTy≥
 =
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC3
)

1518 
max_°m0
 = 3;

1520 
max_°m0
 = 1;

1522 
max_°m1
 = 4;

1524 
°m1
 = 0; stm1 < 
max_°m1
; ++stm1)

1525 
°m0
 = 0; stm0 < 
max_°m0
; ++stm0)

1527 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
 = stm1;

1528 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
 = stm0;

1530 
ªsu…
 = 
	`WPX_FRMR_PM_SONET_SDH_HO_P©h_E«bÀM⁄ô‹ög
(

1531 
å™ß˘i⁄_numbî
++, 
devi˚_id
, &
LöeEndpoötTy≥
,

1532 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_B3
);

1533 i‡(
ªsu…
)

1534 
	`¥ötf
("B3 failure on %d:%d:%d:%d on device %d --> %s\n",

1535 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
,

1536 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
,

1537 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
,

1538 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
,

1539 
devi˚_id
,

1540 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

1542 ++
numbî_hi_poöts
;

1544 
ªsu…
 = 
	`WPX_FRMR_PM_SONET_SDH_HO_P©h_E«bÀM⁄ô‹ög
(

1545 
å™ß˘i⁄_numbî
++, 
devi˚_id
, &
LöeEndpoötTy≥
,

1546 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_G1
);

1547 i‡(
ªsu…
)

1548 
	`¥ötf
("G1 failure on %d:%d:%d:%d on device %d --> %d\n",

1549 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
,

1550 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
,

1551 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
,

1552 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
,

1553 
devi˚_id
,

1554 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

1556 ++
numbî_hi_poöts
;

1559 #ifde‡
VERBOSE


1560 
	`¥ötf
("******************Çumbî_hi_poöt†%d\n", 
numbî_hi_poöts
);

1563 
LöeEndpoötTy≥
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SDH_TYPE_VC11
;

1565 
°m1
 = 0; stm1 < 1; ++stm1)

1566 
°m0
 = 0; stm0 < 1; ++stm0)

1567 
tug2
 = 0;Åug2 < 1; ++tug2)

1568 
tu
 = 0;Åu < 3; ++tu)

1570 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
 = stm1;

1571 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
 = stm0;

1572 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
 =Åug2;

1573 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
 =Åu;

1575 
ªsu…
 = 
	`WPX_FRMR_PM_SONET_SDH_LO_P©h_E«bÀM⁄ô‹ög
(

1576 
å™ß˘i⁄_numbî
++, 
devi˚_id
, &
LöeEndpoötTy≥
,

1577 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_V5_BIP
);

1578 i‡(
ªsu…
)

1579 
	`¥ötf
("V5_BIP failure on %d:%d:%d:%d on device %d --> %d\n",

1580 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
,

1581 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
,

1582 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
,

1583 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
,

1584 
devi˚_id
,

1585 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

1587 ++
numbî_lo_poöts
;

1589 
ªsu…
 = 
	`WPX_FRMR_PM_SONET_SDH_LO_P©h_E«bÀM⁄ô‹ög
(

1590 
å™ß˘i⁄_numbî
++, 
devi˚_id
, &
LöeEndpoötTy≥
,

1591 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_V5_REI
);

1592 i‡(
ªsu…
)

1593 
	`¥ötf
("V5_REI failure on %d:%d:%d:%d on device %d --> %d\n",

1594 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
,

1595 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
,

1596 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
,

1597 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
,

1598 
devi˚_id
,

1599 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

1601 ++
numbî_lo_poöts
;

1603 
ªsu…
 = 
	`WPX_FRMR_SONET_SDH_LO_PATH_V5_BIP2_SëEx˚ssiveTh
(800,

1604 
devi˚_id
, &
LöeEndpoötTy≥
, 
WPX_UFE_FRAMER_THRESHOLD_10E4
);

1605 i‡(
ªsu…
)

1606 
	`¥ötf
("V5_BIPS2_SetExcTh failure on %d:%d:%d:%d on device %d --> %d\n",

1607 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
,

1608 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
,

1609 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
,

1610 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
,

1611 
devi˚_id
,

1612 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

1614 ++
numbî_lo_poöts
;

1616 
ªsu…
 = 
	`WPX_FRMR_SONET_SDH_LO_PATH_V5_BIP2_SëSigDegødeTh
(801,

1617 
devi˚_id
, &
LöeEndpoötTy≥
, 
WPX_UFE_FRAMER_THRESHOLD_10E6
);

1618 i‡(
ªsu…
)

1619 
	`¥ötf
("V5_BIPS2_SetSigDeg failure on %d:%d:%d:%d on device %d --> %d\n",

1620 
LöeEndpoötTy≥
.
u
.
SDH
.
°m1
,

1621 
LöeEndpoötTy≥
.
u
.
SDH
.
°m0
,

1622 
LöeEndpoötTy≥
.
u
.
SDH
.
tug2
,

1623 
LöeEndpoötTy≥
.
u
.
SDH
.
tu
,

1624 
devi˚_id
,

1625 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

1627 ++
numbî_lo_poöts
;

1630 #ifde‡
VERBOSE


1631 
	`¥ötf
("******************Çumbî_lo_poöt†%d\n", 
numbî_lo_poöts
);

1636 
LöeEndpoötTy≥
.
Tøns„rTy≥
 = 
WPX_UFE_FRAMER_WUFE_SONET_TYPE_T1
;

1638 
°s3
 = 0; sts3 < 4; ++sts3)

1639 
°s1
 = 0; sts1 < 3; ++sts1)

1640 
vt_group
 = 0; vt_group < 1; ++vt_group)

1641 
vt
 = 0; vt < 1; ++vt)

1643 
LöeEndpoötTy≥
.
u
.
SONET
.
°s3
 = sts3;

1644 
LöeEndpoötTy≥
.
u
.
SONET
.
°s1
 = sts1;

1645 
LöeEndpoötTy≥
.
u
.
SONET
.
vt_group
 = vt_group;

1646 
LöeEndpoötTy≥
.
u
.
SONET
.
vt
 = vt;

1648 
ªsu…
 = 
	`WPX_FRMR_PM_SONET_SDH_HO_P©h_E«bÀM⁄ô‹ög
(

1649 
å™ß˘i⁄_numbî
++, 
devi˚_id
, &
LöeEndpoötTy≥
,

1650 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_B3
);

1651 i‡(
ªsu…
)

1652 
	`¥ötf
("B3 faûuª o¿%d:%d:%d:%d --> %d\n", 
°s3
, 
°s1
, 
vt_group
, 
vt
, 
ªsu…
);

1654 
ªsu…
 = 
	`WPX_FRMR_PM_SONET_SDH_HO_P©h_E«bÀM⁄ô‹ög
(

1655 
å™ß˘i⁄_numbî
++, 
devi˚_id
, &
LöeEndpoötTy≥
,

1656 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_G1
);

1657 i‡(
ªsu…
)

1658 
	`¥ötf
("G1 faûuª o¿%d:%d:%d:%d --> %d\n", 
°s3
, 
°s1
, 
vt_group
, 
vt
, 
ªsu…
);

1660 
ªsu…
 = 
	`WPX_FRMR_PM_SONET_SDH_LO_P©h_E«bÀM⁄ô‹ög
(

1661 
å™ß˘i⁄_numbî
++, 
devi˚_id
, &
LöeEndpoötTy≥
,

1662 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_V5_BIP
);

1663 i‡(
ªsu…
)

1664 
	`¥ötf
("V5_BIP faûuª o¿%d:%d:%d:%d --> %d\n", 
°s3
, 
°s1
, 
vt_group
, 
vt
, 
ªsu…
);

1666 
ªsu…
 = 
	`WPX_FRMR_PM_SONET_SDH_LO_P©h_E«bÀM⁄ô‹ög
(

1667 
å™ß˘i⁄_numbî
++, 
devi˚_id
, &
LöeEndpoötTy≥
,

1668 
WPX_UFE_FRAMER_SONET_SDH_PERFORMANCE_MONITORING_DATA_POINT_V5_REI
);

1669 i‡(
ªsu…
)

1670 
	`¥ötf
("V5_REI faûuª o¿%d:%d:%d:%d --> %d\n", 
°s3
, 
°s1
, 
vt_group
, 
vt
, 
ªsu…
);

1674 i‡(
‰amög_mode
 =
WUFE_FRAMED
)

1676 
j
, 
k
;

1677 
WP_U8
 
ªsu…
;

1679 
j
 = 
k
 = 0; k < 70 ; j += 2)

1681 i‡((
ªsu…
 = 
	`WPX_FRMR_PM_T1_E«bÀM⁄ô‹ögCrc
(

1682 
å™ß˘i⁄_numbî
++, 
devi˚_id
, 
j
)Ë!
WPX_UFE_FRAMER_OK
)

1684 
	`¥ötf
("T1 CRC M⁄ô‹ög faûed o¿%d wôh %s\n", 
j
, 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
ªsu…
));

1688 ++
k
;

1694 
	`¥ötf
("***************** PM ENABLED ************************************\n");

1696 
	}
}

1698 
	$AIS_ö£πi⁄_íabÀ
(*
°rP¨m
)

1700 
WP_U32
 
devi˚_id
, 
dummy
, 
ªs
;

1701 
WP_U8
 
°©us
;

1703 
ªs
 = 
	`ssˇnf
(
°rP¨m
, "%d %d", (*)&
dummy
, (*)&
devi˚_id
);

1705 i‡(
ªs
 != 2)

1707 
	`¥ötf
("INVALID NUMBER OF PARAMETERS\n");

1711 
°©us
 = 
	`WPX_FRMR_DEV_E«bÀ_AIS_In£πi⁄
(400, 
devi˚_id
);

1712 i‡(
°©us
 !
WPX_UFE_FRAMER_OK
)

1714 
	`¥ötf
("********************************************************************\n"

1717 
__LINE__
, 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
°©us
));

1718 
	`WTI_FÀxmuxCheckSètus
("AIS_ö£πi⁄_íabÀ", 
°©us
, 
__LINE__
);

1720 
	}
}

1722 
	$AIS_ö£πi⁄_dißbÀ
(*
°rP¨m
)

1724 
WP_U32
 
devi˚_id
, 
dummy
, 
ªs
;

1725 
WP_U8
 
°©us
;

1727 
ªs
 = 
	`ssˇnf
(
°rP¨m
, "%d %d", (*)&
dummy
, (*)&
devi˚_id
);

1728 i‡(
ªs
 != 2)

1730 
	`¥ötf
("INVALID NUMBER OF PARAMETERS\n");

1734 
°©us
 = 
	`WPX_FRMR_DEV_DißbÀ_AIS_In£πi⁄
(400, 
devi˚_id
);

1735 i‡(
°©us
 !
WPX_UFE_FRAMER_OK
)

1737 
	`¥ötf
("********************************************************************\n"

1740 
__LINE__
, 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
°©us
));

1741 
	`WTI_FÀxmuxCheckSètus
("AIS_ö£πi⁄_dißbÀ", 
°©us
, 
__LINE__
);

1743 
	}
}

1745 
	$CLI_F_PdhAisTow¨dsLöe
(*
°rP¨m
)

1747 
WP_U32
 
devi˚_id
, 
sockë_pdh_id
, 
dummy
, 
ªs
, 
íabÀ
;

1748 
WP_U8
 
°©us
;

1750 
ªs
 = 
	`ssˇnf
(
°rP¨m
, "%d %d %d %d", (*)&
dummy
, (*)&
devi˚_id
, (*)&
sockë_pdh_id
, (*)&
íabÀ
);

1751 i‡(
ªs
 != 4)

1753 
	`¥ötf
("INVALID NUMBER OF PARAMETERS\n");

1757 i‡(
íabÀ
 == 1)

1759 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_AIS_E«bÀTow¨dsLöe
(800, 
devi˚_id
, 
sockë_pdh_id
);

1760 i‡(
°©us
 !
WPX_UFE_FRAMER_OK
)

1762 
	`¥ötf
("********************************************************************\n"

1765 
__LINE__
, 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
°©us
));

1766 
	`WTI_FÀxmuxCheckSètus
("CLI_F_PdhAisTow¨dsLöe", 
°©us
, 
__LINE__
);

1771 
°©us
 = 
	`WPX_FRMR_SOCKET_PDH_AIS_DißbÀTow¨dsLöe
(801, 
devi˚_id
, 
sockë_pdh_id
);

1772 i‡(
°©us
 !
WPX_UFE_FRAMER_OK
)

1774 
	`¥ötf
("********************************************************************\n"

1777 
__LINE__
, 
	`OMIINO_FRAMER_Eº‹CodeToTxt
(
°©us
));

1778 
	`WTI_FÀxmuxCheckSètus
("CLI_F_PdhAisTow¨dsLöe", 
°©us
, 
__LINE__
);

1781 
	}
}

	@ufe_utility.h

15 #i‚de‡
WTI_UFE_UTILITY_H


16 
	#WTI_UFE_UTILITY_H


	)

18 
	~<°dio.h
>

19 
	~<wu„i_u£r_c⁄fig.h
>

20 
	~<wu„_ty≥s.h
>

21 
	~<wu„_sy°em.h
>

22 
	~<wu„_evíts.h
>

23 
	~<wu„_u„.h
>

25 
	#PHY_TYPE_E1
 1

	)

26 
	#PHY_TYPE_T1
 0

	)

31 
	mWT_OCTAL
 =0,

32 
	mWT_SBI
,

33 
	mWT_HMVIP
,

34 
	mWT_SONET
,

35 
	mWT_SDH
,

36 } 
	tWT_Âga_mode
;

41 
	mWT_CRC_16
 = 1,

42 
	mWT_CRC_32
 = 2,

43 } 
	tWT_¸c_ty≥
;

47 
	mWT_OP_MODE_NORMAL
 = 0,

48 
	mWT_OP_MODE_LOOPBACK_LINE
 = 1,

49 
	mWT_OP_MODE_LOOPBACK_SYSTEM
 = 2,

50 }
	tWT_›î©i⁄_mode
;

54 
WP_U8
 
	m°m4
;

55 
WP_U8
 
	m°m1
;

56 
WP_U8
 
	m°m0
;

57 
WP_U8
 
	mtug2
;

58 
WP_U8
 
	mtu
;

59 
WUFE_löe_å™sf_ty≥
 
	må™s„r_ty≥
;

60 
WUFE_un_‰amed
 
	m‰amed
;

61 
WUFE_ˇs_íabÀ
 
	mˇs_íabÀ
;

62 
WUFE_löe_lo›back_ty≥
 
	mlo›back
;

63 
WUFE_löe_˛ock_ªc_∑øms
 *
	m˛ock_ªc_löe_∑øms
;

64 } 
	tWT_u„_löe_sdh_∑øms
;

68 
WP_U8
 
	m°s12
;

69 
WP_U8
 
	m°s3
;

70 
WP_U8
 
	m°s1
;

71 
WP_U8
 
	mvt_group
;

72 
WP_U8
 
	mvt
;

73 
WUFE_löe_å™sf_ty≥
 
	må™s„r_ty≥
;

74 
WUFE_un_‰amed
 
	m‰amed
;

75 
WUFE_ˇs_íabÀ
 
	mˇs_íabÀ
;

76 
WUFE_löe_lo›back_ty≥
 
	mlo›back
;

77 
WUFE_löe_˛ock_ªc_∑øms
 *
	m˛ock_ªc_löe_∑øms
;

78 } 
	tWT_u„_löe_s⁄ë_∑øms
;

82 
WT_u„_löe_s⁄ë_∑øms
 
	mlöe_s⁄ë_∑øms
;

83 
WT_u„_löe_sdh_∑øms
 
	mlöe_sdh_∑øms
;

84 }
	tWT_u„_‰amî_löe_∑øms
;

88 
WP_U8
 
	mvÆid
;

89 
WUFE_löe_å™sf_ty≥
 
	må™s„r_ty≥
;

90 
WUFE_un_‰amed
 
	m‰amed
;

91 
WUFE_ˇs_íabÀ
 
	mˇs_íabÀ
;

92 
WUFE_˛ock_ªc_mode
 
	m˛ock_ªc_mode
;

93 
WUFE_˛ock_ma°î
 
	mtx_˛k_ma°î
;

94 
WP_U16
 
	m˛ock_å™¶©‹_id
;

95 
WP_U16
 
	mrx_˛k_ªc_if
;

96 
WUFE_ˇd_¸_exãnded
 
	mext_mode_a˘ive
;

97 
WT_u„_‰amî_löe_∑øms
 
	m‰amî_löe_∑øms
;

98 } 
	tWT_u„_löe_∑øms
;

102 
	mWT_EXT_CLOCK
 = 0,

103 
	mWT_RX_LOOPTIME_CLOCK
 = 1,

104 }
	tWT_tx_˛k
;

109 
WP_U32
 
	mwpid
;

110 
WP_U32
 
	mu„_id
;

111 
WP_U32
 
	mupi_id
;

112 
WT_Âga_mode
 
	mÂga_mode
;

113 
WP_U16
 
	mmax_löes
;

114 
WP_U16
 
	mmax_phys
;

115 
WUFE_löe_å™sf_ty≥
 
	msbi_•e_löe_ty≥
[
N_MAX_UFE_SPE_INDEX
];

116 
WT_¸c_ty≥
 
	mhdlc_¸c
;

117 
WT_tx_˛k
 
	mtx_˛ock_mode
;

118 
WT_›î©i⁄_mode
 
	m›î©i⁄_mode
;

119 
WUFE_sy°em_˛ock_ªc
 
	msy°em_˛ock_ªc_íabÀ
;

120 
WUFE_˛k_ªc_sy°em_∑øms
 *
	m˛k_ªc_sy°em_∑øms
;

121 
WT_u„_löe_∑øms
 
	mlöe_∑øms
[
MAX_UFE_LINES_USED
];

122 
WUFE_h™dÀ
 
	mlöe_h™dÀ
[
MAX_UFE_LINES_USED
];

123 
WUFE_h™dÀ
 
	mphy_h™dÀ
[
N_MAX_EMPHY_PHYS
];

124 
WP_U8
 
	mãmux_u£d
;

125 
WUFE_evíts
 
	mu„_evíts
;

126 } 
	tWT_u„
;

128 
WT_u„
 
	gu„
={0};

132 
WP_U32
 
	mu„id
;

133 
WP_U32
 
	mmax_löes
;

134 
WP_U32
 
	mmax_phys
;

135 
WP_U32
 
	mo˘ës_≥r_löe
;

136 
WUFE_h™dÀ
 
	mlöe_h™dÀ
[
WT_MAX_LINE_INDEX
] ;

137 
WUFE_h™dÀ
 
	mphy_h™dÀ
[
WT_MAX_LINE_INDEX
] ;

138 } 
	tu„4_sy°em_d©a
;

143 
u„4_sy°em_d©a
 
	gu„4_≠p_sy°em
 = {

145  
MAX_UFE_LINES
,

146  
MAX_UFE_LINES
,

147  
OCTETS_PER_LINE
,

156 
WUFE_phy
 
	gu„4_phy_cfg
 = {

157  
WUFE_STRUCT_PHY_ATM
,

171  
WUFE_PHY_FIFO_MODE_SLOW
,

173  
WUFE_PHY_TX_WAIT_TYPE_D


183  
WUFE_PHY_ATM_RX_DESCRAMBLER_DISABLE
,

184  
WUFE_PHY_ATM_RX_NO_COSET
,

185  
WUFE_PHY_ATM_RX_IDLE_CELL_DISCARD
,

186  
WUFE_PHY_ATM_RX_UNASSIGNED_CELL_DISCARD
,

187  
WUFE_PHY_ATM_RX_HEC_ERR_TRANSFER
,

188  
WUFE_PHY_ATM_RX_HEC_CORECTION_DISABLE
,

189  
WUFE_PHY_ATM_RX_CELL_DELINEATION_BYTE_RESOLUTION
,

192  
WUFE_PHY_ATM_TX_SCRAMBLER_DISABLE
,

193  
WUFE_PHY_ATM_TX_NO_COSET
,

194  
WUFE_PHY_ATM_TX_UNASSIGNED_CELL_MODE
,

195  
WUFE_PHY_ATM_TX_UNDERRUN_INT_DISABLE


201 
WUFE_löe_sdh
 
	glöe_cfg
[1] =

204  
WUFE_STRUCT_LINE_SDH
,

210  
WUFE_SDH_TYPE_E1
,

211  
WUFE_FRAMED
,

212  
WUFE_CAS_DISABLE
,

222 
WUFE_sy°em
 
	gu„4_sy°em_cfg
 = {

223  
WTI_MAX_LINES
,

224  
WTI_MAX_LINES
,

229  
WUFE_RX_PARITY_EVEN
,

230  
WUFE_TX_PARITY_EVEN
,

231  
WUFE_TX_PARITY_IGNORE


234  
MAX_UFE_LINES
 * 4,

235  
MAX_UFE_LINES
 * 5

241  
WUFE_INTERFACE_SDH
,

243  
WUFE_CLOCK_REC_DISABLE


256 
WT_U„LöeSdhCª©e
(
WT_u„
 *
u„
,

257 
WP_U32
 
löe_ödex
,

258 
WT_u„_löe_sdh_∑øms
 *
löe_sdh_∑øms
,

259 
WP_U8
 
íabÀ
);

261 
WT_U„LöeCª©e
(
WT_u„
 *
u„
, 
WP_U32
 
ödex
, *
c⁄fig
, 
WP_U8
 
íabÀ
);

263 
WT_U„LöeC⁄figuªAndCª©eT1SDH
(
WP_U32
 
i
, 
WP_U16
 
å™s„r_ty≥
, WP_U16 
‰amög_mode
, 
WP_U8
 
ˇs_íabÀ
, WP_U8 
íabÀ
, 
WUFE_löe_˛ock_ªc_∑øms
 *
löe_¸_∑øms
);

265 
WT_U„LöeSockëLpbkSëup
(
WT_u„
 *
u„
, 
löe_ödex
, 
WUFE_löe_lo›back_ty≥
 
Õbk_ty≥
);

267 
WT_U„PhyTønsCª©e
(
WT_u„
 *
u„
,

268 
WP_U32
 
löe_ödex
,

269 
WP_U32
 
phy_ödex
,

270 
WP_U32
 
n_¶Ÿs
,

271 
WP_U8
 *
¶Ÿs_¨r
,

272 
WP_U32
 
u„_d©aunô_size
);

274 
WT_U„PhyE«bÀ
(
WT_u„
 *
u„
, 
WP_U32
 
phy_ödex
);

276 
WT_U„PhyDñëe
(
WT_u„
 *
u„
, 
WP_U32
 
phy_ödex
);

278 
WT_U„LöeDñëe
(
WT_u„
 *
u„
, 
WP_U32
 
ödex
);

280 
WT_U„Rñó£
(
WT_u„
 *
u„
);

282 
WT_U„Sy°emCª©e
(
WT_u„
 *
u„
);

284 
WT_U„InôülizeFúmw¨e
(
WP_U32
 
u„_id
);

286 
WT_U„Sy°emE«bÀ
(
WT_u„
 *
u„
);

288 
WT_U„PhyDißbÀ
(
WT_u„
 *
u„
, 
WP_U32
 
phy_ödex
);

	@wt_partition_ecc_util.c

15 
	~"ö˛ude/c‹e/ªgi°ry/wpi_ªgi°ry.h
"

16 
	~"h¨dw¨e/hÆ_if/wpi_hÆ_devi˚_execut‹.h
"

18 #ifde‡
WP_HW_WINPATH3


19 
	~"ö˛ude/c‹e/h¨dw¨e/wpi_hw_p˚.h
"

23 #i‡
WP_HW_WINPATH3


24 
	#WPI_CFU_RX
(
ba£
Ë(
wpi_hw_cfu_rx
*)((ba£Ë+ 
WPI_CFU_RX_BASE
)

	)

26 
	#WT_CFU_RX_BUFFERS_NUM_IN_CFU_BLOCK
 4096

	)

32 
WPI_PTR
 
	mfifo_°¨t
[48];

33 
WP_U32
 
	m∑d_0
[16];

34 
WPI_PTR
 
	mfifo_íd
[48];

35 
WP_U32
 
	m∑d_1
[16];

36 
WPI_PTR
 
	mfifo_cou¡î
[48];

37 
WP_U32
 
	m∑d_2
[16];

38 
WPI_PTR
 
	mfifo_max
[48];

39 
WP_U32
 
	m∑d_3
[16];

40 
WPI_PTR
 
	miq_°¨t
[4];

41 
WPI_PTR
 
	miq_ãmp
[4];

42 
WPI_PTR
 
	miq_íd
[4];

43 
WP_U32
 
	mœr
;

44 
WP_U32
 
	muèr
;

45 
WP_U32
 
	mgmr
;

46 
WP_U32
 
	mios
;

47 
WP_U32
 
	m„r
[2];

48 
WP_U32
 
	mf‰
[2];

49 
WP_U32
 
	mh¸_ªg
;

50 
WPI_PTR
 
	mh¸_addr
;

51 
WP_U32
 
	mh¸_cmd
;

52 
WP_U32
 
	mrwm
;

53 
WP_U32
 
	m∑d_4
[16];

54 
WP_U32
 
	mdbf_8_15_ba£
[8];

55 
WP_U32
 
	m∑d_5
[8];

56 
WP_U32
 
	mdbf_8_15_off£t
[8];

57 
WP_U32
 
	m´_low
;

58 
WP_U32
 
	m´_hi
;

59 } 
	twt_wmm
;

62 
	#WT_HW_WINPATH_DEVICE_ID_S
 19

	)

63 
	#WT_HW_WINPATH_DEVICE_ID_W
 8

	)

65 
	#WT_HW_WINPATH_REV_ID_S
 27

	)

66 
	#WT_HW_WINPATH_REV_ID_W
 4

	)

68 
	#WT_HW_WINPATH_SUB_REV_ID_LSB_S
 31

	)

69 
	#WT_HW_WINPATH_SUB_REV_ID_LSB_W
 1

	)

71 
	#WT_HW_WINPATH_SUB_REV_ID_MSB_S
 0

	)

72 
	#WT_HW_WINPATH_SUB_REV_ID_MSB_W
 3

	)

76 
WP_U32
 
	mªg0
;

77 
WP_U32
 
	mªg1
;

78 } 
	twt_fu£_ªg
;

81 
	#WT_SIU_INT_REG_RAM_CFG_MIPS_S
 0

	)

82 
	#WT_SIU_INT_REG_RAM_CFG_MIPS_W
 3

	)

84 
	#WT_SIU_INT_REG_RAM_CFG_PCE_TOP_S
 4

	)

85 
	#WT_SIU_INT_REG_RAM_CFG_PCE_TOP_W
 4

	)

87 
	#WT_SIU_INT_REG_RAM_CFG_PCE_HASH_S
 12

	)

88 
	#WT_SIU_INT_REG_RAM_CFG_PCE_HASH_W
 1

	)

90 
	#WT_SIU_INT_REG_RAM_CFG_CFU_TX_S
 16

	)

91 
	#WT_SIU_INT_REG_RAM_CFG_CFU_TX_W
 3

	)

93 
	#WT_SIU_INT_REG_RAM_CFG_POLICER_S
 20

	)

94 
	#WT_SIU_INT_REG_RAM_CFG_POLICER_W
 2

	)

96 
	#WT_SIU_INT_REG_RAM_CFG_CFU_RX_S
 24

	)

97 
	#WT_SIU_INT_REG_RAM_CFG_CFU_RX_W
 2

	)

101 
WP_U32
 
	maddr_°¨t
;

102 
WP_U32
 
	maddr_size
;

103 
WP_U32
 
	m∑d
[0x7];

104 
WP_VU32
 
	mhbm
;

105 
WP_VU32
 
	mã¨
;

106 
WP_VU32
 
	mã§
;

107 
WP_VU32
 
	mhbms1
;

108 
WP_VU32
 
	mhbms2
;

109 
WP_U32
 
	m∑d1
;

110 
WP_VU32
 
	møm_c⁄fig
;

111 } 
	twt_siu_öã∫Æ
;

114 #i‡
WP_HW_WINPATH4


119 
	#WT_CFU_RX_BUFFERS_NUM_IN_CFU_BLOCK
 4096

	)

121 
	#WT_SIU_INT_REG_RAM_CFG_MIPS_S
 0

	)

122 
	#WT_SIU_INT_REG_RAM_CFG_MIPS_W
 2

	)

124 
	#WT_SIU_INT_REG_RAM_CFG_PCE_TOP_S
 4

	)

125 
	#WT_SIU_INT_REG_RAM_CFG_PCE_TOP_W
 5

	)

127 
	#WT_SIU_INT_REG_RAM_CFG_CFU_TX_S
 16

	)

128 
	#WT_SIU_INT_REG_RAM_CFG_CFU_TX_W
 3

	)

130 
	#WT_SIU_INT_REG_RAM_CFG_POLICER_S
 20

	)

131 
	#WT_SIU_INT_REG_RAM_CFG_POLICER_W
 2

	)

133 
	#WT_SIU_INT_REG_RAM_CFG_CFU_RX_S
 24

	)

134 
	#WT_SIU_INT_REG_RAM_CFG_CFU_RX_W
 2

	)

136 
	#WPI_CFU_RX
(
ba£
Ë(
wpi_hw_cfu_rx
*)((ba£Ë+ 
WPI_CFU_RX_BASE
)

	)

140 
WP_VU32
 
	maddr_°¨t
;

141 
WP_VU32
 
	maddr_size
;

142 
WP_VU32
 
	mªg_c⁄fig
;

143 
WP_VU32
 
	mabr_c⁄fig_0
;

144 
WP_VU32
 
	m∑d
[10];

145 
WP_VU32
 
	mabr_c⁄fig_1
;

146 
WP_VU32
 
	møm_c⁄fig
;

147 } 
	twt_siu_öã∫Æ
;

149 
	#WPI_FIFO_MAX_N
 24

	)

153 
WPI_PTR
 
	mfifo_°¨t
[
WPI_FIFO_MAX_N
];

154 
WP_U32
 
	m∑d_0
[8];

155 
WPI_PTR
 
	mfifo_íd
[
WPI_FIFO_MAX_N
];

156 
WP_U32
 
	m∑d_1
[8];

157 
WPI_PTR
 
	mfifo_cou¡î
[
WPI_FIFO_MAX_N
];

158 
WP_U32
 
	m∑d_2
[8];

159 
WPI_PTR
 
	mfifo_max
[
WPI_FIFO_MAX_N
];

160 
WP_U32
 
	m∑d_3
[40];

161 
WPI_PTR
 
	miq_°¨t
[4];

162 
WPI_PTR
 
	miq_ãmp
[4];

163 
WPI_PTR
 
	miq_íd
[4];

164 
WP_U32
 
	m∑d_4
[20];

165 
WP_U32
 
	mœr
;

166 
WP_U32
 
	muèr
;

167 
WP_U32
 
	m∑d_5
[2];

168 
WP_U32
 
	m„r
;

169 
WP_U32
 
	mf‰
;

170 
WP_U32
 
	m∑d_6
[2];

171 
WP_U32
 
	mh¸_ªg
;

172 
WPI_PTR
 
	mh¸_addr
;

173 
WP_U32
 
	mh¸_cmd
;

174 
WP_U32
 
	m∑d_7
[21];

175 
WP_U32
 
	mdbf_8_15_ba£
[8];

176 
WP_U32
 
	mdbf_8_15_off£t
[8];

177 
WP_U32
 
	m´_low
;

178 
WP_U32
 
	m´_hi
;

179 
WP_U32
 
	mgmr
;

180 
WP_U32
 
	mios
;

181 
WP_U32
 
	m∑d_8
[12];

182 } 
	twt_wmm
;

189 
	#HOST_WRITE_CMD_OP
 0xd0100000

	)

190 
	#HOST_READ_CMD_OP
 0xc8100000

	)

191 
	#HOST_CMD_WRITE_SIZE
 0x400

	)

197 
WP_U32
 
	$wrôeTrs
–
WP_U32
 
°¨t_addr
, WP_U32 
size
,

198 
WP_U32
 
h¸_ªg
, WP_U32 
h¸_cmd
,

199 
WP_U32
 
h¸_addr
 )

201 
WP_U32
 
addr
, 
ãmp32
;

203  
addr
 = 
°¨t_addr
;ádd∏< sèπ_addr+
size
;ádd∏+
HOST_CMD_WRITE_SIZE
 )

205 
	`WPI_REG_SET
(*((vﬁ©ûê
WP_U32
*)
h¸_ªg
), 0);

206 
	`WPI_REG_SET
(*((vﬁ©ûê
WP_U32
*)
h¸_addr
), 
addr
);

207 
	`WPI_REG_SET
(*((vﬁ©ûê
WP_U32
*)
h¸_cmd
), 
HOST_WRITE_CMD_OP
);

210 
	`WPI_REG_GET
(
ãmp32
, *((vﬁ©ûê
WP_U32
*)
h¸_cmd
));

211 (
ãmp32
 & 0x80000000))

212 
	`WPI_REG_GET
(
ãmp32
, *((vﬁ©ûê
WP_U32
*)
h¸_cmd
));

215 
	}
}

221 
WP_U32
 
	$ªadTrs
–
WP_U32
 
°¨t_addr
, WP_U32 
size
,

222 
WP_U32
 
h¸_ªg
, WP_U32 
h¸_cmd
,

223 
WP_U32
 
h¸_addr
 )

225 
WP_U32
 
addr
, 
ãmp32
;

227  
addr
 = 
°¨t_addr
;ádd∏< sèπ_addr+
size
;ádd∏+
HOST_CMD_WRITE_SIZE
 )

229 
	`WPI_REG_SET
(*((vﬁ©ûê
WP_U32
*)
h¸_ªg
), 0);

230 
	`WPI_REG_SET
(*((vﬁ©ûê
WP_U32
*)
h¸_addr
), 
addr
);

231 
	`WPI_REG_SET
(*((vﬁ©ûê
WP_U32
*)
h¸_cmd
), 
HOST_READ_CMD_OP
);

234 
	`WPI_REG_GET
(
ãmp32
, *((vﬁ©ûê
WP_U32
*)
h¸_cmd
));

235 (
ãmp32
 & 0x80000000))

236 
	`WPI_REG_GET
(
ãmp32
, *((vﬁ©ûê
WP_U32
*)
h¸_cmd
));

239 
	}
}

244 
	$WT_ReInôI¡Ram
(
WP_U32
 
wpid
, 
WP_U8
* 
ªg_ba£s_±r
, 
wt_siu_öã∫Æ
 *
siu_öã∫Æ
)

246 #i‡!
	`deföed
(
WINSIM
Ë&& !deföed(
VERILOG
)

247 
WP_U32
 
bus_ba£
, 
bus_size
, 
addr
, 
ho°_off£t
;

248 
wpi_víìr_mem‹y
 
bus_m≠pögs
[
WINPATH_NUM_MAX
][
WPI_BUS_LAST
];

249 
wt_wmm
 *
wmm
;

251 
wmm
 = (
wt_wmm
 *)
	`WPI_WMM
(
ªg_ba£s_±r
, 2);

253 
	`WPI_REG_GET
(
bus_ba£
, 
siu_öã∫Æ
->
addr_°¨t
);

254 
	`WPI_REG_GET
(
bus_size
, 
siu_öã∫Æ
->
addr_size
);

256 
	`¥ötf
("Re-init INT RAM\n");

261 
	`wrôeTrs
–
bus_ba£
, 
HOST_CMD_WRITE_SIZE
,

262 (
WP_U32
Ë&(
wmm
->
h¸_ªg
), (WP_U32Ë&(wmm->
h¸_cmd
), (WP_U32Ë&(wmm->
h¸_addr
) );

264 
	`WPL_Bu£sM≠Gë
(&(
bus_m≠pögs
[0][0]));

265 
ho°_off£t
 = (
WP_U32
Ë
bus_m≠pögs
[
wpid
][
WP_BUS_INTERNAL
].
unˇched_off£t
;

268 
addr
 = 
bus_ba£
;áddr < (bus_base+0x400);áddr += 4)

270 
	`WPI_MEM_SET
(*((vﬁ©ûê
WP_U32
*)(
addr
+
ho°_off£t
)), 0);

273 
	`ªadTrs
–
bus_ba£
, 
HOST_CMD_WRITE_SIZE
,

274 (
WP_U32
Ë&(
wmm
->
h¸_ªg
), (WP_U32Ë&(wmm->
h¸_cmd
), (WP_U32Ë&(wmm->
h¸_addr
) );

276 
	`wrôeTrs
–
bus_ba£
+
HOST_CMD_WRITE_SIZE
, 
bus_size
-HOST_CMD_WRITE_SIZE,

277 (
WP_U32
Ë&(
wmm
->
h¸_ªg
), (WP_U32Ë&(wmm->
h¸_cmd
), (WP_U32Ë&(wmm->
h¸_addr
) );

279 
	}
}

282 #ifde‡
WP_HW_WINPATH3


301 
WP_U32
 
	$WT_HwDevi˚InfoGë
(
WP_U32
 
wpid
, 
WP_U8
 *
ªg_ba£s_±r
)

303 
WP_U32
 
wö∑th_ªv_id
 = 0;

305 
wt_fu£_ªg
 *
fu£_ªgs
;

306 
WP_U32
 
devi˚_id
, 
ªv_id
, 
sub_ªv_id
;

307 
WP_U32
 
ªg0
, 
ªg1
;

309 
wö∑th_ªv_id
 = 
WPI_REV_ID
;

312 
fu£_ªgs
 = (
wt_fu£_ªg
 *Ë(
ªg_ba£s_±r
 + 
WPI_FUSE_BASE
);

313 
	`WPI_REG_GET
(
ªg0
, 
fu£_ªgs
->reg0);

314 
	`WPI_REG_GET
(
ªg1
, 
fu£_ªgs
->reg1);

316 
devi˚_id
 = 
	`WPI_NCM_VALUE
(
WT_HW_WINPATH_DEVICE_ID
, 
ªg0
);

317 
ªv_id
 = 
	`WPI_NCM_VALUE
(
WT_HW_WINPATH_REV_ID
, 
ªg0
);

318 
sub_ªv_id
 = 
	`WPI_NCM_VALUE
(
WT_HW_WINPATH_SUB_REV_ID_LSB
, 
ªg0
) +

319 (
	`WPI_NCM_VALUE
(
WT_HW_WINPATH_SUB_REV_ID_MSB
, 
ªg1
) << 1);

323 
devi˚_id
)

325 
WPI_DEVICE_WP3
:

326 if(
ªv_id
 =
WPI_REV_B
)

328 if(
sub_ªv_id
 == 1)

329 
wö∑th_ªv_id
 = 
WPI_WP_REV_3_B1
;

330 if(
sub_ªv_id
 == 2)

331 
wö∑th_ªv_id
 = 
WPI_WP_REV_3_B2
;

334 
WPI_DEVICE_WP3_SL
:

335 
wö∑th_ªv_id
 = 
WPI_WP_REV_3_SLB
;

336 if(
ªv_id
 =
WPI_REV_B
)

338 if(
sub_ªv_id
 == 0)

339 
wö∑th_ªv_id
 = 
WPI_WP_REV_3_SLB
;

340 if(
sub_ªv_id
 == 1)

341 
wö∑th_ªv_id
 = 
WPI_WP_REV_3_SLB1
;

344 
WPI_DEVICE_WP3_SPO
:

345 
wö∑th_ªv_id
 = 
WPI_WP_REV_3_SPO
;

346 if(
ªv_id
 =
WPI_REV_B
)

348 if(
sub_ªv_id
 == 1)

349 
wö∑th_ªv_id
 = 
WPI_WP_REV_3_SPO
;

354 
wö∑th_ªv_id
)

356 
WPI_WP_REV_3_SPO
:

357 
	`¥ötf
("Chip Revision: WP3 SPO\n");

359 
WPI_WP_REV_3_SLB
:

360 
	`¥ötf
("Chip Revision: WP3 SL B\n");

362 
WPI_WP_REV_3_SLB1
:

363 
	`¥ötf
("Chip Revision: WP3 SL B.1\n");

365 
WPI_WP_REV_3_A
:

366 
	`¥ötf
("Chip Revision: WP3 Rev A\n");

368 
WPI_WP_REV_3_B1
:

369 
	`¥ötf
("Chip Revision: WP3 Rev B.1\n");

371 
WPI_WP_REV_3_B2
:

372 
	`¥ötf
("Chip Revision: WP3 Rev B.2\n");

377  
wö∑th_ªv_id
;

378 
	}
}

380 
	#HALI_PCE_HASH_BASIC_SIZE_BITS
 10

	)

381 
	#HALI_PCE_HASH_BASIC_SIZE
 (0x1 << 
HALI_PCE_HASH_BASIC_SIZE_BITS
)

	)

382 
	#WPI_PCE_AR_MEM_UNIT_HASHR
 0x4

	)

384 
	#WPI_PCE_AR_ONE_WORD_MODE_OFF
 0

	)

385 
	#WPI_PCE_AR_ONE_WORD_MODE_S
 19

	)

386 
	#WPI_PCE_AR_ONE_WORD_MODE_W
 1

	)

388 
	#WPI_PCE_AR_ONE_WORD_MODE_RESET
(
ªg
Ë
	`WPI_NCM_SET_VAL
(
WPI_PCE_AR_ONE_WORD_MODE
,Ñeg, 
WPI_PCE_AR_ONE_WORD_MODE_OFF
)

	)

390 
	#WPI_PCE_AR_MEM_UNIT_S
 20

	)

391 
	#WPI_PCE_AR_MEM_UNIT_W
 4

	)

393 
	#WPI_PCE_AR_HASH_ENTRY_S
 0

	)

394 
	#WPI_PCE_AR_HASH_ENTRY_W
 6

	)

396 
	#WPI_PCE_AR_HASH_LINE_S
 6

	)

397 
	#WPI_PCE_AR_HASH_LINE_W
 11

	)

399 
	#WPI_PCE_HASH_RAM_CRC_RES_S
 15

	)

400 
	#WPI_PCE_HASH_RAM_CRC_RES_W
 17

	)

402 
	#WPI_PCE_HASH_RAM_EXACT_MATCH_POINTER_S
 0

	)

403 
	#WPI_PCE_HASH_RAM_EXACT_MATCH_POINTER_W
 15

	)

405 
	#WPI_PCE_GFR_HASH_INIT_S
 15

	)

406 
	#WPI_PCE_GFR_HASH_INIT_W
 1

	)

408 
	#WPI_PCE_GFR_ECC_HASH_S
 14

	)

409 
	#WPI_PCE_GFR_ECC_HASH_W
 1

	)

411 
	#WPI_PCE_GFR_ECC_EM_S
 13

	)

412 
	#WPI_PCE_GFR_ECC_EM_W
 1

	)

414 
	#HALI_PCE_IND_DATA_REGS_NUM
 9

	)

415 
	#HALI_PCE_UNUSED_REGS_NUM
 (0x7D - 0x40)

	)

417 
	sHALI_p˚_ªgs


419 
WP_U32
 
	mdr
[
HALI_PCE_IND_DATA_REGS_NUM
];

422 
WP_U32
 
	mdummy1
[0x2E - 
HALI_PCE_IND_DATA_REGS_NUM
];

425 
WP_U32
 
	mß
[5];

426 
WP_U32
 
	mpu_˙t
;

427 
WP_U32
 
	mcu_˙t
;

428 
WP_U32
 
	mh´_˙t
;

429 
WP_U32
 
	m±_˙t
;

430 
WP_U32
 
	m˘_˙t
;

431 
WP_U32
 
	m∑_˙t
;

432 
WP_U32
 
	m£ed_ªg
;

433 
WP_U32
 
	mg‰
;

434 
WP_U32
 
	mh‰_mp0
;

435 
WP_U32
 
	mh‰_mp1
;

436 
WP_U32
 
	m¶r0
;

437 
WP_U32
 
	m¶r1
;

438 
WP_U32
 
	m¨
;

439 
WP_U32
 
	mdummy2
[
HALI_PCE_UNUSED_REGS_NUM
];

440 
WP_U32
 
	mmpdr
;

441 
WP_U32
 
	mmdr
;

442 }
	tHALI_p˚_ªgs
;

464 
WP_°©us
 
	$WTI_P˚G‰EccSë
(
HALI_p˚_ªgs
 *
p˚_ªgs
, 
WP_U8
 
íabÀ
)

466 
WP_U32
 
ãmp32
;

468 
	`WPI_REG_GET
(
ãmp32
, 
p˚_ªgs
->
g‰
);

470 
	`WPI_NCM_SET_VAL
(
WPI_PCE_GFR_ECC_HASH
, 
ãmp32
, 
íabÀ
);

471 
	`WPI_NCM_SET_VAL
(
WPI_PCE_GFR_ECC_EM
, 
ãmp32
, 
íabÀ
);

473 
	`WPI_REG_SET
(
p˚_ªgs
->
g‰
, 
ãmp32
);

475  
WP_OK
;

476 
	}
}

478 
WP_°©us
 
	$WTI_P˚G‰HashInô
(
HALI_p˚_ªgs
 *
p˚_ªgs
, 
WP_U8
 
íabÀ
)

480 
WP_U32
 
ãmp32
;

482 
	`WPI_REG_GET
(
ãmp32
, 
p˚_ªgs
->
g‰
);

484 
	`WPI_NCM_SET_VAL
(
WPI_PCE_GFR_HASH_INIT
, 
ãmp32
, 
íabÀ
);

486 
	`WPI_REG_SET
(
p˚_ªgs
->
g‰
, 
ãmp32
);

488  
WP_OK
;

489 
	}
}

491 
WP_°©us
 
	$WTI_P˚ArHashRamVÆSë
(
HALI_p˚_ªgs
* 
p˚_ªgs
, 
WP_U16
 
¨_ödex
, WP_U16 
íåy
)

493 
WP_U32
 
¨
;

495 
¨
 = 
	`WPI_NCM_FIELD
(
WPI_PCE_AR_MEM_UNIT
, 
WPI_PCE_AR_MEM_UNIT_HASHR
) |

496 
	`WPI_NCM_FIELD
(
WPI_PCE_AR_HASH_LINE
, 
¨_ödex
) |

497 
	`WPI_NCM_FIELD
(
WPI_PCE_AR_HASH_ENTRY
, 
íåy
);

499 
	`WPI_PCE_AR_ONE_WORD_MODE_RESET
(
¨
);

501 
	`WPI_REG_SET
(
p˚_ªgs
->
¨
,ár);

503  
WP_OK
;

504 
	}
}

506 
WP_°©us
 
	$WTI_P˚HashRamE¡rySë
(
HALI_p˚_ªgs
 *
p˚_ªgs
, 
WP_U32
 
¸c
, WP_U32 
ruÀ_poöãr
,

507 
WP_U16
 
löe_ödex
, WP_U16 
íåy_num
)

509 
WP_U32
 
dr0
;

511 
	`WTI_P˚ArHashRamVÆSë
(
p˚_ªgs
, 
löe_ödex
, 
íåy_num
);

513 
dr0
 = 
	`WPI_NCM_FIELD
(
WPI_PCE_HASH_RAM_CRC_RES
, 
¸c
) |

514 
	`WPI_NCM_FIELD
(
WPI_PCE_HASH_RAM_EXACT_MATCH_POINTER
, 
ruÀ_poöãr
);

516 
	`WPI_REG_SET
(
p˚_ªgs
->
dr
[0], 
dr0
);

518  
WP_OK
;

519 
	}
}

521 
	swpi_p˚_hash_øm_íåy


523 
wpi_p˚_ruÀ_ödex
 
	mruÀ_poöãr
;

524 
WP_U32
 
	mCRC
;

525 }
	twpi_p˚_hash_øm_íåy
;

527 
	$WT_ReInôP˚Hash
(
WP_U8
* 
ªg_ba£s_±r
)

529 #i‡!
	`deföed
(
WINSIM
Ë&& !deföed(
VERILOG
)

530 
WP_U32
 
i
;

531 
wpi_p˚_hash_øm_íåy
 
p˚_hash_øm_íåy
;

532 
HALI_p˚_ªgs
 *
p˚_ªgs
;

534 
p˚_ªgs
 = (
HALI_p˚_ªgs
 *)((
WP_CHAR
 *)
ªg_ba£s_±r
 + 0x5800);

536 
p˚_hash_øm_íåy
.
CRC
 = 0;

537 
p˚_hash_øm_íåy
.
ruÀ_poöãr
 = 
WPI_PCE_RULE_INFO_INDEX_NULL
;

539 
	`¥ötf
("Re-init PCE Hash\n");

541 
	`WTI_P˚G‰EccSë
(
p˚_ªgs
, 0);

542 
	`WTI_P˚G‰HashInô
(
p˚_ªgs
, 1);

544 
i
=0; i<(2*
HALI_PCE_HASH_BASIC_SIZE
); i++)

546 
	`WTI_P˚HashRamE¡rySë
(
p˚_ªgs
, 
p˚_hash_øm_íåy
.
CRC
,Ö˚_hash_øm_íåy.
ruÀ_poöãr
, 
i
, 0);

549 
	`WTI_P˚G‰HashInô
(
p˚_ªgs
, 0);

550 
	`WTI_P˚G‰EccSë
(
p˚_ªgs
, 1);

552 
	}
}

562 
	$WT_SëI¡RamP¨tôi⁄_WP3
(
WP_U32
 
wpid
, *
cfg
)

564 
WP_U8
 *
ªg_ba£s_±r
;

565 
wt_siu_öã∫Æ
 *
siu_öã∫Æ
;

566 
WP_U32
 
siu_öt_ªg_øm_cfg
;

568 
WP_U32
 
p˚_hash_¥ev_size
, 
p˚_em_¥ev_size
, 
pﬁi˚r_¥ev_size
, 
cfu_rx_¥ev_size
, 
cfu_tx_¥ev_size
;

569 
WP_U32
 
p˚_hash_√w_size
, 
p˚_em_√w_size
, 
pﬁi˚r_√w_size
, 
cfu_rx_√w_size
, 
cfu_tx_√w_size
;

570 
WT_öt_øm_∑πôi⁄_£t
 *
∑πôi⁄
 = (WT_öt_øm_∑πôi⁄_£à*)
cfg
;

571 
WP_U32
 
KB
 = 1024;

572 
WP_U32
 
öt_øm_tŸÆ_unôs
;

575 
ªg_ba£s_±r
 = 
	`WPL_RegBa£Gë
(
wpid
);

578 
siu_öã∫Æ
 = (
wt_siu_öã∫Æ
 *)
	`WPI_BIU
(
ªg_ba£s_±r
, 
WPI_SIU3_BASE
);

579 
	`WPI_REG_GET
(
siu_öt_ªg_øm_cfg
, 
siu_öã∫Æ
->
øm_c⁄fig
);

582 
p˚_hash_¥ev_size
 = 
	`WPI_NCM_VALUE
(
WT_SIU_INT_REG_RAM_CFG_PCE_HASH
, 
siu_öt_ªg_øm_cfg
);

583 
p˚_em_¥ev_size
 = 
	`WPI_NCM_VALUE
(
WT_SIU_INT_REG_RAM_CFG_PCE_TOP
, 
siu_öt_ªg_øm_cfg
);

584 
pﬁi˚r_¥ev_size
 = 
	`WPI_NCM_VALUE
(
WT_SIU_INT_REG_RAM_CFG_POLICER
, 
siu_öt_ªg_øm_cfg
);

585 
cfu_rx_¥ev_size
 = 
	`WPI_NCM_VALUE
(
WT_SIU_INT_REG_RAM_CFG_CFU_RX
, 
siu_öt_ªg_øm_cfg
);

586 
cfu_tx_¥ev_size
 = 
	`WPI_NCM_VALUE
(
WT_SIU_INT_REG_RAM_CFG_CFU_TX
, 
siu_öt_ªg_øm_cfg
);

588 
wö∑th_ªvisi⁄
 = 
	`WT_HwDevi˚InfoGë
(
wpid
, 
ªg_ba£s_±r
);

591 
wö∑th_ªvisi⁄
)

593 
WPI_WP_REV_3_A
:

594 
WPI_WP_REV_3_B1
:

595 
WPI_WP_REV_3_B2
:

596 
öt_øm_tŸÆ_unôs
 = 20;

597 if((
∑πôi⁄
->
pﬁi˚r_íåõs
 > 16384 &&Ö¨tôi⁄->pﬁi˚r_íåõ†!
WT_PARTITION_UNCHANGED
) ||

598 (
∑πôi⁄
->
p˚_hw_ruÀs_num
 > 32767 &&Ö¨tôi⁄->p˚_hw_ruÀs_num !
WT_PARTITION_UNCHANGED
) ||

599 (
∑πôi⁄
->
cfu_rx_buf„rs_num
 > 4096 &&Ö¨tôi⁄->cfu_rx_buf„rs_num !
WT_PARTITION_UNCHANGED
) ||

600 (
∑πôi⁄
->
cfu_tx_buf„rs_num
 > 8192 &&Ö¨tôi⁄->cfu_tx_buf„rs_num !
WT_PARTITION_UNCHANGED
))

602 
	`¥ötf
("Partition change FAILURE!!! IllegalÖartition forÅhis chip");

603 
	`exô
(1);

606 
WPI_WP_REV_3_SLB
:

607 
WPI_WP_REV_3_SLB1
:

608 
WPI_WP_REV_3_SPO
:

609 
öt_øm_tŸÆ_unôs
 = 6;

610 if((
∑πôi⁄
->
pﬁi˚r_íåõs
 > 0 &&Ö¨tôi⁄->pﬁi˚r_íåõ†!
WT_PARTITION_UNCHANGED
) ||

611 (
∑πôi⁄
->
p˚_hw_ruÀs_num
 > 8191 &&Ö¨tôi⁄->p˚_hw_ruÀs_num !
WT_PARTITION_UNCHANGED
) ||

612 (
∑πôi⁄
->
cfu_rx_buf„rs_num
 > 0 &&Ö¨tôi⁄->cfu_rx_buf„rs_num !
WT_PARTITION_UNCHANGED
) ||

613 (
∑πôi⁄
->
cfu_tx_buf„rs_num
 > 0 &&Ö¨tôi⁄->cfu_tx_buf„rs_num !
WT_PARTITION_UNCHANGED
))

615 
	`¥ötf
("Partition change FAILURE!!! IllegalÖartition forÅhis chip");

616 
	`exô
(1);

629 
p˚_em_√w_size
 = 
p˚_hash_√w_size
 = 0;

630 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 =
WT_PARTITION_UNCHANGED
)

632 
p˚_hash_√w_size
 = 
p˚_hash_¥ev_size
;

633 
p˚_em_√w_size
 = 
p˚_em_¥ev_size
;

635 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 == 0)

636 
p˚_em_√w_size
 = 0;

637 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 < 4*
KB
)

638 
p˚_em_√w_size
 = 1;

639 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 < 8*
KB
)

640 
p˚_em_√w_size
 = 2;

641 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 < 12*
KB
)

642 
p˚_em_√w_size
 = 3;

643 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 < 16*
KB
)

644 
p˚_em_√w_size
 = 4;

645 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 < 20*
KB
)

646 
p˚_em_√w_size
 = 5;

647 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 < 24*
KB
)

649 
p˚_em_√w_size
 = 6;

650 
p˚_hash_√w_size
 = 1;

652 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 < 28*
KB
)

654 
p˚_em_√w_size
 = 7;

655 
p˚_hash_√w_size
 = 1;

657 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 < 32*
KB
)

659 
p˚_em_√w_size
 = 8;

660 
p˚_hash_√w_size
 = 1;

663 if(
∑πôi⁄
->
pﬁi˚r_íåõs
 =
WT_PARTITION_UNCHANGED
)

664 
pﬁi˚r_√w_size
 = 
pﬁi˚r_¥ev_size
;

665 if(
∑πôi⁄
->
pﬁi˚r_íåõs
 == 0)

666 
pﬁi˚r_√w_size
 = 0;

667 if(
∑πôi⁄
->
pﬁi˚r_íåõs
 <= 8192)

668 
pﬁi˚r_√w_size
 = 1;

670 
pﬁi˚r_√w_size
 = 2;

672 if(
∑πôi⁄
->
cfu_rx_buf„rs_num
 =
WT_PARTITION_UNCHANGED
)

673 
cfu_rx_√w_size
 = 
cfu_rx_¥ev_size
;

674 if(
∑πôi⁄
->
cfu_rx_buf„rs_num
 == 0)

675 
cfu_rx_√w_size
 = 0;

678 if(
∑πôi⁄
->
cfu_rx_buf„rs_num
 <= 2048)

679 
cfu_rx_√w_size
 = 1;

681 
cfu_rx_√w_size
 = 2;

684 
WP_U32
 
ii
;

685 
WP_U32
 
öô_¨ó_buf„rs
;

686 
wpi_hw_cfu_rx
* 
rx_hw
;

689 
rx_hw
 = 
	`WPI_CFU_RX
(
ªg_ba£s_±r
);

691 
öô_¨ó_buf„rs
 = 
WT_CFU_RX_BUFFERS_NUM_IN_CFU_BLOCK
 + 
∑πôi⁄
->
cfu_rx_buf„rs_num
;

693 
	`WPI_REG_SET
(
rx_hw
->
rx_d©a_fifo_±r
, 0);

694 
ii
 = 0 ; iò< (
öô_¨ó_buf„rs
 * 16 / 4); ++ii)

696 
	`WPI_REG_SET
(
rx_hw
->
rx_d©a_fifo_d©a
, 0);

701 if(
∑πôi⁄
->
cfu_tx_buf„rs_num
 =
WT_PARTITION_UNCHANGED
)

702 
cfu_tx_√w_size
 = 
cfu_tx_¥ev_size
;

703 if(
∑πôi⁄
->
cfu_tx_buf„rs_num
 == 0)

704 
cfu_tx_√w_size
 = 0;

705 if(
∑πôi⁄
->
cfu_tx_buf„rs_num
 <= 2048)

706 
cfu_tx_√w_size
 = 1;

707 if(
∑πôi⁄
->
cfu_tx_buf„rs_num
 <= 4096)

708 
cfu_tx_√w_size
 = 2;

709 if(
∑πôi⁄
->
cfu_tx_buf„rs_num
 <= 6144)

710 
cfu_tx_√w_size
 = 3;

712 
cfu_tx_√w_size
 = 4;

714 
	`WPI_NCM_SET_VAL
(
WT_SIU_INT_REG_RAM_CFG_POLICER
, 
siu_öt_ªg_øm_cfg
, 
pﬁi˚r_√w_size
);

715 
	`WPI_NCM_SET_VAL
(
WT_SIU_INT_REG_RAM_CFG_PCE_TOP
, 
siu_öt_ªg_øm_cfg
, 
p˚_em_√w_size
);

716 
	`WPI_NCM_SET_VAL
(
WT_SIU_INT_REG_RAM_CFG_PCE_HASH
, 
siu_öt_ªg_øm_cfg
, 
p˚_hash_√w_size
);

717 
	`WPI_NCM_SET_VAL
(
WT_SIU_INT_REG_RAM_CFG_CFU_RX
, 
siu_öt_ªg_øm_cfg
, 
cfu_rx_√w_size
);

718 
	`WPI_NCM_SET_VAL
(
WT_SIU_INT_REG_RAM_CFG_CFU_TX
, 
siu_öt_ªg_øm_cfg
, 
cfu_tx_√w_size
);

720 
	`WPI_REG_SET
(
siu_öã∫Æ
->
øm_c⁄fig
, 
siu_öt_ªg_øm_cfg
);

723 if(
p˚_hash_√w_size
 > 
p˚_hash_¥ev_size
)

726 if(
wö∑th_ªvisi⁄
 !
WPI_WP_REV_3_A
)

727 
	`WT_ReInôP˚Hash
(
ªg_ba£s_±r
);

734 if(
wö∑th_ªvisi⁄
 =
WPI_WP_REV_3_B1
 || wö∑th_ªvisi⁄ =
WPI_WP_REV_3_B2
)

735 
	`WT_ReInôI¡Ram
(
wpid
, 
ªg_ba£s_±r
, 
siu_öã∫Æ
);

762 
	}
}

764 
	$WT_RódFmuG¸
(
WP_U32
 
wpid
)

767 
WP_U8
 *
ªg_ba£s_±r
;

768 
WP_U32
 
i
, 
ãmp32
;

769 
wpi_fmu_l2
 *
hw_fmu_l2
;

772 
ªg_ba£s_±r
 = 
	`WPL_RegBa£Gë
(
wpid
);

774 
hw_fmu_l2
 = (
wpi_fmu_l2
*)(
	`WPI_FMU_BASE_ADDRESS
–
ªg_ba£s_±r
Ë+ 
WPI_FMU_L2_OFFSET
);

775 
	`¥ötf
("FMUÑód GCR,Öå 0x%08X d©®0x%08X\n", (
WP_U32
Ë&(
hw_fmu_l2
->
l1g¸_±r
), (WP_U32Ë&(hw_fmu_l2->
l1g¸_d©a
));

776 
	`WPI_REG_SET
(
hw_fmu_l2
->
l1g¸_±r
, 0);

777 
i
=0; i<0x20000; i++)

779 if(
i
%64 == 0 || i > 19450)

780 
	`¥ötf
("[0x%4X %5d] ", 
i
, i);

781 
	`WPI_REG_GET
(
ãmp32
, 
hw_fmu_l2
->
l1g¸_d©a
);

784 
	}
}

788 #i‡
WP_HW_WINPATH4


789 
	$WT_SëI¡RamP¨tôi⁄_WP4
(
WP_U32
 
wpid
, *
cfg
, WP_U32 
siu_num
)

791 
WP_U8
 *
ªg_ba£s_±r
;

792 
wt_siu_öã∫Æ
 *
siu_öã∫Æ
;

793 
WP_U32
 
siu_öt_ªg_øm_cfg
;

794 
WP_U32
 
p˚_em_¥ev_size
, 
pﬁi˚r_¥ev_size
, 
cfu_rx_¥ev_size
, 
cfu_tx_¥ev_size
;

795 
WP_U32
 
p˚_em_√w_size
, 
pﬁi˚r_√w_size
, 
cfu_rx_√w_size
, 
cfu_tx_√w_size
;

796 
WT_öt_øm_∑πôi⁄_£t
 *
∑πôi⁄
 = (WT_öt_øm_∑πôi⁄_£à*)
cfg
;

797 
WP_U32
 
KB
 = 1024;

799 if((
∑πôi⁄
->
pﬁi˚r_íåõs
 > 32*
KB
 &&Ö¨tôi⁄->pﬁi˚r_íåõ†!
WT_PARTITION_UNCHANGED
) ||

800 (
∑πôi⁄
->
p˚_hw_ruÀs_num
 > 128*
KB
 &&Ö¨tôi⁄->p˚_hw_ruÀs_num !
WT_PARTITION_UNCHANGED
) ||

801 (
∑πôi⁄
->
cfu_rx_buf„rs_num
 > 12*
KB
 &&Ö¨tôi⁄->cfu_rx_buf„rs_num !
WT_PARTITION_UNCHANGED
) ||

802 (
∑πôi⁄
->
cfu_tx_buf„rs_num
 > 28*
KB
 &&Ö¨tôi⁄->cfu_tx_buf„rs_num !
WT_PARTITION_UNCHANGED
))

804 
	`¥ötf
("Partition change FAILURE!!! IllegalÖartition forÅhis chip\n");

805 
	`exô
(1);

809 
ªg_ba£s_±r
 = 
	`WPL_RegBa£Gë
(
wpid
);

812 
siu_öã∫Æ
 = (
wt_siu_öã∫Æ
 *)
	`WPI_BIU
(
ªg_ba£s_±r
, 
siu_num
);

813 
	`WPI_REG_GET
(
siu_öt_ªg_øm_cfg
, 
siu_öã∫Æ
->
øm_c⁄fig
);

815 
	`¥ötf
("-- i¡ÑamÑód = 0x%08x\n", 
siu_öt_ªg_øm_cfg
);

818 
p˚_em_¥ev_size
 = 
	`WPI_NCM_VALUE
(
WT_SIU_INT_REG_RAM_CFG_PCE_TOP
, 
siu_öt_ªg_øm_cfg
);

819 
pﬁi˚r_¥ev_size
 = 
	`WPI_NCM_VALUE
(
WT_SIU_INT_REG_RAM_CFG_POLICER
, 
siu_öt_ªg_øm_cfg
);

820 
cfu_rx_¥ev_size
 = 
	`WPI_NCM_VALUE
(
WT_SIU_INT_REG_RAM_CFG_CFU_RX
, 
siu_öt_ªg_øm_cfg
);

821 
cfu_tx_¥ev_size
 = 
	`WPI_NCM_VALUE
(
WT_SIU_INT_REG_RAM_CFG_CFU_TX
, 
siu_öt_ªg_øm_cfg
);

824 
p˚_em_√w_size
 = 0;

825 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 =
WT_PARTITION_UNCHANGED
)

827 
p˚_em_√w_size
 = 
p˚_em_¥ev_size
;

829 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 == 0)

830 
p˚_em_√w_size
 = 0;

831 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 <16*
KB
)

832 
p˚_em_√w_size
 = 2;

833 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 <32*
KB
)

834 
p˚_em_√w_size
 = 4;

835 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 <48*
KB
)

836 
p˚_em_√w_size
 = 6;

837 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 <64*
KB
)

838 
p˚_em_√w_size
 = 8;

839 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 <80*
KB
)

840 
p˚_em_√w_size
 = 0xa;

841 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 <96*
KB
)

842 
p˚_em_√w_size
 = 0xc;

843 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 <112*
KB
)

844 
p˚_em_√w_size
 = 0xe;

845 if(
∑πôi⁄
->
p˚_hw_ruÀs_num
 <128*
KB
)

846 
p˚_em_√w_size
 = 0x10;

848 if(
∑πôi⁄
->
pﬁi˚r_íåõs
 =
WT_PARTITION_UNCHANGED
)

849 
pﬁi˚r_√w_size
 = 
pﬁi˚r_¥ev_size
;

850 if(
∑πôi⁄
->
pﬁi˚r_íåõs
 == 0)

851 
pﬁi˚r_√w_size
 = 0;

852 if(
∑πôi⁄
->
pﬁi˚r_íåõs
 <10*
KB
)

853 
pﬁi˚r_√w_size
 = 1;

854 if(
∑πôi⁄
->
pﬁi˚r_íåõs
 <21*
KB
)

855 
pﬁi˚r_√w_size
 = 3;

857 
pﬁi˚r_√w_size
 = 3;

859 if(
∑πôi⁄
->
cfu_rx_buf„rs_num
 =
WT_PARTITION_UNCHANGED
)

860 
cfu_rx_√w_size
 = 
cfu_rx_¥ev_size
;

861 if(
∑πôi⁄
->
cfu_rx_buf„rs_num
 == 0)

862 
cfu_rx_√w_size
 = 0;

865 if(
∑πôi⁄
->
cfu_rx_buf„rs_num
 <4*
KB
)

866 
cfu_rx_√w_size
 = 1;

867 i‡(
∑πôi⁄
->
cfu_rx_buf„rs_num
 <8*
KB
)

868 
cfu_rx_√w_size
 = 2;

870 
cfu_rx_√w_size
 = 3;

873 
WP_U32
 
ii
;

874 
WP_U32
 
öô_¨ó_buf„rs
;

875 
wpi_hw_cfu_rx
* 
rx_hw
;

878 
rx_hw
 = 
	`WPI_CFU_RX
(
ªg_ba£s_±r
);

880 
öô_¨ó_buf„rs
 = 
WT_CFU_RX_BUFFERS_NUM_IN_CFU_BLOCK
 + 
∑πôi⁄
->
cfu_rx_buf„rs_num
;

882 
	`WPI_REG_SET
(
rx_hw
->
rx_d©a_fifo_±r
, 0);

883 
ii
 = 0 ; iò< (
öô_¨ó_buf„rs
 * 16 / 4); ++ii)

885 
	`WPI_REG_SET
(
rx_hw
->
rx_d©a_fifo_d©a
, 0);

890 if(
∑πôi⁄
->
cfu_tx_buf„rs_num
 =
WT_PARTITION_UNCHANGED
)

891 
cfu_tx_√w_size
 = 
cfu_tx_¥ev_size
;

892 if(
∑πôi⁄
->
cfu_tx_buf„rs_num
 == 0)

893 
cfu_tx_√w_size
 = 0;

894 if(
∑πôi⁄
->
cfu_tx_buf„rs_num
 <4*
KB
)

895 
cfu_tx_√w_size
 = 1;

896 if(
∑πôi⁄
->
cfu_tx_buf„rs_num
 <8*
KB
)

897 
cfu_tx_√w_size
 = 2;

898 if(
∑πôi⁄
->
cfu_tx_buf„rs_num
 <12*
KB
)

899 
cfu_tx_√w_size
 = 3;

900 if(
∑πôi⁄
->
cfu_tx_buf„rs_num
 <16*
KB
)

901 
cfu_tx_√w_size
 = 4;

902 if(
∑πôi⁄
->
cfu_tx_buf„rs_num
 <20*
KB
)

903 
cfu_tx_√w_size
 = 5;

904 if(
∑πôi⁄
->
cfu_tx_buf„rs_num
 <24*
KB
)

905 
cfu_tx_√w_size
 = 6;

907 
cfu_tx_√w_size
 = 7;

909 
	`WPI_NCM_SET_VAL
(
WT_SIU_INT_REG_RAM_CFG_POLICER
, 
siu_öt_ªg_øm_cfg
, 
pﬁi˚r_√w_size
);

910 
	`WPI_NCM_SET_VAL
(
WT_SIU_INT_REG_RAM_CFG_PCE_TOP
, 
siu_öt_ªg_øm_cfg
, 
p˚_em_√w_size
);

911 
	`WPI_NCM_SET_VAL
(
WT_SIU_INT_REG_RAM_CFG_CFU_RX
, 
siu_öt_ªg_øm_cfg
, 
cfu_rx_√w_size
);

912 
	`WPI_NCM_SET_VAL
(
WT_SIU_INT_REG_RAM_CFG_CFU_TX
, 
siu_öt_ªg_øm_cfg
, 
cfu_tx_√w_size
);

914 i‡(
∑πôi⁄
->
mùs_ˇche_size
 !
WT_PARTITION_UNCHANGED
)

916 
WP_U32
 
vÆue
;

918 i‡(
∑πôi⁄
->
mùs_ˇche_size
 == 0)

919 
vÆue
 = 0;

920 i‡(
∑πôi⁄
->
mùs_ˇche_size
 <256*
KB
)

921 
vÆue
 = 1;

923 
vÆue
 = 2;

924 
	`WPI_NCM_SET_VAL
(
WT_SIU_INT_REG_RAM_CFG_MIPS
, 
siu_öt_ªg_øm_cfg
, 
vÆue
);

927 
	`¥ötf
("-- i¡ÑamÑeg %x = 0x%08x\n", (
WP_U32
)&
siu_öã∫Æ
->
øm_c⁄fig
, 
siu_öt_ªg_øm_cfg
);

928 
	`WPI_REG_SET
(
siu_öã∫Æ
->
øm_c⁄fig
, 
siu_öt_ªg_øm_cfg
);

931 
	}
}

935 
	$WT_SëI¡RamP¨tôi⁄
(
WP_U32
 
wpid
, *
cfg
)

938 
WT_öt_øm_∑πôi⁄_£t
 *
∑πôi⁄
 = (WT_öt_øm_∑πôi⁄_£à*)
cfg
;

940 
	`¥ötf
("------------------ Partition Change: Start ------------------\n");

941 
	`¥ötf
("Pﬁi˚rs: %d PCE HWÑuÀ†%d\n", 
∑πôi⁄
->
pﬁi˚r_íåõs
,Ö¨tôi⁄->
p˚_hw_ruÀs_num
);

943 if(
∑πôi⁄
->
cfu_rx_buf„rs_num
 !
WT_PARTITION_UNCHANGED
)

944 
	`¥ötf
("CFU RX buf„r†%d\n", 
∑πôi⁄
->
cfu_rx_buf„rs_num
);

946 if(
∑πôi⁄
->
cfu_tx_buf„rs_num
 !
WT_PARTITION_UNCHANGED
)

947 
	`¥ötf
("CFU TX buf„r†%d\n", 
∑πôi⁄
->
cfu_tx_buf„rs_num
);

949 #i‚de‡
WPE_PALLADIUM


950 if(
∑πôi⁄
->
mùs_ˇche_size
 !
WT_PARTITION_UNCHANGED
)

952 
	`¥ötf
("Partition change FAILURE!!!\n IllegalÖartitionÖarameters:\n"

954 
	`exô
(1);

958 #i‡
WP_HW_WINPATH4


959 
	`WT_SëI¡RamP¨tôi⁄_WP4
(
wpid
, 
cfg
, 
WPI_SIU3_BASE
);

962 #i‡
WP_HW_WINPATH3


963 
	`WT_SëI¡RamP¨tôi⁄_WP3
(
wpid
, 
cfg
);

966 
	`¥ötf
("------------------ Partition Change: Finish -----------------\n");

969 
	}
}

972 
WT_öt_øm_∑πôi⁄_£t
 
	göt_øm_∑πôi⁄
 =

974  
WT_PARTITION_UNCHANGED
,

975  
WT_PARTITION_UNCHANGED
,

976  
WT_PARTITION_UNCHANGED
,

977  
WT_PARTITION_UNCHANGED
,

978  
WT_PARTITION_UNCHANGED
,

	@wt_partition_ecc_util.h

8 #i‚de‡
WT_PARTITION_ECC_UTIL_H


9 
	#WT_PARTITION_ECC_UTIL_H


	)

17 
	#WPI_REV_ID
 
WPI_WP_REV_3_B1


	)

18 
	#WT_PARTITION_UNCHANGED
 0xFFFFFFFF

	)

22 
WP_U32
 
	mpﬁi˚r_íåõs
;

23 
WP_U32
 
	mp˚_hw_ruÀs_num
;

24 
WP_U32
 
	mcfu_rx_buf„rs_num
;

25 
WP_U32
 
	mcfu_tx_buf„rs_num
;

26 
WP_U32
 
	mmùs_ˇche_size
;

27 } 
	tWT_öt_øm_∑πôi⁄_£t
;

29 
WT_SëI¡RamP¨tôi⁄
(
WP_U32
 
wpid
, *
cfg
);

30 
WT_RódFmuG¸
(
WP_U32
 
wpid
);

31 
WP_U32
 
WT_HwDevi˚InfoGë
(WP_U32 
wpid
, 
WP_U8
 *
ªg_ba£s_±r
);

33 
WT_öt_øm_∑πôi⁄_£t
 
öt_øm_∑πôi⁄
;

	@wti_utility.c

4 
	mWTI_BOARD_CONFIG_NA
 = 0,

5 
	mWTI_DEFAULT_PIN_CONFIG
,

6 
	mWTI_PTP_TWO_BOARDS_CONFIG
,

7 
	mWTI_SYNC_ETH_CONFIG


10 
	#WT_CLOCK_REC_DIFF_REF_CLOCK
 125000000

	)

11 
WP_U32
 
	gglobÆ_˛ock_ªc_diff_ªf_˛ock
 = 
WT_CLOCK_REC_DIFF_REF_CLOCK
;

14 
	$WTI_Z¨lökPŒSëup
 (
WPX_∂l_cfg
 * 
∂lC⁄figP¨am
)

17 
∂lC⁄figP¨am
->
wpid
 = 0;

19 
globÆ_˛ock_ªc_diff_ªf_˛ock
)

22 
∂lC⁄figP¨am
->
≠Œ_øã
 = 
wpx_f_77_76
;

23 
∂lC⁄figP¨am
->
˛ock_out
 = 
wpx_≠Œ_˛k0
;

26 
∂lC⁄figP¨am
->
≠Œ_øã
 = 
wpx_f_38_88
;

27 
∂lC⁄figP¨am
->
˛ock_out
 = 
wpx_≠Œ_˛k0
;

30 
∂lC⁄figP¨am
->
≠Œ_øã
 = 
wpx_f_19_44
;

31 
∂lC⁄figP¨am
->
˛ock_out
 = 
wpx_≠Œ_˛k0
;

34 
∂lC⁄figP¨am
->
≠Œ_øã
 = 
wpx_f_9_72
;

35 
∂lC⁄figP¨am
->
˛ock_out
 = 
wpx_≠Œ_˛k0
;

38 
∂lC⁄figP¨am
->
≠Œ_øã
 = 
wpx_f_51_84
;

39 
∂lC⁄figP¨am
->
˛ock_out
 = 
wpx_≠Œ_˛k0
;

42 
∂lC⁄figP¨am
->
≠Œ_øã
 = 
wpx_f_25_92
;

43 
∂lC⁄figP¨am
->
˛ock_out
 = 
wpx_≠Œ_˛k0
;

46 
∂lC⁄figP¨am
->
≠Œ_øã
 = 
wpx_f_12_96
;

47 
∂lC⁄figP¨am
->
˛ock_out
 = 
wpx_≠Œ_˛k0
;

50 
∂lC⁄figP¨am
->
≠Œ_øã
 = 
wpx_f_6_48
;

51 
∂lC⁄figP¨am
->
˛ock_out
 = 
wpx_≠Œ_˛k0
;

54 
∂lC⁄figP¨am
->
≠Œ_øã
 = 
wpx_f_125
;

55 
∂lC⁄figP¨am
->
˛ock_out
 = 
wpx_≠Œ_˛k0
;

58 
∂lC⁄figP¨am
->
≠Œ_øã
 = 
wpx_f_62_5
;

59 
∂lC⁄figP¨am
->
˛ock_out
 = 
wpx_≠Œ_˛k0
;

62 
∂lC⁄figP¨am
->
≠Œ_øã
 = 
wpx_f_50
;

63 
∂lC⁄figP¨am
->
˛ock_out
 = 
wpx_≠Œ_˛k0
;

66 
∂lC⁄figP¨am
->
≠Œ_øã
 = 
wpx_f_25
;

67 
∂lC⁄figP¨am
->
˛ock_out
 = 
wpx_≠Œ_˛k0
;

70 
∂lC⁄figP¨am
->
≠Œ_øã
 = 
wpx_f_12_5
;

71 
∂lC⁄figP¨am
->
˛ock_out
 = 
wpx_≠Œ_˛k0
;

74 
∂lC⁄figP¨am
->
˛ock_øã
 = 
globÆ_˛ock_ªc_diff_ªf_˛ock
 / 1000;

75 
∂lC⁄figP¨am
->
˛ock_out
 = 
wpx_p0_˛k0
;

77 
	`¥ötf
 ("********************************************\n");

78 
	`¥ötf
 ("SMA1Ñeference clock setÅo %d\n",

79 
globÆ_˛ock_ªc_diff_ªf_˛ock
);

80 
	`¥ötf
 ("********************************************\n\n");

81 
	}
}

90 
	$WTI_BﬂrdPöC⁄fig
 (
WP_U32
 
c⁄figuøti⁄
, WP_U32 
bﬂrd_id
,

91 
WP_U32
 
∂l_˛ock_out
)

93 #i‡
	`deföed
(
WP_HW_WINPATH3
Ë|| deföed(
WP_HW_WINPATH4
)

94 
WP_°©us
 
°©us
;

95 
wpx_wp_¸_pö_io
 
wp_¸_pö_io
 = { 0 };

97 i‡(
c⁄figuøti⁄
 =
WTI_DEFAULT_PIN_CONFIG
)

102 
wp_¸_pö_io
.
brg_b
 = 
WPX_FPGA_NA
;

103 
wp_¸_pö_io
.
brg_c
 = 
WPX_FPGA_BRG_C_IN_SYNT_CLK
;

104 
wp_¸_pö_io
.
brg_d
 = 
WPX_FPGA_BRG_D_IN_SMA6
;

105 
wp_¸_pö_io
.
˛k_ªc_f˛k1
 = 
WPX_FPGA_CR_FCLK1_OUT_SMA5
;

106 
wp_¸_pö_io
.
˛k_ªc_f˛k2
 = 
WPX_FPGA_CR_FCLK2_OUT_SMA4
;

107 
wp_¸_pö_io
.
˛k_ªc_µs1_ouçut
 = 
WPX_FPGA_NA
;

108 
wp_¸_pö_io
.
˛k_ªc_µs1_öput
 = 
WPX_FPGA_CR_PPS1_IN_SMA3
;

109 
wp_¸_pö_io
.
˛k_ªc_µs2_ouçut
 = 
WPX_FPGA_CR_PPS2_OUT_SMA2
;

110 
wp_¸_pö_io
.
˛k_ªc_µs2_öput
 = 
WPX_FPGA_NA
;

111 
wp_¸_pö_io
.
sync_ëh_˛k0_ouçut
 = 
WPX_FPGA_NA
;

112 
wp_¸_pö_io
.
sync_ëh_˛k1_ouçut
 = 
WPX_FPGA_NA
;

113 #i‡(
WTI_CESOP_CLOCK_RECOVERY_ENABLE
 || 
WTI_CESOP_RX_TIMING_ENABLE
)

114 i‡(
wpx_≠Œ_˛k0
 =
∂l_˛ock_out
)

116 
wp_¸_pö_io
.
sma1_out
 = 
WPX_FPGA_SMA1_OUT_APLL0_CLK
;

120 
wp_¸_pö_io
.
sma1_out
 = 
WPX_FPGA_SMA1_OUT_P0_CLK0
;

123 
wp_¸_pö_io
.
sma1_out
 = 
WPX_FPGA_SMA1_OUT_APLL0_CLK
;

125 
wp_¸_pö_io
.
£rdes_x_£À˘
 = 
WPX_FPGA_SERDES_CLK_APLL0
;

126 
wp_¸_pö_io
.
£rdes1_ªf_˛k
 = 
WPX_FPGA_SERDES_CLK_125
;

127 
wp_¸_pö_io
.
£rdes0_ªf_˛k
 = 
WPX_FPGA_SERDES_CLK_125
;

130 i‡(
c⁄figuøti⁄
 =
WTI_PTP_TWO_BOARDS_CONFIG
)

132 i‡(
bﬂrd_id
)

135 
wp_¸_pö_io
.
brg_b
 = 
WPX_FPGA_BRG_B_IN_SMA5
;

136 
wp_¸_pö_io
.
brg_c
 = 
WPX_FPGA_NA
;

137 
wp_¸_pö_io
.
brg_d
 = 
WPX_FPGA_BRG_D_IN_SMA4
;

138 
wp_¸_pö_io
.
˛k_ªc_f˛k1
 = 
WPX_FPGA_NA
;

139 
wp_¸_pö_io
.
˛k_ªc_f˛k2
 = 
WPX_FPGA_NA
;

140 
wp_¸_pö_io
.
˛k_ªc_µs1_ouçut
 = 
WPX_FPGA_NA
;

141 
wp_¸_pö_io
.
˛k_ªc_µs1_öput
 = 
WPX_FPGA_CR_PPS1_IN_SMA3
;

142 
wp_¸_pö_io
.
˛k_ªc_µs2_ouçut
 = 
WPX_FPGA_NA
;

143 
wp_¸_pö_io
.
˛k_ªc_µs2_öput
 = 
WPX_FPGA_CR_PPS2_IN_SMA2
;

144 
wp_¸_pö_io
.
sync_ëh_˛k0_ouçut
 = 
WPX_FPGA_NA
;

145 
wp_¸_pö_io
.
sync_ëh_˛k1_ouçut
 = 
WPX_FPGA_NA
;

146 
wp_¸_pö_io
.
sma1_out
 = 
WPX_FPGA_SMA1_OUT_TCXO
;

147 
wp_¸_pö_io
.
£rdes_x_£À˘
 =

148 
WPX_FPGA_SERDES_CLK_APLL0


151 
wp_¸_pö_io
.
£rdes1_ªf_˛k
 = 
WPX_FPGA_SERDES_CLK_125
;

152 
wp_¸_pö_io
.
£rdes0_ªf_˛k
 = 
WPX_FPGA_SERDES_CLK_125
;

157 
wp_¸_pö_io
.
brg_b
 = 
WPX_FPGA_BRG_B_IN_SMA5
;

158 
wp_¸_pö_io
.
brg_c
 = 
WPX_FPGA_NA
;

159 
wp_¸_pö_io
.
brg_d
 = 
WPX_FPGA_NA
;

160 
wp_¸_pö_io
.
˛k_ªc_f˛k1
 = 
WPX_FPGA_CR_FCLK1_OUT_SMA5
;

161 
wp_¸_pö_io
.
˛k_ªc_f˛k2
 = 
WPX_FPGA_CR_FCLK2_OUT_SMA4
;

162 
wp_¸_pö_io
.
˛k_ªc_µs1_ouçut
 = 
WPX_FPGA_CR_PPS1_OUT_SMA3
;

163 
wp_¸_pö_io
.
˛k_ªc_µs1_öput
 = 
WPX_FPGA_NA
;

164 
wp_¸_pö_io
.
˛k_ªc_µs2_ouçut
 = 
WPX_FPGA_CR_PPS2_OUT_SMA2
;

165 
wp_¸_pö_io
.
˛k_ªc_µs2_öput
 = 
WPX_FPGA_NA
;

166 
wp_¸_pö_io
.
sync_ëh_˛k0_ouçut
 = 
WPX_FPGA_NA
;

167 
wp_¸_pö_io
.
sync_ëh_˛k1_ouçut
 = 
WPX_FPGA_NA
;

168 
wp_¸_pö_io
.
sma1_out
 = 
WPX_FPGA_SMA1_OUT_TCXO
;

169 
wp_¸_pö_io
.
£rdes_x_£À˘
 =

170 
WPX_FPGA_SERDES_CLK_APLL0


173 
wp_¸_pö_io
.
£rdes1_ªf_˛k
 = 
WPX_FPGA_SERDES_CLK_125
;

174 
wp_¸_pö_io
.
£rdes0_ªf_˛k
 = 
WPX_FPGA_SERDES_CLK_125
;

177 i‡(
c⁄figuøti⁄
 =
WTI_SYNC_ETH_CONFIG
)

179 
wp_¸_pö_io
.
brg_b
 = 
WPX_FPGA_BRG_B_IN_SMA5
;

180 
wp_¸_pö_io
.
brg_c
 = 
WPX_FPGA_BRG_C_IN_SYNT_CLK
;

181 
wp_¸_pö_io
.
brg_d
 = 
WPX_FPGA_BRG_D_IN_SMA6
;

182 
wp_¸_pö_io
.
˛k_ªc_f˛k1
 = 
WPX_FPGA_NA
;

183 
wp_¸_pö_io
.
˛k_ªc_f˛k2
 = 
WPX_FPGA_CR_FCLK2_OUT_SMA4
;

184 
wp_¸_pö_io
.
˛k_ªc_µs1_ouçut
 = 
WPX_FPGA_NA
;

185 
wp_¸_pö_io
.
˛k_ªc_µs1_öput
 = 
WPX_FPGA_CR_PPS1_IN_SMA3
;

186 
wp_¸_pö_io
.
˛k_ªc_µs2_ouçut
 = 
WPX_FPGA_NA
;

187 
wp_¸_pö_io
.
˛k_ªc_µs2_öput
 = 
WPX_FPGA_NA
;

188 
wp_¸_pö_io
.
sma1_out
 = 
WPX_FPGA_SMA1_OUT_APLL0_CLK
;

189 i‡(
bﬂrd_id
)

191 
wp_¸_pö_io
.
sync_ëh_˛k0_ouçut
 = 
WPX_FPGA_NA
;

192 
wp_¸_pö_io
.
sync_ëh_˛k1_ouçut
 = 
WPX_FPGA_SYNC_ETH1_OUT_SMA2
;

196 
wp_¸_pö_io
.
sync_ëh_˛k0_ouçut
 = 
WPX_FPGA_SYNC_ETH0_OUT_SMA2
;

197 
wp_¸_pö_io
.
sync_ëh_˛k1_ouçut
 = 
WPX_FPGA_NA
;

199 
wp_¸_pö_io
.
£rdes_x_£À˘
 =

200 
WPX_FPGA_SERDES_CLK_APLL0


202 
wp_¸_pö_io
.
£rdes1_ªf_˛k
 = 
WPX_FPGA_SERDES_CLK_125
;

203 
wp_¸_pö_io
.
£rdes0_ªf_˛k
 = 
WPX_FPGA_SERDES_CLK_125
;

207 
	`¥ötf
 ("WTI_BoardPinConfig: No confoguration selected\n");

209 
	`WPX_ReboŸ
 ();

212 
wp_¸_pö_io
.
sync_ëh_˛k0_ouçut
 = 
WPX_FPGA_NA
;

213 
wp_¸_pö_io
.
sync_ëh_˛k1_ouçut
 = 
WPX_FPGA_NA
;

214 
wp_¸_pö_io
.
∂l_ªf_˛k1_£l
 = 
WPX_FPGA_PLL_REFCLK1_CLK_REC_FCLK_1
;

215 
wp_¸_pö_io
.
∂l_ªf_˛k2_£l
 = 
WPX_FPGA_PLL_REFCLK2_CLK_REC_FCLK_2
;

217 
wp_¸_pö_io
.
osci_£l
 = 
WPX_FPGA_OSCI_SOURCE_SYNT_CLK
;

219 
°©us
 = 
	`WPX_CrBﬂrdPöC⁄fig
 (0, 
wp_¸_pö_io
);

221 
	`WT_U„Tîmö©eOnEº‹
(
°©us
, "WUFE_Sy°emC⁄fig",0, 
__LINE__
);

224 
	}
}

	@
1
.
0
12
198
atm_ima_ufe.c
atm_ima_ufe.h
atm_ima_ufe_stats.c
atm_ima_ufe_util.c
flexmux_util.c
flexmux_util.h
os_timer.c
ufe_utility.c
ufe_utility.h
wt_partition_ecc_util.c
wt_partition_ecc_util.h
wti_utility.c
